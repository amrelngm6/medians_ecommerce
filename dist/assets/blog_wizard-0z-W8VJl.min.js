const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["side-form-create-DFAqnpzu.min.js","Close-Sot7sZnH.min.js","index.min.js","index.min.css","Field-52XWHMyF.min.js","Field.min.css","multiselect-DRR5zGrU.min.js","side-form-update-DBDhd1v7.min.js","form_field-Cfs-92DN.min.js"])))=>i.map(i=>d[i]);
var Un=Object.defineProperty;var Hn=(i,t,e)=>t in i?Un(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var g=(i,t,e)=>Hn(i,typeof t!="symbol"?t+"":t,e);import{_ as On,r as U,t as Y,a as ue,o as x,c as A,b,k as Ae,d as k,h as Mn,e as z,A as me,F as ie,g as le,w as Z,v as $,l as qe,m as je,p as Nn,u as Dn,E as zn}from"./index.min.js";import Wn from"./Close-Sot7sZnH.min.js";import{d as Kn}from"./trash-D--yMlDB.min.js";import{r as qn}from"./route-BPoP-zEA.min.js";import{c as jn}from"./car-d1fh6vla.min.js";import{f as Gn}from"./Field-52XWHMyF.min.js";import{c as Jn,s as Yn}from"./color-picker-CadtDVnN.min.js";import{D as Zn}from"./vue3-easy-data-table.es-CVIFO-h1.min.js";import{e as $n}from"./vue3-tags-input.esm-B_S1vDw_.min.js";import{b as Xn,t as Qn,P as _,i as F,B as H,M as D,C as I,E as eo,a as to,c as ae,d as no,g as oo,e as so,f as io,n as lo,h as ao,j as ro,R as ot,D as st,k as co,S as uo,T as mo,l as ho,I as go,m as fo,p as po,o as bo,N as wo,A as Co,q as _o,r as vo,s as ko,u as yo,v as W,w as _e,x as oe,y as ve,z as ke,F as re,G as ye,H as Io,J as To,K as xo,L as So,O as Ao,Q as Ro,U as Ut,V as q,W as Eo,X as Ge,Y as Ie,Z as Ht,_ as te,$ as Ot,a0 as Vo,a1 as Bo,a2 as Mt,a3 as Je,a4 as Lo,a5 as Fe,a6 as Nt,a7 as Dt,a8 as ne,a9 as ce,aa as de,ab as Te,ac as xe,ad as Fo,ae as Ye,af as zt,ag as Wt,ah as Po,ai as Uo,aj as Ho,ak as it,al as Oo,am as Mo,an as No,ao as Do,ap as zo,aq as Wo,ar as Ze,as as Ko,at as qo,au as Kt,av as jo,aw as qt,ax as lt,ay as Re,az as Go,aA as Jo,aB as Yo,aC as Zo,aD as $o,aE as Xo,aF as Qo}from"./ckeditor5-DVyVssK-.min.js";import"./multiselect-DRR5zGrU.min.js";function es(i,t,e){var n=i.length;return e=e===void 0?n:e,!t&&e>=n?i:Xn(i,t,e)}var ts="\\ud800-\\udfff",ns="\\u0300-\\u036f",os="\\ufe20-\\ufe2f",ss="\\u20d0-\\u20ff",is=ns+os+ss,ls="\\ufe0e\\ufe0f",as="\\u200d",rs=RegExp("["+as+ts+is+ls+"]");function jt(i){return rs.test(i)}function cs(i){return i.split("")}var Gt="\\ud800-\\udfff",ds="\\u0300-\\u036f",us="\\ufe20-\\ufe2f",ms="\\u20d0-\\u20ff",hs=ds+us+ms,gs="\\ufe0e\\ufe0f",fs="["+Gt+"]",Pe="["+hs+"]",Ue="\\ud83c[\\udffb-\\udfff]",ps="(?:"+Pe+"|"+Ue+")",Jt="[^"+Gt+"]",Yt="(?:\\ud83c[\\udde6-\\uddff]){2}",Zt="[\\ud800-\\udbff][\\udc00-\\udfff]",bs="\\u200d",$t=ps+"?",Xt="["+gs+"]?",ws="(?:"+bs+"(?:"+[Jt,Yt,Zt].join("|")+")"+Xt+$t+")*",Cs=Xt+$t+ws,_s="(?:"+[Jt+Pe+"?",Pe,Yt,Zt,fs].join("|")+")",vs=RegExp(Ue+"(?="+Ue+")|"+_s+Cs,"g");function ks(i){return i.match(vs)||[]}function ys(i){return jt(i)?ks(i):cs(i)}function Is(i){return function(t){t=Qn(t);var e=jt(t)?ys(t):void 0,n=e?e[0]:t.charAt(0),o=e?es(e,1).join(""):t.slice(1);return n[i]()+o}}var Ts=Is("toUpperCase");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qt extends I{constructor(e,n){super(e);g(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,s=n.document.selection,l=e.forceValue===void 0?!this.value:e.forceValue;n.change(a=>{if(s.isCollapsed)l?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const r=n.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const c of r)l?a.setAttribute(this.attributeKey,l,c):a.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,n=e.schema,o=e.document.selection;if(o.isCollapsed)return o.hasAttribute(this.attributeKey);for(const s of o.getRanges())for(const l of s.getItems())if(n.checkAttribute(l,this.attributeKey))return l.hasAttribute(this.attributeKey);return!1}}const X="bold";class xs extends _{static get pluginName(){return"BoldEditing"}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:X}),t.model.schema.setAttributeProperties(X,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:X,view:"strong",upcastAlso:["b",n=>{const o=n.getStyle("font-weight");return o&&(o=="bold"||Number(o)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(X,new Qt(t,X)),t.keystrokes.set("CTRL+B",X),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function en({editor:i,commandName:t,plugin:e,icon:n,label:o,keystroke:s}){return l=>{const a=i.commands.get(t),r=new l(i.locale);return r.set({label:o,icon:n,keystroke:s,isToggleable:!0}),r.bind("isEnabled").to(a,"isEnabled"),r.bind("isOn").to(a,"value"),r instanceof D?r.set({role:"menuitemcheckbox"}):r.set({tooltip:!0}),e.listenTo(r,"execute",()=>{i.execute(t),i.editing.view.focus()}),r}}const Ee="bold";class Ss extends _{static get pluginName(){return"BoldUI"}init(){const t=this.editor,e=t.locale.t,n=en({editor:t,commandName:Ee,plugin:this,icon:F.bold,label:e("Bold"),keystroke:"CTRL+B"});t.ui.componentFactory.add(Ee,()=>n(H)),t.ui.componentFactory.add("menuBar:"+Ee,()=>n(D))}}class As extends _{static get requires(){return[xs,Ss]}static get pluginName(){return"Bold"}}const Q="italic";class Rs extends _{static get pluginName(){return"ItalicEditing"}init(){const t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:Q}),t.model.schema.setAttributeProperties(Q,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:Q,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(Q,new Qt(t,Q)),t.keystrokes.set("CTRL+I",Q),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}var Es='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const Ve="italic";class Vs extends _{static get pluginName(){return"ItalicUI"}init(){const t=this.editor,e=t.locale.t,n=en({editor:t,commandName:Ve,plugin:this,icon:Es,keystroke:"CTRL+I",label:e("Italic")});t.ui.componentFactory.add(Ve,()=>n(H)),t.ui.componentFactory.add("menuBar:"+Ve,()=>n(D))}}class Bs extends _{static get requires(){return[Rs,Vs]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ls extends io{constructor(e,n){super(e);g(this,"view");g(this,"_toolbarConfig");g(this,"_elementReplacer");this.view=n,this._toolbarConfig=lo(e.config.get("toolbar")),this._elementReplacer=new ao,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const n=this.editor,o=this.view,s=n.editing.view,l=o.editable,a=s.document.getRoot();l.name=a.rootName,o.render();const r=l.element;this.setEditableElement(l.name,r),o.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(r),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),o.menuBarView&&this._initMenuBar(o.menuBarView),this._initDialogPluginIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,n=this.editor.editing.view;this._elementReplacer.restore(),n.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:n})=>n||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,n=e.editing.view,o=n.document.getRoot(),s=e.sourceElement;let l;const a=e.config.get("placeholder");a&&(l=typeof a=="string"?a:a[this.view.editable.name]),!l&&s&&s.tagName.toLowerCase()==="textarea"&&(l=s.getAttribute("placeholder")),l&&(o.placeholder=l),ro({view:n,element:o,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,n,o){const s=this.view.stickyPanel;if(s.isSticky){const l=new ot(s.element).height;n.viewportOffset.top+=l}else{const l=()=>{this.editor.editing.view.scrollToTheSelection(o)};this.listenTo(s,"change:isSticky",l),setTimeout(()=>{this.stopListening(s,"change:isSticky",l)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,n=this.editor.plugins.get("Dialog");n.on("show",()=>{const o=n.view;o.on("moveTo",(s,l)=>{if(!e.isSticky||o.wasMoved)return;const a=new ot(e.contentPanelElement);l[1]<a.bottom+st.defaultOffset&&(l[1]=a.bottom+st.defaultOffset)},{priority:"high"})},{priority:"low"})}}class Fs extends co{constructor(e,n,o={}){super(e);g(this,"stickyPanel");g(this,"toolbar");g(this,"editable");this.stickyPanel=new uo(e),this.toolbar=new mo(e,{shouldGroupWhenFull:o.shouldToolbarGroupWhenFull}),o.useMenuBar&&(this.menuBarView=new ho(e)),this.editable=new go(e,n)}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Ps extends eo(to){constructor(e,n={}){if(!fe(e)&&n.initialData!==void 0)throw new ae("editor-create-initial-data",null);super(n);g(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",Us(e)),fe(e)&&(this.sourceElement=e),this.model.document.createRoot();const o=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),l=new Fs(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:o,useMenuBar:s.isVisible});this.ui=new Ls(this,l),no(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,n={}){return new Promise(o=>{const s=new this(e,n);o(s.initPlugins().then(()=>s.ui.init(fe(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function Us(i){return fe(i)?oo(i):i}function fe(i){return so(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hs extends I{constructor(t){super(t),this.affectsData=!1}execute(){const t=this.editor.model,e=t.document.selection;let n=t.schema.getLimitElement(e);if(e.containsEntireContent(n)||!at(t.schema,n))do if(n=n.parent,!n)return;while(!at(t.schema,n));t.change(o=>{o.setSelection(n,"in")})}}function at(i,t){return i.isLimit(t)&&(i.checkChild(t,"$text")||i.checkChild(t,"paragraph"))}const Os=po("Ctrl+A");class Ms extends _{static get pluginName(){return"SelectAllEditing"}init(){const t=this.editor,e=t.t,o=t.editing.view.document;t.commands.add("selectAll",new Hs(t)),this.listenTo(o,"keydown",(s,l)=>{fo(l)===Os&&(t.execute("selectAll"),l.preventDefault())}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}var Ns='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class Ds extends _{static get pluginName(){return"SelectAllUI"}init(){const t=this.editor;t.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(H);return e.set({tooltip:!0}),e}),t.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(D))}_createButton(t){const e=this.editor,n=e.locale,o=e.commands.get("selectAll"),s=new t(e.locale),l=n.t;return s.set({label:l("Select all"),icon:Ns,keystroke:"Ctrl+A"}),s.bind("isEnabled").to(o,"isEnabled"),this.listenTo(s,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),s}}class zs extends _{static get requires(){return[Ms,Ds]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tn extends I{constructor(e){super(e);g(this,"_stack",[]);g(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(n,o)=>{o[1]={...o[1]};const s=o[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(n,o)=>{o[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const n=this.editor.model.document.selection,o={ranges:n.hasOwnRange?Array.from(n.getRanges()):[],isBackward:n.isBackward};this._stack.push({batch:e,selection:o}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,n,o){const s=this.editor.model,l=s.document,a=[],r=e.map(d=>d.getTransformedByOperations(o)),c=r.flat();for(const d of r){const u=d.filter(m=>m.root!=l.graveyard).filter(m=>!Ks(m,c));u.length&&(Ws(u),a.push(u[0]))}a.length&&s.change(d=>{d.setSelection(a,{backward:n})})}_undo(e,n){const o=this.editor.model,s=o.document;this._createdBatches.add(n);const l=e.operations.slice().filter(a=>a.isDocumentOperation);l.reverse();for(const a of l){const r=a.baseVersion+1,c=Array.from(s.history.getOperations(r)),u=bo([a.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let m of u){const h=m.affectedSelectable;h&&!o.canEditAt(h)&&(m=new wo(m.baseVersion)),n.addOperation(m),o.applyOperation(m),s.history.setOperationAsUndone(a,m)}}}}function Ws(i){i.sort((t,e)=>t.start.isBefore(e.start)?-1:1);for(let t=1;t<i.length;t++){const n=i[t-1].getJoined(i[t],!0);n&&(t--,i.splice(t,2,n))}}function Ks(i,t){return t.some(e=>e!==i&&e.containsRange(i,!0))}class qs extends tn{execute(t=null){const e=t?this._stack.findIndex(s=>s.batch==t):this._stack.length-1,n=this._stack.splice(e,1)[0],o=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(o,()=>{this._undo(n.batch,o);const s=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,s)}),this.fire("revert",n.batch,o),this.refresh()}}class js extends tn{execute(){const t=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const o=t.batch.operations[t.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(o);this._restoreSelection(t.selection.ranges,t.selection.isBackward,s),this._undo(t.batch,e)}),this.refresh()}}class Gs extends _{constructor(){super(...arguments);g(this,"_undoCommand");g(this,"_redoCommand");g(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,n=e.t;this._undoCommand=new qs(e),this._redoCommand=new js(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(o,s)=>{const l=s[0];if(!l.isDocumentOperation)return;const a=l.batch,r=this._redoCommand.createdBatches.has(a),c=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(r?this._undoCommand.addBatch(a):c||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(o,s,l)=>{this._redoCommand.addBatch(l)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Undo"),keystroke:"CTRL+Z"},{label:n("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class Js extends _{static get pluginName(){return"UndoUI"}init(){const t=this.editor,e=t.locale,n=t.t,o=e.uiLanguageDirection=="ltr"?F.undo:F.redo,s=e.uiLanguageDirection=="ltr"?F.redo:F.undo;this._addButtonsToFactory("undo",n("Undo"),"CTRL+Z",o),this._addButtonsToFactory("redo",n("Redo"),"CTRL+Y",s)}_addButtonsToFactory(t,e,n,o){const s=this.editor;s.ui.componentFactory.add(t,()=>{const l=this._createButton(H,t,e,n,o);return l.set({tooltip:!0}),l}),s.ui.componentFactory.add("menuBar:"+t,()=>this._createButton(D,t,e,n,o))}_createButton(t,e,n,o,s){const l=this.editor,a=l.locale,r=l.commands.get(e),c=new t(a);return c.set({label:n,icon:s,keystroke:o}),c.bind("isEnabled").to(r,"isEnabled"),this.listenTo(c,"execute",()=>{l.execute(e),l.editing.view.focus()}),c}}class nn extends _{static get requires(){return[Gs,Js]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ys extends _{static get requires(){return[Co,_o,vo,zs,ko,yo,nn]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Se extends I{constructor(e,n){super(e);g(this,"attributeKey");this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=n.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,s=n.document.selection,l=e.value,a=e.batch,r=c=>{if(s.isCollapsed)l?c.setSelectionAttribute(this.attributeKey,l):c.removeSelectionAttribute(this.attributeKey);else{const d=n.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const u of d)l?c.setAttribute(this.attributeKey,l,u):c.removeAttribute(this.attributeKey,u)}};a?n.enqueueChange(a,c=>{r(c)}):n.change(c=>{r(c)})}}const B="fontSize",L="fontFamily",M="fontColor",N="fontBackgroundColor";function on(i,t){const e={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const n of t)e.model.values.push(n.model),e.view[n.model]=n.view,n.upcastAlso&&(e.upcastAlso[n.model]=n.upcastAlso);return e}function sn(i){return t=>$s(t.getStyle(i))}function ln(i){return(t,{writer:e})=>e.createAttributeElement("span",{style:`${i}:${t}`},{priority:7})}function Zs({dropdownView:i,colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:o,documentColorsLabel:s,documentColorsCount:l,colorPickerViewConfig:a}){const r=i.locale,c=new Ut(r,{colors:t,columns:e,removeButtonLabel:n,colorPickerLabel:o,documentColorsLabel:s,documentColorsCount:l,colorPickerViewConfig:a});return i.colorSelectorView=c,i.panelView.children.add(c),c}function $s(i){return i.replace(/\s/g,"")}class Xs extends Se{constructor(t){super(t,L)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function an(i){return i.map(Qs).filter(t=>t!==void 0)}function Qs(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return ei(i)}function ei(i){const t=i.replace(/"|'/g,"").split(","),e=t[0],n=t.map(ti).join(", ");return{title:e,model:n,view:{name:"span",styles:{"font-family":n},priority:7}}}function ti(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}class ni extends _{static get pluginName(){return"FontFamilyEditing"}constructor(t){super(t),t.config.define(L,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:L}),t.model.schema.setAttributeProperties(L,{isFormatting:!0,copyOnEnter:!0});const e=an(t.config.get("fontFamily.options")).filter(o=>o.model),n=on(L,e);t.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(n),t.commands.add(L,new Xs(t))}_prepareAnyValueConverters(){const t=this.editor;t.conversion.for("downcast").attributeToElement({model:L,view:(e,{writer:n})=>n.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),t.conversion.for("upcast").elementToAttribute({model:{key:L,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:L,value:e=>e.getAttribute("face")}})}}var rt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class oi extends _{static get pluginName(){return"FontFamilyUI"}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),o=t.commands.get(L),s=e("Font Family"),l=si(n,o);t.ui.componentFactory.add(L,a=>{const r=W(a);return _e(r,l,{role:"menu",ariaLabel:s}),r.buttonView.set({label:s,icon:rt,tooltip:!0}),r.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),r.bind("isEnabled").to(o),this.listenTo(r,"execute",c=>{t.execute(c.source.commandName,{value:c.source.commandParam}),t.editing.view.focus()}),r}),t.ui.componentFactory.add(`menuBar:${L}`,a=>{const r=new oe(a);r.buttonView.set({label:s,icon:rt}),r.bind("isEnabled").to(o);const c=new ve(a);for(const d of l){const u=new ke(a,r),m=new D(a);m.set({role:"menuitemradio",isToggleable:!0}),m.bind(...Object.keys(d.model)).to(d.model),m.delegate("execute").to(r),m.on("execute",()=>{t.execute(d.model.commandName,{value:d.model.commandParam}),t.editing.view.focus()}),u.children.add(m),c.items.add(u)}return r.panelView.children.add(c),r})}_getLocalizedOptions(){const t=this.editor,e=t.t;return an(t.config.get(L).options).map(o=>(o.title==="Default"&&(o.title=e("Default")),o))}}function si(i,t){const e=new re;for(const n of i){const o={type:"button",model:new ye({commandName:L,commandParam:n.model,label:n.title,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(t,"value",s=>s===n.model?!0:!s||!n.model?!1:s.split(",")[0].replace(/'/g,"").toLowerCase()===n.model.toLowerCase()),n.view&&typeof n.view!="string"&&n.view.styles&&o.model.set("labelStyle",`font-family: ${n.view.styles["font-family"]}`),e.add(o)}return e}class ii extends _{static get requires(){return[ni,oi]}static get pluginName(){return"FontFamily"}}class li extends Se{constructor(t){super(t,B)}}function $e(i){return i.map(t=>ai(t)).filter(t=>t!==void 0)}const ct={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function ai(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&di(i))return He(i);const t=ci(i);if(t)return He(t);if(i==="default")return{model:void 0,title:"Default"};if(!ui(i))return ri(i)}function ri(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},He(i)}function He(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function ci(i){return typeof i=="string"?ct[i]:ct[i.model]}function di(i){return i.title&&i.model&&i.view}function ui(i){let t;if(typeof i=="object")if(i.model)t=parseFloat(i.model);else throw new ae("font-size-invalid-definition",null,i);else t=parseFloat(i);return isNaN(t)}const dt=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class mi extends _{static get pluginName(){return"FontSizeEditing"}constructor(t){super(t),t.config.define(B,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const t=this.editor;t.model.schema.extend("$text",{allowAttributes:B}),t.model.schema.setAttributeProperties(B,{isFormatting:!0,copyOnEnter:!0});const e=t.config.get("fontSize.supportAllValues"),n=$e(this.editor.config.get("fontSize.options")).filter(s=>s.model),o=on(B,n);e?(this._prepareAnyValueConverters(o),this._prepareCompatibilityConverter()):t.conversion.attributeToElement(o),t.commands.add(B,new li(t))}_prepareAnyValueConverters(t){const e=this.editor,n=t.model.values.filter(o=>!Io(String(o))&&!To(String(o)));if(n.length)throw new ae("font-size-invalid-use-of-named-presets",null,{presets:n});e.conversion.for("downcast").attributeToElement({model:B,view:(o,{writer:s})=>{if(o)return s.createAttributeElement("span",{style:"font-size:"+o},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:B,value:o=>o.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:B,value:e=>{const n=e.getAttribute("size"),o=n[0]==="-"||n[0]==="+";let s=parseInt(n,10);o&&(s=3+s);const l=dt.length-1,a=Math.min(Math.max(s,0),l);return dt[a]}}})}}var ut='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class hi extends _{static get pluginName(){return"FontSizeUI"}init(){const t=this.editor,e=t.t,n=this._getLocalizedOptions(),o=t.commands.get(B),s=e("Font Size"),l=gi(n,o);t.ui.componentFactory.add(B,a=>{const r=W(a);return _e(r,l,{role:"menu",ariaLabel:s}),r.buttonView.set({label:s,icon:ut,tooltip:!0}),r.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),r.bind("isEnabled").to(o),this.listenTo(r,"execute",c=>{t.execute(c.source.commandName,{value:c.source.commandParam}),t.editing.view.focus()}),r}),t.ui.componentFactory.add(`menuBar:${B}`,a=>{const r=new oe(a);r.buttonView.set({label:s,icon:ut}),r.bind("isEnabled").to(o);const c=new ve(a);for(const d of l){const u=new ke(a,r),m=new D(a);m.set({role:"menuitemradio",isToggleable:!0}),m.bind(...Object.keys(d.model)).to(d.model),m.delegate("execute").to(r),m.on("execute",()=>{t.execute(d.model.commandName,{value:d.model.commandParam}),t.editing.view.focus()}),u.children.add(m),c.items.add(u)}return r.panelView.children.add(c),r})}_getLocalizedOptions(){const t=this.editor,e=t.t,n={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return $e(t.config.get(B).options).map(s=>{const l=n[s.title];return l&&l!=s.title&&(s=Object.assign({},s,{title:l})),s})}}function gi(i,t){const e=new re;for(const n of i){const o={type:"button",model:new ye({commandName:B,commandParam:n.model,label:n.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};n.view&&typeof n.view!="string"&&(n.view.styles&&o.model.set("labelStyle",`font-size:${n.view.styles["font-size"]}`),n.view.classes&&o.model.set("class",`${o.model.class} ${n.view.classes}`)),o.model.bind("isOn").to(t,"value",s=>s===n.model),e.add(o)}return e}class fi extends _{static get requires(){return[mi,hi]}static get pluginName(){return"FontSize"}normalizeSizeOptions(t){return $e(t)}}class pi extends Se{constructor(t){super(t,M)}}class bi extends _{static get pluginName(){return"FontColorEditing"}constructor(t){super(t),t.config.define(M,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:M,value:sn("color")}}),t.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:M,value:e=>e.getAttribute("color")}}),t.conversion.for("downcast").attributeToElement({model:M,view:ln("color")}),t.commands.add(M,new pi(t)),t.model.schema.extend("$text",{allowAttributes:M}),t.model.schema.setAttributeProperties(M,{isFormatting:!0,copyOnEnter:!0})}}class rn extends _{constructor(e,{commandName:n,componentName:o,icon:s,dropdownLabel:l}){super(e);g(this,"commandName");g(this,"componentName");g(this,"icon");g(this,"dropdownLabel");g(this,"columns");this.commandName=n,this.componentName=o,this.icon=s,this.dropdownLabel=l,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,n=e.locale,o=n.t,s=e.commands.get(this.commandName),l=e.config.get(this.componentName),a=So(l.colors),r=Ao(n,a),c=l.documentColors,d=l.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,u=>{const m=W(u);let h=!1;const f=Zs({dropdownView:m,colors:r.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:o("Remove color"),colorPickerLabel:o("Color picker"),documentColorsLabel:c!==0?o("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:d?l.colorPicker||{}:!1});return f.bind("selectedColor").to(s,"value"),m.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),m.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),m.bind("isEnabled").to(s),f.on("execute",(p,C)=>{m.isOpen&&e.execute(this.commandName,{value:C.value,batch:this._undoStepBatch}),C.source!=="colorPicker"&&e.editing.view.focus(),C.source==="colorPickerSaveButton"&&(m.isOpen=!1)}),f.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),f.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(m.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),m.on("change:isOpen",(p,C,w)=>{h||(h=!0,m.colorSelectorView.appendUI()),w&&(c!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),Ro(m,()=>m.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(p=>p.isOn)),m}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,u=>{const m=new oe(u);m.buttonView.set({label:this.dropdownLabel,icon:this.icon}),m.bind("isEnabled").to(s);let h=!1;const f=new Ut(u,{colors:r.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:o("Remove color"),colorPickerLabel:o("Color picker"),documentColorsLabel:c!==0?o("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:!1});return f.bind("selectedColor").to(s,"value"),f.delegate("execute").to(m),f.on("execute",(p,C)=>{e.execute(this.commandName,{value:C.value,batch:this._undoStepBatch}),e.editing.view.focus()}),m.on("change:isOpen",(p,C,w)=>{h||(h=!0,f.appendUI()),w&&(c!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),m.panelView.children.add(f),m})}}var wi='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class Ci extends rn{constructor(t){const e=t.locale.t;super(t,{commandName:M,componentName:M,icon:wi,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class _i extends _{static get requires(){return[bi,Ci]}static get pluginName(){return"FontColor"}}class vi extends Se{constructor(t){super(t,N)}}class ki extends _{static get pluginName(){return"FontBackgroundColorEditing"}constructor(t){super(t),t.config.define(N,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),t.data.addStyleProcessorRules(xo),t.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:N,value:sn("background-color")}}),t.conversion.for("downcast").attributeToElement({model:N,view:ln("background-color")}),t.commands.add(N,new vi(t)),t.model.schema.extend("$text",{allowAttributes:N}),t.model.schema.setAttributeProperties(N,{isFormatting:!0,copyOnEnter:!0})}}var yi='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class Ii extends rn{constructor(t){const e=t.locale.t;super(t,{commandName:N,componentName:N,icon:yi,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class Ti extends _{static get requires(){return[ki,Ii]}static get pluginName(){return"FontBackgroundColor"}}class xi extends _{static get requires(){return[ii,fi,_i,Ti]}static get pluginName(){return"Font"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Si extends I{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=t.document,n=q(e.selection.getSelectedBlocks());this.value=!!n&&n.is("element","paragraph"),this.isEnabled=!!n&&mt(n,t.schema)}execute(t={}){const e=this.editor.model,n=e.document,o=t.selection||n.selection;e.canEditAt(o)&&e.change(s=>{const l=o.getSelectedBlocks();for(const a of l)!a.is("element","paragraph")&&mt(a,e.schema)&&s.rename(a,"paragraph")})}}function mt(i,t){return t.checkChild(i.parent,"paragraph")&&!t.isObject(i)}class Ai extends I{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,n=t.attributes;let o=t.position;e.canEditAt(o)&&e.change(s=>{if(o=this._findPositionToInsertParagraph(o,s),!o)return;const l=s.createElement("paragraph");n&&e.schema.setAllowedAttributes(l,n,s),e.insertContent(l,o),s.setSelection(l,"in")})}_findPositionToInsertParagraph(t,e){const n=this.editor.model;if(n.schema.checkChild(t,"paragraph"))return t;const o=n.schema.findAllowedParent(t,"paragraph");if(!o)return null;const s=t.parent,l=n.schema.checkChild(s,"$text");return s.isEmpty||l&&t.isAtEnd?n.createPositionAfter(s):!s.isEmpty&&l&&t.isAtStart?n.createPositionBefore(s):e.split(t,o).position}}const Ce=class Ce extends _{static get pluginName(){return"Paragraph"}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new Si(t)),t.commands.add("insertParagraph",new Ai(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(n,{writer:o})=>!Ce.paragraphLikeElements.has(n.name)||n.isEmpty?null:o.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};g(Ce,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let pe=Ce;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ri extends I{constructor(e,n){super(e);g(this,"modelElements");this.modelElements=n}refresh(){const e=q(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(n=>ht(e,n,this.editor.model.schema))}execute(e){const n=this.editor.model,o=n.document,s=e.value;n.change(l=>{const a=Array.from(o.selection.getSelectedBlocks()).filter(r=>ht(r,s,n.schema));for(const r of a)r.is("element",s)||l.rename(r,s)})}}function ht(i,t,e){return e.checkChild(i.parent,t)&&!e.isObject(i)}const gt="paragraph";class Ei extends _{static get pluginName(){return"HeadingEditing"}constructor(t){super(t),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[pe]}init(){const t=this.editor,e=t.config.get("heading.options"),n=[];for(const o of e)o.model!=="paragraph"&&(t.model.schema.register(o.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(o),n.push(o.model));this._addDefaultH1Conversion(t),t.commands.add("heading",new Ri(t,n))}afterInit(){const t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(o,s)=>{const l=t.model.document.selection.getFirstPosition().parent;n.some(r=>l.is("element",r.model))&&!l.is("element",gt)&&l.childCount===0&&s.writer.rename(l,gt)})}_addDefaultH1Conversion(t){t.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Eo.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vi(i){const t=i.t,e={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return i.config.get("heading.options").map(n=>{const o=e[n.title];return o&&o!=n.title&&(n.title=o),n})}class Bi extends _{static get pluginName(){return"HeadingUI"}init(){const t=this.editor,e=t.t,n=Vi(t),o=e("Choose heading"),s=e("Heading");t.ui.componentFactory.add("heading",l=>{const a={},r=new re,c=t.commands.get("heading"),d=t.commands.get("paragraph"),u=[c];for(const h of n){const f={type:"button",model:new ye({label:h.title,class:h.class,role:"menuitemradio",withText:!0})};h.model==="paragraph"?(f.model.bind("isOn").to(d,"value"),f.model.set("commandName","paragraph"),u.push(d)):(f.model.bind("isOn").to(c,"value",p=>p===h.model),f.model.set({commandName:"heading",commandValue:h.model})),r.add(f),a[h.model]=h.title}const m=W(l);return _e(m,r,{ariaLabel:s,role:"menu"}),m.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),m.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),m.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),m.buttonView.bind("label").to(c,"value",d,"value",(h,f)=>{const p=f?"paragraph":h;return typeof p=="boolean"||!a[p]?o:a[p]}),m.buttonView.bind("ariaLabel").to(c,"value",d,"value",(h,f)=>{const p=f?"paragraph":h;return typeof p=="boolean"||!a[p]?s:`${a[p]}, ${s}`}),this.listenTo(m,"execute",h=>{const{commandName:f,commandValue:p}=h.source;t.execute(f,p?{value:p}:void 0),t.editing.view.focus()}),m}),t.ui.componentFactory.add("menuBar:heading",l=>{const a=new oe(l),r=t.commands.get("heading"),c=t.commands.get("paragraph"),d=[r],u=new ve(l);a.set({class:"ck-heading-dropdown"}),u.set({ariaLabel:e("Heading"),role:"menu"}),a.buttonView.set({label:e("Heading")}),a.panelView.children.add(u);for(const m of n){const h=new ke(l,a),f=new D(l);h.children.add(f),u.items.add(h),f.set({isToggleable:!0,label:m.title,role:"menuitemradio",class:m.class}),f.delegate("execute").to(a),f.on("execute",()=>{const p=m.model==="paragraph"?"paragraph":"heading";t.execute(p,{value:m.model}),t.editing.view.focus()}),m.model==="paragraph"?(f.bind("isOn").to(c,"value"),d.push(c)):f.bind("isOn").to(r,"value",p=>p===m.model)}return a.bind("isEnabled").toMany(d,"isEnabled",(...m)=>m.some(h=>h)),a})}}class Li extends _{static get requires(){return[Ei,Bi]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fi(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function ft(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function cn(i,t){const e=i.plugins.get("ImageUtils"),n=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return s=>e.isInlineImageView(s)?n&&(s.getStyle("display")=="block"||s.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==t?null:o(s):null;function o(s){const l={name:!0};return s.hasAttribute("src")&&(l.attributes=["src"]),l}}function Xe(i,t){const e=q(t.getSelectedBlocks());return!e||i.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function be(i){return i&&i.endsWith("px")?parseInt(i):null}function pt(i){const t=be(i.getStyle("width")),e=be(i.getStyle("height"));return!!(t&&e)}const Pi=/^(image|image-inline)$/;class j extends _{constructor(){super(...arguments);g(this,"_domEmitter",new(Vo()))}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},n=null,o=null,s={}){const l=this.editor,a=l.model,r=a.document.selection,c=dn(l,n||r,o);e={...Object.fromEntries(r.getAttributes()),...e};for(const d in e)a.schema.checkAttribute(c,d)||delete e[d];return a.change(d=>{const{setImageSizes:u=!0}=s,m=d.createElement(c,e);return a.insertObject(m,n,null,{setSelection:"on",findOptimalPosition:!n&&c!="imageInline"?"auto":void 0}),m.parent?(u&&this.setImageNaturalSizeAttributes(m),m):null})}setImageNaturalSizeAttributes(e){const n=e.getAttribute("src");n&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(o=>{const s=new Bo.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(o.batch,l=>{l.setAttribute("width",s.naturalWidth,e),l.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=n}))}getClosestSelectedImageWidget(e){const n=e.getFirstPosition();if(!n)return null;const o=e.getSelectedElement();if(o&&this.isImageWidget(o))return o;let s=n.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const n=e.getSelectedElement();return this.isImage(n)?n:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:Pi})}isImageAllowed(){const n=this.editor.model.document.selection;return Ui(this.editor,n)&&Hi(n)}toImageWidget(e,n,o){return n.setCustomProperty("image",!0,e),Mt(e,n,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${o}`:o}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Je(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const n=this.editor.editing.view;for(const{item:o}of n.createRangeIn(e))if(this.isInlineImageView(o))return o}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function Ui(i,t){if(dn(i,t,null)=="imageBlock"){const n=Oi(t,i.model);if(i.model.schema.checkChild(n,"imageBlock"))return!0}else if(i.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function Hi(i){return[...i.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function Oi(i,t){const n=Lo(i,t).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function dn(i,t,e){const n=i.model.schema,o=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?e||(o==="inline"?"imageInline":o!=="auto"?"imageBlock":t.is("selection")?Xe(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class Mi extends I{refresh(){const n=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!n,this.isEnabled&&n.hasAttribute("alt")?this.value=n.getAttribute("alt"):this.value=!1}execute(t){const e=this.editor,n=e.plugins.get("ImageUtils"),o=e.model,s=n.getClosestSelectedImageElement(o.document.selection);o.change(l=>{l.setAttribute("alt",t.newValue,s)})}}class Ni extends _{static get requires(){return[j]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Mi(this.editor))}}class Di extends ne{constructor(e){super(e);g(this,"focusTracker");g(this,"keystrokes");g(this,"labeledInput");g(this,"saveButtonView");g(this,"cancelButtonView");g(this,"_focusables");g(this,"_focusCycler");const n=this.locale.t;this.focusTracker=new ce,this.keystrokes=new de,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(n("Save"),F.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),F.cancel,"ck-button-cancel","cancel"),this._focusables=new Te,this._focusCycler=new xe({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Ye({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,n,o,s){const l=new H(this.locale);return l.set({label:e,icon:n,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}_createLabeledInputView(){const e=this.locale.t,n=new zt(this.locale,Wt);return n.label=e("Text alternative"),n}}function zi(i){const t=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const n=un(i);t.updatePosition(n)}}function un(i){const t=i.editing.view,e=Ho.defaultPositions,n=i.plugins.get("ImageUtils");return{target:t.domConverter.mapViewToDom(n.getClosestSelectedImageWidget(t.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class Wi extends _{constructor(){super(...arguments);g(this,"_balloon");g(this,"_form")}static get requires(){return[Fe]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,n=e.t;e.ui.componentFactory.add("imageTextAlternative",o=>{const s=e.commands.get("imageTextAlternative"),l=new H(o);return l.set({label:n("Change image text alternative"),icon:F.textAlternative,tooltip:!0}),l.bind("isEnabled").to(s,"isEnabled"),l.bind("isOn").to(s,"value",a=>!!a),this.listenTo(l,"execute",()=>{this._showForm()}),l})}_createForm(){const e=this.editor,o=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Nt(Di))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(l,a)=>{this._hideForm(!0),a()}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(o.selection)?this._isVisible&&zi(e):this._hideForm(!0)}),Dt({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,n=e.commands.get("imageTextAlternative"),o=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:un(e)}),o.fieldView.value=o.fieldView.element.value=n.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class mn extends _{static get requires(){return[Ni,Wi]}static get pluginName(){return"ImageTextAlternative"}}function Ki(i){const t=(e,n,o)=>{if(!o.consumable.test(n.viewItem,{name:!0,classes:"image"}))return;const s=i.findViewImgElement(n.viewItem);if(!s||!o.consumable.test(s,{name:!0}))return;o.consumable.consume(n.viewItem,{name:!0,classes:"image"});const l=o.convertItem(s,n.modelCursor),a=q(l.modelRange.getItems());if(!a){o.consumable.revert(n.viewItem,{name:!0,classes:"image"});return}o.convertChildren(n.viewItem,a),o.updateConversionResult(a,n)};return e=>{e.on("element:figure",t)}}function hn(i,t){const e=(n,o,s)=>{if(!s.consumable.consume(o.item,n.name))return;const l=s.writer,a=s.mapper.toViewElement(o.item),r=i.findViewImgElement(a);o.attributeNewValue===null?(l.removeAttribute("srcset",r),l.removeAttribute("sizes",r)):o.attributeNewValue&&(l.setAttribute("srcset",o.attributeNewValue,r),l.setAttribute("sizes","100vw",r))};return n=>{n.on(`attribute:srcset:${t}`,e)}}function we(i,t,e){const n=(o,s,l)=>{if(!l.consumable.consume(s.item,o.name))return;const a=l.writer,r=l.mapper.toViewElement(s.item),c=i.findViewImgElement(r);a.setAttribute(s.attributeKey,s.attributeNewValue||"",c)};return o=>{o.on(`attribute:${e}:${t}`,n)}}class gn extends Po{observe(t){this.listenTo(t,"load",(e,n)=>{const o=n.target;this.checkShouldIgnoreEventFromTarget(o)||o.tagName=="IMG"&&this._fireEvents(n)},{useCapture:!0})}stopObserving(t){this.stopListening(t)}_fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t))}}class qi extends I{constructor(t){super(t);const e=t.config.get("image.insert.type");t.plugins.has("ImageBlockEditing")||e==="block"&&te("image-block-plugin-required"),t.plugins.has("ImageInlineEditing")||e==="inline"&&te("image-inline-plugin-required")}refresh(){const t=this.editor.plugins.get("ImageUtils");this.isEnabled=t.isImageAllowed()}execute(t){const e=Uo(t.source),n=this.editor.model.document.selection,o=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(n.getAttributes());e.forEach((l,a)=>{const r=n.getSelectedElement();if(typeof l=="string"&&(l={src:l}),a&&r&&o.isImage(r)){const c=this.editor.model.createPositionAfter(r);o.insertImage({...l,...s},c)}else o.insertImage({...l,...s})})}}class ji extends I{constructor(t){super(t),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),n=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(n),this.value=this.isEnabled?n.getAttribute("src"):null}execute(t){const e=this.editor.model.document.selection.getSelectedElement(),n=this.editor.plugins.get("ImageUtils");this.editor.model.change(o=>{o.setAttribute("src",t.source,e),this.cleanupImage(o,e),n.setImageNaturalSizeAttributes(e)})}cleanupImage(t,e){t.removeAttribute("srcset",e),t.removeAttribute("sizes",e),t.removeAttribute("sources",e),t.removeAttribute("width",e),t.removeAttribute("height",e),t.removeAttribute("alt",e)}}class fn extends _{static get requires(){return[j]}static get pluginName(){return"ImageEditing"}init(){const t=this.editor,e=t.conversion;t.editing.view.addObserver(gn),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const n=new qi(t),o=new ji(t);t.commands.add("insertImage",n),t.commands.add("replaceImageSource",o),t.commands.add("imageInsert",n)}}class pn extends _{static get requires(){return[j]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(t){const e=this.editor,n=e.plugins.get("ImageUtils"),o=t==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:o,styles:{width:/.+/}},model:{key:"width",value:l=>pt(l)?be(l.getStyle("width")):null}}).attributeToAttribute({view:{name:o,key:"width"},model:"width"}).attributeToAttribute({view:{name:o,styles:{height:/.+/}},model:{key:"height",value:l=>pt(l)?be(l.getStyle("height")):null}}).attributeToAttribute({view:{name:o,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(l=>{s(l,"width","width",!0),s(l,"height","height",!0)}),e.conversion.for("dataDowncast").add(l=>{s(l,"width","width",!1),s(l,"height","height",!1)});function s(l,a,r,c){l.on(`attribute:${a}:${t}`,(d,u,m)=>{if(!m.consumable.consume(u.item,d.name))return;const h=m.writer,f=m.mapper.toViewElement(u.item),p=n.findViewImgElement(f);if(u.attributeNewValue!==null?h.setAttribute(r,u.attributeNewValue,p):h.removeAttribute(r,p),u.item.hasAttribute("sources"))return;const C=u.item.hasAttribute("resizedWidth");if(t==="imageInline"&&!C&&!c)return;const w=u.item.getAttribute("width"),v=u.item.getAttribute("height");w&&v&&h.setStyle("aspect-ratio",`${w}/${v}`,p)})}}}class bn extends I{constructor(e,n){super(e);g(this,"_modelElementName");this._modelElementName=n}refresh(){const n=this.editor.plugins.get("ImageUtils"),o=n.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=n.isInlineImage(o):this.isEnabled=n.isBlockImage(o)}execute(e={}){const n=this.editor,o=this.editor.model,s=n.plugins.get("ImageUtils"),l=s.getClosestSelectedImageElement(o.document.selection),a=Object.fromEntries(l.getAttributes());return!a.src&&!a.uploadId?null:o.change(r=>{const{setImageSizes:c=!0}=e,d=Array.from(o.markers).filter(h=>h.getRange().containsItem(l)),u=s.insertImage(a,o.createSelection(l,"on"),this._modelElementName,{setImageSizes:c});if(!u)return null;const m=r.createRangeOn(u);for(const h of d){const f=h.getRange(),p=f.root.rootName!="$graveyard"?f.getJoined(m,!0):m;r.updateMarker(h,{range:p})}return{oldElement:l,newElement:u}})}}class wn extends _{static get requires(){return[j]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const t=this.editor.model.schema;t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["placeholder"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const t=this.editor,e=t.conversion,n=t.plugins.get("ImageUtils");e.for("editingDowncast").add(o=>{o.on("attribute:placeholder",(s,l,a)=>{if(!a.consumable.test(l.item,s.name)||!l.item.is("element","imageBlock")&&!l.item.is("element","imageInline"))return;a.consumable.consume(l.item,s.name);const r=a.writer,c=a.mapper.toViewElement(l.item),d=n.findViewImgElement(c);l.attributeNewValue?(r.addClass("image_placeholder",d),r.setStyle("background-image",`url(${l.attributeNewValue})`,d),r.setCustomProperty("editingPipeline:doNotReuseOnce",!0,d)):(r.removeClass("image_placeholder",d),r.removeStyle("background-image",d))})})}_setupLoadListener(){const t=this.editor,e=t.model,n=t.editing,o=n.view,s=t.plugins.get("ImageUtils");o.addObserver(gn),this.listenTo(o.document,"imageLoaded",(l,a)=>{const r=o.domConverter.mapDomToView(a.target);if(!r)return;const c=s.getImageWidgetFromImageView(r);if(!c)return;const d=n.mapper.toModelElement(c);!d||!d.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},u=>{u.removeAttribute("placeholder",d)})})}}class Gi extends _{static get requires(){return[fn,pn,j,wn,Ie]}static get pluginName(){return"ImageBlockEditing"}init(){const t=this.editor;t.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),t.plugins.has("ImageInlineEditing")&&(t.commands.add("imageTypeBlock",new bn(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,o=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:l})=>ft(l)}),n.for("editingDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:l})=>o.toImageWidget(ft(l),l,e("image widget"))}),n.for("downcast").add(we(o,"imageBlock","src")).add(we(o,"imageBlock","alt")).add(hn(o,"imageBlock")),n.for("upcast").elementToElement({view:cn(t,"imageBlock"),model:(s,{writer:l})=>l.createElement("imageBlock",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)}).add(Ki(o))}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,o=t.plugins.get("ImageUtils"),s=t.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(l,a)=>{const r=Array.from(a.content.getChildren());let c;if(!r.every(o.isInlineImageView))return;a.targetRanges?c=t.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const d=e.createSelection(c);if(Xe(e.schema,d)==="imageBlock"){const u=new Ht(n.document),m=r.map(h=>u.createElement("figure",{class:"image"},h));a.content=u.createDocumentFragment(m)}}),this.listenTo(s,"contentInsertion",(l,a)=>{a.method==="paste"&&e.change(r=>{const c=r.createRangeIn(a.content);for(const d of c.getItems())d.is("element","imageBlock")&&o.setImageNaturalSizeAttributes(d)})})}}class Ji extends ne{constructor(e,n=[]){super(e);g(this,"focusTracker");g(this,"keystrokes");g(this,"_focusables");g(this,"_focusCycler");g(this,"children");this.focusTracker=new ce,this.keystrokes=new de,this._focusables=new Te,this.children=this.createCollection(),this._focusCycler=new xe({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const o of n)this.children.add(o),this._focusables.add(o),o instanceof Fo&&this._focusables.addMany(o.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Ye({view:this});for(const n of this._focusables)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class Cn extends _{constructor(e){super(e);g(this,"dropdownView");g(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get requires(){return[j]}init(){const e=this.editor,n=e.model.document.selection,o=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=o.isImage(n.getSelectedElement())});const s=a=>this._createToolbarComponent(a),l=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",s),e.ui.componentFactory.add("imageInsert",s),e.ui.componentFactory.add("menuBar:insertImage",l)}registerIntegration({name:e,observable:n,buttonViewCreator:o,formViewCreator:s,menuBarButtonViewCreator:l,requiresForm:a=!1}){this._integrations.has(e)&&te("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:n,buttonViewCreator:o,menuBarButtonViewCreator:l,formViewCreator:s,requiresForm:a})}_createToolbarComponent(e){const n=this.editor,o=e.t,s=this._prepareIntegrations();if(!s.length)return null;let l;const a=s[0];if(s.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);l=a.buttonViewCreator(!0)}else{const d=a.buttonViewCreator(!1);l=new Ot(e,d),l.tooltip=!0,l.bind("label").to(this,"isImageSelected",u=>o(u?"Replace image":"Insert image"))}const r=this.dropdownView=W(e,l),c=s.map(({observable:d})=>typeof d=="function"?d():d);return r.bind("isEnabled").toMany(c,"isEnabled",(...d)=>d.some(u=>u)),r.once("change:isOpen",()=>{const d=s.map(({formViewCreator:m})=>m(s.length==1)),u=new Ji(n.locale,d);r.panelView.children.add(u)}),r}_createMenuBarComponent(e){const n=e.t,o=this._prepareIntegrations();if(!o.length)return null;let s;const l=o[0];if(o.length==1)s=l.menuBarButtonViewCreator(!0);else{s=new oe(e);const a=new ve(e);s.panelView.children.add(a),s.buttonView.set({icon:F.image,label:n("Image")});for(const r of o){const c=new ke(e,s),d=r.menuBarButtonViewCreator(!1);c.children.add(d),a.items.add(c)}}return s}_prepareIntegrations(){const n=this.editor.config.get("image.insert.integrations"),o=[];if(!n.length)return te("image-insert-integrations-not-specified"),o;for(const s of n){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||te("image-insert-unknown-integration",{item:s});continue}o.push(this._integrations.get(s))}return o.length||te("image-insert-integrations-not-registered"),o}}class Yi extends _{static get requires(){return[Gi,Ge,mn,Cn]}static get pluginName(){return"ImageBlock"}}class Zi extends _{static get requires(){return[fn,pn,j,wn,Ie]}static get pluginName(){return"ImageInlineEditing"}init(){const t=this.editor;t.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),t.plugins.has("ImageBlockEditing")&&(t.commands.add("imageTypeInline",new bn(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const t=this.editor,e=t.t,n=t.conversion,o=t.plugins.get("ImageUtils");n.for("dataDowncast").elementToElement({model:"imageInline",view:(s,{writer:l})=>l.createEmptyElement("img")}),n.for("editingDowncast").elementToStructure({model:"imageInline",view:(s,{writer:l})=>o.toImageWidget(Fi(l),l,e("image widget"))}),n.for("downcast").add(we(o,"imageInline","src")).add(we(o,"imageInline","alt")).add(hn(o,"imageInline")),n.for("upcast").elementToElement({view:cn(t,"imageInline"),model:(s,{writer:l})=>l.createElement("imageInline",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const t=this.editor,e=t.model,n=t.editing.view,o=t.plugins.get("ImageUtils"),s=t.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(l,a)=>{const r=Array.from(a.content.getChildren());let c;if(!r.every(o.isBlockImageView))return;a.targetRanges?c=t.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const d=e.createSelection(c);if(Xe(e.schema,d)==="imageInline"){const u=new Ht(n.document),m=r.map(h=>h.childCount===1?(Array.from(h.getAttributes()).forEach(f=>u.setAttribute(...f,o.findViewImgElement(h))),h.getChild(0)):h);a.content=u.createDocumentFragment(m)}}),this.listenTo(s,"contentInsertion",(l,a)=>{a.method==="paste"&&e.change(r=>{const c=r.createRangeIn(a.content);for(const d of c.getItems())d.is("element","imageInline")&&o.setImageNaturalSizeAttributes(d)})})}}class $i extends _{static get requires(){return[Zi,Ge,mn,Cn]}static get pluginName(){return"ImageInline"}}class Xi extends _{static get requires(){return[Yi,$i]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qi{constructor(){g(this,"_definitions",new Set)}get length(){return this._definitions.size}add(t){Array.isArray(t)?t.forEach(e=>this._definitions.add(e)):this._definitions.add(t)}getDispatcher(){return t=>{t.on("attribute:linkHref",(e,n,o)=>{if(!o.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||o.schema.isInline(n.item)))return;const s=o.writer,l=s.document.selection;for(const a of this._definitions){const r=s.createAttributeElement("a",a.attributes,{priority:5});a.classes&&s.addClass(a.classes,r);for(const c in a.styles)s.setStyle(c,a.styles[c],r);s.setCustomProperty("link",!0,r),a.callback(n.attributeNewValue)?n.item.is("selection")?s.wrap(l.getFirstRange(),r):s.wrap(o.mapper.toViewRange(n.range),r):s.unwrap(o.mapper.toViewRange(n.range),r)}},{priority:"high"})}}getDispatcherForLinkedImage(){return t=>{t.on("attribute:linkHref:imageBlock",(e,n,{writer:o,mapper:s})=>{const l=s.toViewElement(n.item),a=Array.from(l.getChildren()).find(r=>r.is("element","a"));for(const r of this._definitions){const c=Kt(r.attributes);if(r.callback(n.attributeNewValue)){for(const[d,u]of c)d==="class"?o.addClass(u,a):o.setAttribute(d,u,a);r.classes&&o.addClass(r.classes,a);for(const d in r.styles)o.setStyle(d,r.styles[d],a)}else{for(const[d,u]of c)d==="class"?o.removeClass(u,a):o.removeAttribute(d,a);r.classes&&o.removeClass(r.classes,a);for(const d in r.styles)o.removeStyle(d,a)}}})}}}const el=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,tl="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",nl=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,ol=/^((\w+:(\/{2,})?)|(\W))/i,sl=["https?","ftps?","mailto"],he="Ctrl+K";function il(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function bt(i,{writer:t}){const e=t.createAttributeElement("a",{href:i},{priority:5});return t.setCustomProperty("link",!0,e),e}function _n(i,t=sl){const e=String(i),n=t.join("|"),o=new RegExp(`${tl.replace("<protocols>",n)}`,"i");return ll(e,o)?e:"#"}function ll(i,t){return!!i.replace(el,"").match(t)}function al(i,t){const e={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return t.forEach(n=>("label"in n&&e[n.label]&&(n.label=e[n.label]),n)),t}function rl(i){const t=[];if(i)for(const[e,n]of Object.entries(i)){const o=Object.assign({},n,{id:`link${Ts(e)}`});t.push(o)}return t}function Oe(i,t){return i?t.checkAttribute(i.name,"linkHref"):!1}function cl(i){return nl.test(i)}function Qe(i,t){const e=cl(i)?"mailto:":t,n=!!e&&!vn(i);return i&&n?e+i:i}function vn(i){return ol.test(i)}function wt(i){window.open(i,"_blank","noopener")}class dl extends I{constructor(){super(...arguments);g(this,"manualDecorators",new re);g(this,"automaticDecorators",new Qi)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,n=e.document.selection,o=n.getSelectedElement()||q(n.getSelectedBlocks());Oe(o,e.schema)?(this.value=o.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(o,"linkHref")):(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,n={}){const o=this.editor.model,s=o.document.selection,l=[],a=[];for(const r in n)n[r]?l.push(r):a.push(r);o.change(r=>{if(s.isCollapsed){const c=s.getFirstPosition();if(s.hasAttribute("linkHref")){const d=Ct(s);let u=Ze(c,"linkHref",s.getAttribute("linkHref"),o);s.getAttribute("linkHref")===d&&(u=this._updateLinkContent(o,r,u,e)),r.setAttribute("linkHref",e,u),l.forEach(m=>{r.setAttribute(m,!0,u)}),a.forEach(m=>{r.removeAttribute(m,u)}),r.setSelection(r.createPositionAfter(u.end.nodeBefore))}else if(e!==""){const d=Kt(s.getAttributes());d.set("linkHref",e),l.forEach(m=>{d.set(m,!0)});const{end:u}=o.insertContent(r.createText(e,d),c);r.setSelection(u)}["linkHref",...l,...a].forEach(d=>{r.removeSelectionAttribute(d)})}else{const c=o.schema.getValidRanges(s.getRanges(),"linkHref"),d=[];for(const m of s.getSelectedBlocks())o.schema.checkAttribute(m,"linkHref")&&d.push(r.createRangeOn(m));const u=d.slice();for(const m of c)this._isRangeToUpdate(m,d)&&u.push(m);for(const m of u){let h=m;if(u.length===1){const f=Ct(s);s.getAttribute("linkHref")===f&&(h=this._updateLinkContent(o,r,m,e),r.setSelection(r.createSelection(h)))}r.setAttribute("linkHref",e,h),l.forEach(f=>{r.setAttribute(f,!0,h)}),a.forEach(f=>{r.removeAttribute(f,h)})}}})}_getDecoratorStateFromModel(e){const n=this.editor.model,o=n.document.selection,s=o.getSelectedElement();return Oe(s,n.schema)?s.getAttribute(e):o.getAttribute(e)}_isRangeToUpdate(e,n){for(const o of n)if(o.containsRange(e))return!1;return!0}_updateLinkContent(e,n,o,s){const l=n.createText(s,{linkHref:s});return e.insertContent(l,o)}}function Ct(i){if(i.isCollapsed){const t=i.getFirstPosition();return t.textNode&&t.textNode.data}else{const t=Array.from(i.getFirstRange().getItems());if(t.length>1)return null;const e=t[0];return e.is("$text")||e.is("$textProxy")?e.data:null}}class ul extends I{refresh(){const t=this.editor.model,e=t.document.selection,n=e.getSelectedElement();Oe(n,t.schema)?this.isEnabled=t.schema.checkAttribute(n,"linkHref"):this.isEnabled=t.schema.checkAttributeInSelection(e,"linkHref")}execute(){const t=this.editor,e=this.editor.model,n=e.document.selection,o=t.commands.get("link");e.change(s=>{const l=n.isCollapsed?[Ze(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),e)]:e.schema.getValidRanges(n.getRanges(),"linkHref");for(const a of l)if(s.removeAttribute("linkHref",a),o)for(const r of o.manualDecorators)s.removeAttribute(r.id,a)})}}class ml extends jo(){constructor({id:e,label:n,attributes:o,classes:s,styles:l,defaultValue:a}){super();g(this,"id");g(this,"defaultValue");g(this,"label");g(this,"attributes");g(this,"classes");g(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=n,this.attributes=o,this.classes=s,this.styles=l}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const hl="ck-link_selected",_t="automatic",gl="manual",fl=/^(https?:)?\/\//;class kn extends _{static get pluginName(){return"LinkEditing"}static get requires(){return[it,Oo,Ie]}constructor(t){super(t),t.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const t=this.editor,e=this.editor.config.get("link.allowedProtocols");t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:bt}),t.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(s,l)=>bt(_n(s,e),l)}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:s=>s.getAttribute("href")}}),t.commands.add("link",new dl(t)),t.commands.add("unlink",new ul(t));const n=al(t.t,rl(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(s=>s.mode===_t)),this._enableManualDecorators(n.filter(s=>s.mode===gl)),t.plugins.get(it).registerAttribute("linkHref"),Mo(t,"linkHref","a",hl),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(t){const e=this.editor,o=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&o.add({id:"linkIsExternal",mode:_t,callback:s=>!!s&&fl.test(s),attributes:{target:"_blank",rel:"noopener noreferrer"}}),o.add(t),o.length&&e.conversion.for("downcast").add(o.getDispatcher())}_enableManualDecorators(t){if(!t.length)return;const e=this.editor,o=e.commands.get("link").manualDecorators;t.forEach(s=>{e.model.schema.extend("$text",{allowAttributes:s.id});const l=new ml(s);o.add(l),e.conversion.for("downcast").attributeToElement({model:l.id,view:(a,{writer:r,schema:c},{item:d})=>{if((d.is("selection")||c.isInline(d))&&a){const u=r.createAttributeElement("a",l.attributes,{priority:5});l.classes&&r.addClass(l.classes,u);for(const m in l.styles)r.setStyle(m,l.styles[m],u);return r.setCustomProperty("link",!0,u),u}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...l._createPattern()},model:{key:l.id}})})}_enableLinkOpen(){const t=this.editor,n=t.editing.view.document;this.listenTo(n,"click",(o,s)=>{if(!(No.isMac?s.domEvent.metaKey:s.domEvent.ctrlKey))return;let a=s.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const r=a.getAttribute("href");r&&(o.stop(),s.preventDefault(),wt(r))},{context:"$capture"}),this.listenTo(n,"keydown",(o,s)=>{const a=t.commands.get("link").value;a&&s.keyCode===Do.enter&&s.altKey&&(o.stop(),wt(a))})}_enableSelectionAttributesFixer(){const e=this.editor.model,n=e.document.selection;this.listenTo(n,"change:attribute",(o,{attributeKeys:s})=>{!s.includes("linkHref")||n.hasAttribute("linkHref")||e.change(l=>{pl(l,bl(e.schema))})})}_enableClipboardIntegration(){const t=this.editor,e=t.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(t.plugins.get("ClipboardPipeline"),"contentInsertion",(o,s)=>{e.change(l=>{const a=l.createRangeIn(s.content);for(const r of a.getItems())if(r.hasAttribute("linkHref")){const c=Qe(r.getAttribute("linkHref"),n);l.setAttribute("linkHref",c,r)}})})}}function pl(i,t){i.removeSelectionAttribute("linkHref");for(const e of t)i.removeSelectionAttribute(e)}function bl(i){return i.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class wl extends ne{constructor(e,n,o){super(e);g(this,"focusTracker",new ce);g(this,"keystrokes",new de);g(this,"urlInputView");g(this,"saveButtonView");g(this,"cancelButtonView");g(this,"_manualDecoratorSwitches");g(this,"children");g(this,"_validators");g(this,"_focusables",new Te);g(this,"_focusCycler");const s=e.t;this._validators=o,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(s("Save"),F.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(s("Cancel"),F.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(n),this.children=this._createFormChildren(n.manualDecorators),this._focusCycler=new xe({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const l=["ck","ck-link-form","ck-responsive-form"];n.manualDecorators.length&&l.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:l,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,n)=>(e[n.name]=n.isOn,e),{})}render(){super.render(),Ye({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const n=e(this);if(n)return this.urlInputView.errorText=n,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,n=new zt(this.locale,Wt);return n.fieldView.inputMode="url",n.label=e("Link URL"),n}_createButton(e,n,o,s){const l=new H(this.locale);return l.set({label:e,icon:n,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}_createManualDecoratorSwitches(e){const n=this.createCollection();for(const o of e.manualDecorators){const s=new qt(this.locale);s.set({name:o.id,label:o.label,withText:!0}),s.bind("isOn").toMany([o,e],"value",(l,a)=>a===void 0&&l===void 0?!!o.defaultValue:!!l),s.on("execute",()=>{o.set("value",!s.isOn)}),n.add(s)}return n}_createFormChildren(e){const n=this.createCollection();if(n.add(this.urlInputView),e.length){const o=new ne;o.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(s=>({tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),n.add(o)}return n.add(this.saveButtonView),n.add(this.cancelButtonView),n}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}var Cl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class _l extends ne{constructor(e,n={}){super(e);g(this,"focusTracker",new ce);g(this,"keystrokes",new de);g(this,"previewButtonView");g(this,"unlinkButtonView");g(this,"editButtonView");g(this,"_focusables",new Te);g(this,"_focusCycler");g(this,"_linkConfig");const o=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(o("Unlink"),Cl,"unlink"),this.editButtonView=this._createButton(o("Edit link"),F.pencil,"edit"),this.set("href",void 0),this._linkConfig=n,this._focusCycler=new xe({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,n,o){const s=new H(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s.delegate("execute").to(this,o),s}_createPreviewButton(){const e=new H(this.locale),n=this.bindTemplate,o=this.t;return e.set({withText:!0,tooltip:o("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:n.to("href",s=>s&&_n(s,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",s=>s||o("This link has no URL")),e.bind("isEnabled").to(this,"href",s=>!!s),e.template.tag="a",e.template.eventListeners={},e}}var vl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const O="link-ui";class kl extends _{constructor(){super(...arguments);g(this,"actionsView",null);g(this,"formView",null);g(this,"_balloon")}static get requires(){return[Fe]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,n=this.editor.t;e.editing.view.addObserver(zo),this._balloon=e.plugins.get(Fe),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:O,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:O,view:(o,{writer:s})=>{if(!o.markerRange.isCollapsed)return null;const l=s.createUIElement("span");return s.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],l),l}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Create link"),keystroke:he},{label:n("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,n=new _l(e.locale,e.config.get("link")),o=e.commands.get("link"),s=e.commands.get("unlink");return n.bind("href").to(o,"value"),n.editButtonView.bind("isEnabled").to(o),n.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(n,"edit",()=>{this._addFormView()}),this.listenTo(n,"unlink",()=>{e.execute("unlink"),this._hideUI()}),n.keystrokes.set("Esc",(l,a)=>{this._hideUI(),a()}),n.keystrokes.set(he,(l,a)=>{this._addFormView(),a()}),n}_createFormView(){const e=this.editor,n=e.commands.get("link"),o=e.config.get("link.defaultProtocol"),s=new(Nt(wl))(e.locale,n,yl(e));return s.urlInputView.fieldView.bind("value").to(n,"value"),s.urlInputView.bind("isEnabled").to(n,"isEnabled"),s.saveButtonView.bind("isEnabled").to(n,"isEnabled"),this.listenTo(s,"submit",()=>{if(s.isValid()){const{value:l}=s.urlInputView.fieldView.element,a=Qe(l,o);e.execute("link",a,s.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(s.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(s,"cancel",()=>{this._closeFormView()}),s.keystrokes.set("Esc",(l,a)=>{this._closeFormView(),a()}),s}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const n=this._createButton(H);return n.set({tooltip:!0}),n}),e.ui.componentFactory.add("menuBar:link",()=>{const n=this._createButton(D);return n.set({role:"menuitemcheckbox"}),n})}_createButton(e){const n=this.editor,o=n.locale,s=n.commands.get("link"),l=new e(n.locale),a=o.t;return l.set({label:a("Link"),icon:vl,keystroke:he,isToggleable:!0}),l.bind("isEnabled").to(s,"isEnabled"),l.bind("isOn").to(s,"value",r=>!!r),this.listenTo(l,"execute",()=>this._showUI(!0)),l}_enableBalloonActivators(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(he,(o,s)=>{s(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,n)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,n)=>{this._isUIVisible&&(this._hideUI(),n())}),Dt({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const n=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=n.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,n=e.editing.view.document;let o=this._getSelectedLinkElement(),s=a();const l=()=>{const r=this._getSelectedLinkElement(),c=a();o&&!r||!o&&c!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),o=r,s=c};function a(){return n.selection.focus.getAncestors().reverse().find(r=>r.is("element"))}this.listenTo(e.ui,"update",l),this.listenTo(this._balloon,"change:visibleView",l)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,n=this.editor.model,o=e.document;let s;if(n.markers.has(O)){const l=Array.from(this.editor.editing.mapper.markerNameToElements(O)),a=e.createRange(e.createPositionBefore(l[0]),e.createPositionAfter(l[l.length-1]));s=e.domConverter.viewRangeToDom(a)}else s=()=>{const l=this._getSelectedLinkElement();return l?e.domConverter.mapViewToDom(l):e.domConverter.viewRangeToDom(o.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,n=e.document.selection,o=n.getSelectedElement();if(n.isCollapsed||o&&Je(o))return Be(n.getFirstPosition());{const s=n.getFirstRange().getTrimmed(),l=Be(s.start),a=Be(s.end);return!l||l!=a?null:e.createRangeIn(l).getTrimmed().isEqual(s)?l:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(n=>{const o=e.document.selection.getFirstRange();if(e.markers.has(O))n.updateMarker(O,{range:o});else if(o.start.isAtEnd){const s=o.start.getLastMatchingPosition(({item:l})=>!e.schema.isContent(l),{boundaries:o});n.addMarker(O,{usingOperation:!1,affectsData:!1,range:n.createRange(s,o.end)})}else n.addMarker(O,{usingOperation:!1,affectsData:!1,range:o})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(O)&&e.change(n=>{n.removeMarker(O)})}}function Be(i){return i.getAncestors().find(t=>il(t))||null}function yl(i){const t=i.t,e=i.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!e&&!n.url.length)return t("Link URL must not be empty.")}]}const Il=4,yn=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Tl=2;class xl extends _{static get requires(){return[Wo,kn]}static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(t,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?Ze(e,"linkHref",e.textNode.getAttribute("linkHref"),t):null}_selectEntireLinks(t,e){const o=this.editor.model,s=o.document.selection,l=s.getFirstPosition(),a=s.getLastPosition();let r=e.getJoined(this._expandLinkRange(o,l)||e);r&&(r=r.getJoined(this._expandLinkRange(o,a)||e)),r&&(r.start.isBefore(l)||r.end.isAfter(a))&&t.setSelection(r)}_enablePasteLinking(){const t=this.editor,e=t.model,n=e.document.selection,o=t.plugins.get("ClipboardPipeline"),s=t.commands.get("link");o.on("inputTransformation",(l,a)=>{if(!this.isEnabled||!s.isEnabled||n.isCollapsed||a.method!=="paste"||n.rangeCount>1)return;const r=n.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const d=c.match(yn);d&&d[2]===c&&(e.change(u=>{this._selectEntireLinks(u,r),s.execute(c)}),l.stop())},{priority:"high"})}_enableTypingHandling(){const t=this.editor,e=new Ko(t.model,n=>{if(!Sl(n))return;const o=vt(n.substr(0,n.length-1));if(o)return{url:o}});e.on("matched:data",(n,o)=>{const{batch:s,range:l,url:a}=o;if(!s.isTyping)return;const r=l.end.getShiftedBy(-1),c=r.getShiftedBy(-a.length),d=t.model.createRange(c,r);this._applyAutoLink(a,d)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("enter");n&&n.on("execute",()=>{const o=e.document.selection.getFirstPosition();if(!o.parent.previousSibling)return;const s=e.createRangeIn(o.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(s)})}_enableShiftEnterHandling(){const t=this.editor,e=t.model,n=t.commands.get("shiftEnter");n&&n.on("execute",()=>{const o=e.document.selection.getFirstPosition(),s=e.createRange(e.createPositionAt(o.parent,0),o.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(s)})}_checkAndApplyAutoLinkOnRange(t){const e=this.editor.model,{text:n,range:o}=qo(t,e),s=vt(n);if(s){const l=e.createRange(o.end.getShiftedBy(-s.length),o.end);this._applyAutoLink(s,l)}}_applyAutoLink(t,e){const n=this.editor.model,o=this.editor.config.get("link.defaultProtocol"),s=Qe(t,o);!this.isEnabled||!Al(e,n)||!vn(s)||Rl(e)||this._persistAutoLink(s,e)}_persistAutoLink(t,e){const n=this.editor.model,o=this.editor.plugins.get("Delete");n.enqueueChange(s=>{s.setAttribute("linkHref",t,e),n.enqueueChange(()=>{o.requestUndoOnBackspace()})})}}function Sl(i){return i.length>Il&&i[i.length-1]===" "&&i[i.length-2]!==" "}function vt(i){const t=yn.exec(i);return t?t[Tl]:null}function Al(i,t){return t.schema.checkAttributeInSelection(t.createSelection(i),"linkHref")}function Rl(i){const t=i.start.nodeAfter;return!!t&&t.hasAttribute("linkHref")}class El extends _{static get requires(){return[kn,kl,xl]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function T(i,t,e,n,o=1){t!=null&&o!==void 0&&o!==null&&t>o?n.setAttribute(i,t,e):n.removeAttribute(i,e)}function G(i,t,e={}){const n=i.createElement("tableCell",e);return i.insertElement("paragraph",n),i.insert(n,t),n}function Me(i,t){const e=t.parent.parent,n=parseInt(e.getAttribute("headingColumns")||"0"),{column:o}=i.getCellLocation(t);return!!n&&o<n}function Vl(){return i=>{i.on("element:figure",(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const o=Fl(e.viewItem);if(!o||!n.consumable.test(o,{name:!0}))return;n.consumable.consume(e.viewItem,{name:!0,classes:"table"});const s=n.convertItem(o,e.modelCursor),l=q(s.modelRange.getItems());if(!l){n.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}n.convertChildren(e.viewItem,n.writer.createPositionAt(l,"end")),n.updateConversionResult(l,e)})}}function Bl(){return i=>{i.on("element:table",(t,e,n)=>{const o=e.viewItem;if(!n.consumable.test(o,{name:!0}))return;const{rows:s,headingRows:l,headingColumns:a}=Pl(o),r={};a&&(r.headingColumns=a),l&&(r.headingRows=l);const c=n.writer.createElement("table",r);if(n.safeInsert(c,e.modelCursor)){if(n.consumable.consume(o,{name:!0}),s.forEach(d=>n.convertItem(d,n.writer.createPositionAt(c,"end"))),n.convertChildren(o,n.writer.createPositionAt(c,"end")),c.isEmpty){const d=n.writer.createElement("tableRow");n.writer.insert(d,n.writer.createPositionAt(c,"end")),G(n.writer,n.writer.createPositionAt(d,"end"))}n.updateConversionResult(c,e)}})}}function Ll(){return i=>{i.on("element:tr",(t,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&t.stop()},{priority:"high"})}}function kt(i){return t=>{t.on(`element:${i}`,(e,n,{writer:o})=>{if(!n.modelRange)return;const s=n.modelRange.start.nodeAfter,l=o.createPositionAt(s,0);if(n.viewItem.isEmpty){o.insertElement("paragraph",l);return}const a=Array.from(s.getChildren());if(a.every(r=>r.is("element","$marker"))){const r=o.createElement("paragraph");o.insert(r,o.createPositionAt(s,0));for(const c of a)o.move(o.createRangeOn(c),o.createPositionAt(r,"end"))}},{priority:"low"})}}function Fl(i){for(const t of i.getChildren())if(t.is("element","table"))return t}function Pl(i){let t=0,e;const n=[],o=[];let s;for(const l of Array.from(i.getChildren())){if(l.name!=="tbody"&&l.name!=="thead"&&l.name!=="tfoot")continue;l.name==="thead"&&!s&&(s=l);const a=Array.from(l.getChildren()).filter(r=>r.is("element","tr"));for(const r of a)if(s&&l===s||l.name==="tbody"&&Array.from(r.getChildren()).length&&Array.from(r.getChildren()).every(c=>c.is("element","th")))t++,n.push(r);else{o.push(r);const c=Ul(r);(!e||c<e)&&(e=c)}}return{headingRows:t,headingColumns:e||0,rows:[...n,...o]}}function Ul(i){let t=0,e=0;const n=Array.from(i.getChildren()).filter(o=>o.name==="th"||o.name==="td");for(;e<n.length&&n[e].name==="th";){const o=n[e],s=parseInt(o.getAttribute("colspan")||"1");t=t+s,e++}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class y{constructor(t,e={}){g(this,"_table");g(this,"_startRow");g(this,"_endRow");g(this,"_startColumn");g(this,"_endColumn");g(this,"_includeAllSlots");g(this,"_skipRows");g(this,"_row");g(this,"_rowIndex");g(this,"_column");g(this,"_cellIndex");g(this,"_spannedCells");g(this,"_nextCellAtColumn");g(this,"_jumpedToStartRow",!1);this._table=t,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const t=this._table.getChild(this._rowIndex);if(!t||this._isOverEndRow())return{done:!0,value:void 0};if(!t.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const n=this._getSpanned();if(n)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(n.cell,n.row,n.column));else{const o=t.getChild(this._cellIndex);if(!o)return this._advanceToNextRow();const s=parseInt(o.getAttribute("colspan")||"1"),l=parseInt(o.getAttribute("rowspan")||"1");(s>1||l>1)&&this._recordSpans(o,l,s),this._shouldSkipSlot()||(e=this._formatOutValue(o)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(t){this._skipRows.add(t)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(t,e=this._row,n=this._column){return{done:!1,value:new Hl(this,t,e,n)}}_shouldSkipSlot(){const t=this._skipRows.has(this._row),e=this._row<this._startRow,n=this._column<this._startColumn,o=this._endColumn!==void 0&&this._column>this._endColumn;return t||e||n||o}_getSpanned(){const t=this._spannedCells.get(this._row);return t&&t.get(this._column)||null}_recordSpans(t,e,n){const o={cell:t,row:this._row,column:this._column};for(let s=this._row;s<this._row+e;s++)for(let l=this._column;l<this._column+n;l++)(s!=this._row||l!=this._column)&&this._markSpannedCell(s,l,o)}_markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map),this._spannedCells.get(t).set(e,n)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const t=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)t===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(t){return[...this._table.getChild(t).getChildren()].reduce((n,o)=>n+parseInt(o.getAttribute("colspan")||"1"),0)}}class Hl{constructor(t,e,n,o){g(this,"cell");g(this,"row");g(this,"column");g(this,"cellAnchorRow");g(this,"cellAnchorColumn");g(this,"_cellIndex");g(this,"_rowIndex");g(this,"_table");this.cell=e,this.row=t._row,this.column=t._column,this.cellAnchorRow=n,this.cellAnchorColumn=o,this._cellIndex=t._cellIndex,this._rowIndex=t._rowIndex,this._table=t._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function yt(i,t){return(e,{writer:n})=>{const o=e.getAttribute("headingRows")||0,s=n.createContainerElement("table",null,[]),l=n.createContainerElement("figure",{class:"table"},s);o>0&&n.insert(n.createPositionAt(s,"end"),n.createContainerElement("thead",null,n.createSlot(a=>a.is("element","tableRow")&&a.index<o))),o<i.getRows(e)&&n.insert(n.createPositionAt(s,"end"),n.createContainerElement("tbody",null,n.createSlot(a=>a.is("element","tableRow")&&a.index>=o)));for(const{positionOffset:a,filter:r}of t.additionalSlots)n.insert(n.createPositionAt(s,a),n.createSlot(r));return n.insert(n.createPositionAt(s,"after"),n.createSlot(a=>a.is("element","tableRow")?!1:!t.additionalSlots.some(({filter:r})=>r(a)))),t.asWidget?Ml(l,n):l}}function Ol(){return(i,{writer:t})=>i.isEmpty?t.createEmptyElement("tr"):t.createContainerElement("tr")}function It(i={}){return(t,{writer:e})=>{const n=t.parent,o=n.parent,s=o.getChildIndex(n),l=new y(o,{row:s}),a=o.getAttribute("headingRows")||0,r=o.getAttribute("headingColumns")||0;let c=null;for(const d of l)if(d.cell==t){const m=d.row<a||d.column<r?"th":"td";c=i.asWidget?Jo(e.createEditableElement(m),e):e.createContainerElement(m);break}return c}}function Tt(i={}){return(t,{writer:e})=>{if(!t.parent.is("element","tableCell")||!In(t))return null;if(i.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const n=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,n),n}}}function In(i){return i.parent.childCount==1&&!Nl(i)}function Ml(i,t){return t.setCustomProperty("table",!0,i),Mt(i,t,{hasSelectionHandle:!0})}function Nl(i){return!i.getAttributeKeys().next().done}class Dl extends I{refresh(){const t=this.editor.model,e=t.document.selection,n=t.schema;this.isEnabled=zl(e,n)}execute(t={}){const e=this.editor,n=e.model,o=e.plugins.get("TableUtils"),s=e.config.get("table.defaultHeadings.rows"),l=e.config.get("table.defaultHeadings.columns");t.headingRows===void 0&&s&&(t.headingRows=s),t.headingColumns===void 0&&l&&(t.headingColumns=l),n.change(a=>{const r=o.createTable(a,t);n.insertObject(r,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(r.getNodeByPath([0,0,0]),0))})}}function zl(i,t){const e=i.getFirstPosition().parent,n=e===e.root?e:e.parent;return t.checkChild(n,"table")}class xt extends I{constructor(e,n={}){super(e);g(this,"order");this.order=n.order||"below"}refresh(){const e=this.editor.model.document.selection,o=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=o}execute(){const e=this.editor,n=e.model.document.selection,o=e.plugins.get("TableUtils"),s=this.order==="above",l=o.getSelectionAffectedTableCells(n),a=o.getRowIndexes(l),r=s?a.first:a.last,c=l[0].findAncestor("table");o.insertRows(c,{at:s?r:r+1,copyStructureFromAbove:!s})}}class St extends I{constructor(e,n={}){super(e);g(this,"order");this.order=n.order||"right"}refresh(){const e=this.editor.model.document.selection,o=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=o}execute(){const e=this.editor,n=e.model.document.selection,o=e.plugins.get("TableUtils"),s=this.order==="left",l=o.getSelectionAffectedTableCells(n),a=o.getColumnIndexes(l),r=s?a.first:a.last,c=l[0].findAncestor("table");o.insertColumns(c,{columns:1,at:s?r:r+1})}}class At extends I{constructor(e,n={}){super(e);g(this,"direction");this.direction=n.direction||"horizontally"}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(n,2):e.splitCellVertically(n,2)}}function Tn(i,t,e){const{startRow:n,startColumn:o,endRow:s,endColumn:l}=t,a=e.createElement("table"),r=s-n+1;for(let d=0;d<r;d++)e.insertElement("tableRow",a,"end");const c=[...new y(i,{startRow:n,endRow:s,startColumn:o,endColumn:l,includeAllSlots:!0})];for(const{row:d,column:u,cell:m,isAnchor:h,cellAnchorRow:f,cellAnchorColumn:p}of c){const C=d-n,w=a.getChild(C);if(!h)(f<n||p<o)&&G(e,e.createPositionAt(w,"end"));else{const v=e.cloneElement(m);e.append(v,w),En(v,d,u,s,l,e)}}return Wl(a,i,n,o,e),a}function xn(i,t,e=0){const n=[],o=new y(i,{startRow:e,endRow:t-1});for(const s of o){const{row:l,cellHeight:a}=s,r=l+a-1;l<t&&t<=r&&n.push(s)}return n}function Sn(i,t,e){const n=i.parent,o=n.parent,s=n.index,l=parseInt(i.getAttribute("rowspan")),a=t-s,r={},c=l-a;c>1&&(r.rowspan=c);const d=parseInt(i.getAttribute("colspan")||"1");d>1&&(r.colspan=d);const u=s,m=u+a,h=[...new y(o,{startRow:u,endRow:m,includeAllSlots:!0})];let f=null,p;for(const C of h){const{row:w,column:v,cell:E}=C;E===i&&p===void 0&&(p=v),p!==void 0&&p===v&&w===m&&(f=G(e,C.getPositionBefore(),r))}return T("rowspan",a,i,e),f}function An(i,t){const e=[],n=new y(i);for(const o of n){const{column:s,cellWidth:l}=o,a=s+l-1;s<t&&t<=a&&e.push(o)}return e}function Rn(i,t,e,n){const o=parseInt(i.getAttribute("colspan")),s=e-t,l={},a=o-s;a>1&&(l.colspan=a);const r=parseInt(i.getAttribute("rowspan")||"1");r>1&&(l.rowspan=r);const c=G(n,n.createPositionAfter(i),l);return T("colspan",s,i,n),c}function En(i,t,e,n,o,s){const l=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(e+l-1>o){const d=o-e+1;T("colspan",d,i,s,1)}if(t+a-1>n){const d=n-t+1;T("rowspan",d,i,s,1)}}function Wl(i,t,e,n,o){const s=parseInt(t.getAttribute("headingRows")||"0");if(s>0){const a=s-e;T("headingRows",a,i,o,0)}const l=parseInt(t.getAttribute("headingColumns")||"0");if(l>0){const a=l-n;T("headingColumns",a,i,o,0)}}function Ne(i,t){const e=t.getColumns(i),n=new Array(e).fill(0);for(const{column:s}of new y(i))n[s]++;const o=n.reduce((s,l,a)=>l?s:[...s,a],[]);if(o.length>0){const s=o[o.length-1];return t.removeColumns(i,{at:s}),!0}return!1}function De(i,t){const e=[],n=t.getRows(i);for(let o=0;o<n;o++)i.getChild(o).isEmpty&&e.push(o);if(e.length>0){const o=e[e.length-1];return t.removeRows(i,{at:o}),!0}return!1}function et(i,t){Ne(i,t)||De(i,t)}function Vn(i,t){const e=Array.from(new y(i,{startColumn:t.firstColumn,endColumn:t.lastColumn,row:t.lastRow}));if(e.every(({cellHeight:s})=>s===1))return t.lastRow;const o=e[0].cellHeight-1;return t.lastRow+o}function Bn(i,t){const e=Array.from(new y(i,{startRow:t.firstRow,endRow:t.lastRow,column:t.lastColumn}));if(e.every(({cellWidth:s})=>s===1))return t.lastColumn;const o=e[0].cellWidth-1;return t.lastColumn+o}class ge extends I{constructor(e,n){super(e);g(this,"direction");g(this,"isHorizontal");this.direction=n.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,n=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(n.selection)[0],l=this.value,a=this.direction;e.change(r=>{const c=a=="right"||a=="down",d=c?s:l,u=c?l:s,m=u.parent;jl(u,d,r);const h=this.isHorizontal?"colspan":"rowspan",f=parseInt(s.getAttribute(h)||"1"),p=parseInt(l.getAttribute(h)||"1");r.setAttribute(h,f+p,d),r.setSelection(r.createRangeIn(d));const C=this.editor.plugins.get("TableUtils"),w=m.findAncestor("table");et(w,C)})}_getMergeableCell(){const n=this.editor.model.document,o=this.editor.plugins.get("TableUtils"),s=o.getTableCellsContainingSelection(n.selection)[0];if(!s)return;const l=this.isHorizontal?Kl(s,this.direction,o):ql(s,this.direction,o);if(!l)return;const a=this.isHorizontal?"rowspan":"colspan",r=parseInt(s.getAttribute(a)||"1");if(parseInt(l.getAttribute(a)||"1")===r)return l}}function Kl(i,t,e){const o=i.parent.parent,s=t=="right"?i.nextSibling:i.previousSibling,l=(o.getAttribute("headingColumns")||0)>0;if(!s)return;const a=t=="right"?i:s,r=t=="right"?s:i,{column:c}=e.getCellLocation(a),{column:d}=e.getCellLocation(r),u=parseInt(a.getAttribute("colspan")||"1"),m=Me(e,a),h=Me(e,r);return l&&m!=h?void 0:c+u===d?s:void 0}function ql(i,t,e){const n=i.parent,o=n.parent,s=o.getChildIndex(n);if(t=="down"&&s===e.getRows(o)-1||t=="up"&&s===0)return null;const l=parseInt(i.getAttribute("rowspan")||"1"),a=o.getAttribute("headingRows")||0,r=t=="down"&&s+l===a,c=t=="up"&&s===a;if(a&&(r||c))return null;const d=parseInt(i.getAttribute("rowspan")||"1"),u=t=="down"?s+d:s,m=[...new y(o,{endRow:u})],f=m.find(C=>C.cell===i).column,p=m.find(({row:C,cellHeight:w,column:v})=>v!==f?!1:t=="down"?C===u:u===C+w);return p&&p.cell?p.cell:null}function jl(i,t,e){Rt(i)||(Rt(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function Rt(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}class Gl extends I{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const o=n.findAncestor("table"),l=t.getRows(o)-1,a=t.getRowIndexes(e),r=a.first===0&&a.last===l;this.isEnabled=!r}else this.isEnabled=!1}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),o=e.getRowIndexes(n),s=n[0],l=s.findAncestor("table"),a=e.getCellLocation(s).column;t.change(r=>{const c=o.last-o.first+1;e.removeRows(l,{at:o.first,rows:c});const d=Jl(l,o.first,a,e.getRows(l));r.setSelection(r.createPositionAt(d,0))})}}function Jl(i,t,e,n){const o=i.getChild(Math.min(t,n-1));let s=o.getChild(0),l=0;for(const a of o.getChildren()){if(l>e)return s;s=a,l+=parseInt(a.getAttribute("colspan")||"1")}return s}class Yl extends I{refresh(){const t=this.editor.plugins.get("TableUtils"),e=t.getSelectionAffectedTableCells(this.editor.model.document.selection),n=e[0];if(n){const o=n.findAncestor("table"),s=t.getColumns(o),{first:l,last:a}=t.getColumnIndexes(e);this.isEnabled=a-l<s-1}else this.isEnabled=!1}execute(){const t=this.editor.plugins.get("TableUtils"),[e,n]=$l(this.editor.model.document.selection,t),o=e.parent.parent,s=[...new y(o)],l={first:s.find(r=>r.cell===e).column,last:s.find(r=>r.cell===n).column},a=Zl(s,e,n,l);this.editor.model.change(r=>{const c=l.last-l.first+1;t.removeColumns(o,{at:l.first,columns:c}),r.setSelection(r.createPositionAt(a,0))})}}function Zl(i,t,e,n){return parseInt(e.getAttribute("colspan")||"1")>1?e:t.previousSibling||e.nextSibling?e.nextSibling||t.previousSibling:n.first?i.reverse().find(({column:s})=>s<n.first).cell:i.reverse().find(({column:s})=>s>n.last).cell}function $l(i,t){const e=t.getSelectionAffectedTableCells(i),n=e[0],o=e.pop(),s=[n,o];return n.isBefore(o)?s:s.reverse()}class Xl extends I{refresh(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),o=n.length>0;this.isEnabled=o,this.value=o&&n.every(s=>this._isInHeading(s,s.parent.parent))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,o=e.getSelectionAffectedTableCells(n.document.selection),s=o[0].findAncestor("table"),{first:l,last:a}=e.getRowIndexes(o),r=this.value?l:a+1,c=s.getAttribute("headingRows")||0;n.change(d=>{if(r){const u=r>c?c:0,m=xn(s,r,u);for(const{cell:h}of m)Sn(h,r,d)}T("headingRows",r,s,d,0)})}_isInHeading(t,e){const n=parseInt(e.getAttribute("headingRows")||"0");return!!n&&t.parent.index<n}}class Ql extends I{refresh(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),o=n.length>0;this.isEnabled=o,this.value=o&&n.every(s=>Me(e,s))}execute(t={}){if(t.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),n=this.editor.model,o=e.getSelectionAffectedTableCells(n.document.selection),s=o[0].findAncestor("table"),{first:l,last:a}=e.getColumnIndexes(o),r=this.value?l:a+1;n.change(c=>{if(r){const d=An(s,r);for(const{cell:u,column:m}of d)Rn(u,m,r,c)}T("headingColumns",r,s,c,0)})}}function ea(i){if(i.is("element","tableColumnGroup"))return i;const t=i.getChildren();return Array.from(t).find(e=>e.is("element","tableColumnGroup"))}function ta(i){const t=ea(i);return t?Array.from(t.getChildren()):[]}class R extends _{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(t){const e=t.parent,n=e.parent,o=n.getChildIndex(e),s=new y(n,{row:o});for(const{cell:l,row:a,column:r}of s)if(l===t)return{row:a,column:r};/* istanbul ignore next -- @preserve */}createTable(t,e){const n=t.createElement("table"),o=e.rows||2,s=e.columns||2;return Le(t,n,0,o,s),e.headingRows&&T("headingRows",Math.min(e.headingRows,o),n,t,0),e.headingColumns&&T("headingColumns",Math.min(e.headingColumns,s),n,t,0),n}insertRows(t,e={}){const n=this.editor.model,o=e.at||0,s=e.rows||1,l=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?o-1:o,r=this.getRows(t),c=this.getColumns(t);if(o>r)throw new ae("tableutils-insertrows-insert-out-of-range",this,{options:e});n.change(d=>{const u=t.getAttribute("headingRows")||0;if(u>o&&T("headingRows",u+s,t,d,0),!l&&(o===0||o===r)){Le(d,t,o,s,c);return}const m=l?Math.max(o,a):o,h=new y(t,{endRow:m}),f=new Array(c).fill(1);for(const{row:p,column:C,cellHeight:w,cellWidth:v,cell:E}of h){const V=p+w-1,S=p<o&&o<=V,J=p<=a&&a<=V;S?(d.setAttribute("rowspan",w+s,E),f[C]=-v):l&&J&&(f[C]=v)}for(let p=0;p<s;p++){const C=d.createElement("tableRow");d.insert(C,t,o);for(let w=0;w<f.length;w++){const v=f[w],E=d.createPositionAt(C,"end");v>0&&G(d,E,v>1?{colspan:v}:void 0),w+=Math.abs(v)-1}}})}insertColumns(t,e={}){const n=this.editor.model,o=e.at||0,s=e.columns||1;n.change(l=>{const a=t.getAttribute("headingColumns");o<a&&l.setAttribute("headingColumns",a+s,t);const r=this.getColumns(t);if(o===0||r===o){for(const d of t.getChildren())d.is("element","tableRow")&&ee(s,l,l.createPositionAt(d,o?"end":0));return}const c=new y(t,{column:o,includeAllSlots:!0});for(const d of c){const{row:u,cell:m,cellAnchorColumn:h,cellAnchorRow:f,cellWidth:p,cellHeight:C}=d;if(h<o){l.setAttribute("colspan",p+s,m);const w=f+C-1;for(let v=u;v<=w;v++)c.skipRow(v)}else ee(s,l,d.getPositionBefore())}})}removeRows(t,e){const n=this.editor.model,o=e.rows||1,s=this.getRows(t),l=e.at,a=l+o-1;if(a>s-1)throw new ae("tableutils-removerows-row-index-out-of-range",this,{table:t,options:e});n.change(r=>{const c={first:l,last:a},{cellsToMove:d,cellsToTrim:u}=sa(t,c);if(d.size){const m=a+1;ia(t,m,d,r)}for(let m=a;m>=l;m--)r.remove(t.getChild(m));for(const{rowspan:m,cell:h}of u)T("rowspan",m,h,r);oa(t,c,r),Ne(t,this)||De(t,this)})}removeColumns(t,e){const n=this.editor.model,o=e.at,s=e.columns||1,l=e.at+s-1;n.change(a=>{na(t,{first:o,last:l},a);const r=ta(t);for(let c=l;c>=o;c--){for(const{cell:d,column:u,cellWidth:m}of[...new y(t)])u<=c&&m>1&&u+m>c?T("colspan",m-1,d,a):u===c&&a.remove(d);if(r[c]){const d=c===0?r[1]:r[c-1],u=parseFloat(r[c].getAttribute("columnWidth")),m=parseFloat(d.getAttribute("columnWidth"));a.remove(r[c]),a.setAttribute("columnWidth",u+m+"%",d)}}De(t,this)||Ne(t,this)})}splitCellVertically(t,e=2){const n=this.editor.model,s=t.parent.parent,l=parseInt(t.getAttribute("rowspan")||"1"),a=parseInt(t.getAttribute("colspan")||"1");n.change(r=>{if(a>1){const{newCellsSpan:c,updatedSpan:d}=Et(a,e);T("colspan",d,t,r);const u={};c>1&&(u.colspan=c),l>1&&(u.rowspan=l);const m=a>e?e-1:a-1;ee(m,r,r.createPositionAfter(t),u)}if(a<e){const c=e-a,d=[...new y(s)],{column:u}=d.find(({cell:p})=>p===t),m=d.filter(({cell:p,cellWidth:C,column:w})=>{const v=p!==t&&w===u,E=w<u&&w+C>u;return v||E});for(const{cell:p,cellWidth:C}of m)r.setAttribute("colspan",C+c,p);const h={};l>1&&(h.rowspan=l),ee(c,r,r.createPositionAfter(t),h);const f=s.getAttribute("headingColumns")||0;f>u&&T("headingColumns",f+c,s,r)}})}splitCellHorizontally(t,e=2){const n=this.editor.model,o=t.parent,s=o.parent,l=s.getChildIndex(o),a=parseInt(t.getAttribute("rowspan")||"1"),r=parseInt(t.getAttribute("colspan")||"1");n.change(c=>{if(a>1){const d=[...new y(s,{startRow:l,endRow:l+a-1,includeAllSlots:!0})],{newCellsSpan:u,updatedSpan:m}=Et(a,e);T("rowspan",m,t,c);const{column:h}=d.find(({cell:C})=>C===t),f={};u>1&&(f.rowspan=u),r>1&&(f.colspan=r);let p=0;for(const C of d){const{column:w,row:v}=C,E=v>=l+m,V=w===h;p>=u&&V&&(p=0),E&&V&&(p||ee(1,c,C.getPositionBefore(),f),p++)}}if(a<e){const d=e-a,u=[...new y(s,{startRow:0,endRow:l})];for(const{cell:f,cellHeight:p,row:C}of u)if(f!==t&&C+p>l){const w=p+d;c.setAttribute("rowspan",w,f)}const m={};r>1&&(m.colspan=r),Le(c,s,l+1,d,1,m);const h=s.getAttribute("headingRows")||0;h>l&&T("headingRows",h+d,s,c)}})}getColumns(t){return[...t.getChild(0).getChildren()].filter(n=>n.is("element","tableCell")).reduce((n,o)=>{const s=parseInt(o.getAttribute("colspan")||"1");return n+s},0)}getRows(t){return Array.from(t.getChildren()).reduce((e,n)=>n.is("element","tableRow")?e+1:e,0)}createTableWalker(t,e={}){return new y(t,e)}getSelectedTableCells(t){const e=[];for(const n of this.sortRanges(t.getRanges())){const o=n.getContainedElement();o&&o.is("element","tableCell")&&e.push(o)}return e}getTableCellsContainingSelection(t){const e=[];for(const n of t.getRanges()){const o=n.start.findAncestor("tableCell");o&&e.push(o)}return e}getSelectionAffectedTableCells(t){const e=this.getSelectedTableCells(t);return e.length?e:this.getTableCellsContainingSelection(t)}getRowIndexes(t){const e=t.map(n=>n.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(t){const e=t[0].findAncestor("table"),o=[...new y(e)].filter(s=>t.includes(s.cell)).map(s=>s.column);return this._getFirstLastIndexesObject(o)}isSelectionRectangular(t){if(t.length<2||!this._areCellInTheSameTableSection(t))return!1;const e=new Set,n=new Set;let o=0;for(const l of t){const{row:a,column:r}=this.getCellLocation(l),c=parseInt(l.getAttribute("rowspan"))||1,d=parseInt(l.getAttribute("colspan"))||1;e.add(a),n.add(r),c>1&&e.add(a+c-1),d>1&&n.add(r+d-1),o+=c*d}return aa(e,n)==o}sortRanges(t){return Array.from(t).sort(la)}_getFirstLastIndexesObject(t){const e=t.sort((s,l)=>s-l),n=e[0],o=e[e.length-1];return{first:n,last:o}}_areCellInTheSameTableSection(t){const e=t[0].findAncestor("table"),n=this.getRowIndexes(t),o=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(n,o))return!1;const s=this.getColumnIndexes(t),l=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(s,l)}_areIndexesInSameSection({first:t,last:e},n){const o=t<n,s=e<n;return o===s}}function Le(i,t,e,n,o,s={}){for(let l=0;l<n;l++){const a=i.createElement("tableRow");i.insert(a,t,e),ee(o,i,i.createPositionAt(a,"end"),s)}}function ee(i,t,e,n={}){for(let o=0;o<i;o++)G(t,e,n)}function Et(i,t){if(i<t)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(i/t),n=i-e*t+e;return{newCellsSpan:e,updatedSpan:n}}function na(i,t,e){const n=i.getAttribute("headingColumns")||0;if(n&&t.first<n){const o=Math.min(n-1,t.last)-t.first+1;e.setAttribute("headingColumns",n-o,i)}}function oa(i,{first:t,last:e},n){const o=i.getAttribute("headingRows")||0;if(t<o){const s=e<o?o-(e-t+1):t;T("headingRows",s,i,n,0)}}function sa(i,{first:t,last:e}){const n=new Map,o=[];for(const{row:s,column:l,cellHeight:a,cell:r}of new y(i,{endRow:e})){const c=s+a-1;if(s>=t&&s<=e&&c>e){const m=e-s+1,h=a-m;n.set(l,{cell:r,rowspan:h})}if(s<t&&c>=t){let m;c>=e?m=e-t+1:m=c-t+1,o.push({cell:r,rowspan:a-m})}}return{cellsToMove:n,cellsToTrim:o}}function ia(i,t,e,n){const s=[...new y(i,{includeAllSlots:!0,row:t})],l=i.getChild(t);let a;for(const{column:r,cell:c,isAnchor:d}of s)if(e.has(r)){const{cell:u,rowspan:m}=e.get(r),h=a?n.createPositionAfter(a):n.createPositionAt(l,0);n.move(n.createRangeOn(u),h),T("rowspan",m,u,n),a=u}else d&&(a=c)}function la(i,t){const e=i.start,n=t.start;return e.isBefore(n)?-1:1}function aa(i,t){const e=Array.from(i.values()),n=Array.from(t.values()),o=Math.max(...e),s=Math.min(...e),l=Math.max(...n),a=Math.min(...n);return(o-s+1)*(l-a+1)}class ra extends I{refresh(){const t=this.editor.plugins.get(R),e=t.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=t.isSelectionRectangular(e)}execute(){const t=this.editor.model,e=this.editor.plugins.get(R);t.change(n=>{const o=e.getSelectedTableCells(t.document.selection),s=o.shift(),{mergeWidth:l,mergeHeight:a}=da(s,o,e);T("colspan",l,s,n),T("rowspan",a,s,n);for(const c of o)ca(c,s,n);const r=s.findAncestor("table");et(r,e),n.setSelection(s,"in")})}}function ca(i,t,e){Vt(i)||(Vt(t)&&e.remove(e.createRangeIn(t)),e.move(e.createRangeIn(i),e.createPositionAt(t,"end"))),e.remove(i)}function Vt(i){const t=i.getChild(0);return i.childCount==1&&t.is("element","paragraph")&&t.isEmpty}function da(i,t,e){let n=0,o=0;for(const c of t){const{row:d,column:u}=e.getCellLocation(c);n=Bt(c,u,n,"colspan"),o=Bt(c,d,o,"rowspan")}const{row:s,column:l}=e.getCellLocation(i),a=n-l,r=o-s;return{mergeWidth:a,mergeHeight:r}}function Bt(i,t,e,n){const o=parseInt(i.getAttribute(n)||"1");return Math.max(e,t+o)}class ua extends I{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.model,e=this.editor.plugins.get("TableUtils"),n=e.getSelectionAffectedTableCells(t.document.selection),o=e.getRowIndexes(n),s=n[0].findAncestor("table"),l=[];for(let a=o.first;a<=o.last;a++)for(const r of s.getChild(a).getChildren())l.push(t.createRangeOn(r));t.change(a=>{a.setSelection(l)})}}class ma extends I{constructor(t){super(t),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const t=this.editor.plugins.get("TableUtils"),e=this.editor.model,n=t.getSelectionAffectedTableCells(e.document.selection),o=n[0],s=n.pop(),l=o.findAncestor("table"),a=t.getCellLocation(o),r=t.getCellLocation(s),c=Math.min(a.column,r.column),d=Math.max(a.column,r.column),u=[];for(const m of new y(l,{startColumn:c,endColumn:d}))u.push(e.createRangeOn(m.cell));e.change(m=>{m.setSelection(u)})}}function ha(i){i.document.registerPostFixer(t=>ga(t,i))}function ga(i,t){const e=t.document.differ.getChanges();let n=!1;const o=new Set;for(const s of e){let l=null;s.type=="insert"&&s.name=="table"&&(l=s.position.nodeAfter),(s.type=="insert"||s.type=="remove")&&(s.name=="tableRow"||s.name=="tableCell")&&(l=s.position.findAncestor("table")),Ca(s)&&(l=s.range.start.findAncestor("table")),l&&!o.has(l)&&(n=fa(l,i)||n,n=pa(l,i)||n,o.add(l))}return n}function fa(i,t){let e=!1;const n=ba(i);if(n.length){e=!0;for(const o of n)T("rowspan",o.rowspan,o.cell,t,1)}return e}function pa(i,t){let e=!1;const n=wa(i),o=[];for(const[r,c]of n.entries())!c&&i.getChild(r).is("element","tableRow")&&o.push(r);if(o.length){e=!0;for(const r of o.reverse())t.remove(i.getChild(r)),n.splice(r,1)}const s=n.filter((r,c)=>i.getChild(c).is("element","tableRow")),l=s[0];if(!s.every(r=>r===l)){const r=s.reduce((c,d)=>d>c?d:c,0);for(const[c,d]of s.entries()){const u=r-d;if(u){for(let m=0;m<u;m++)G(t,t.createPositionAt(i.getChild(c),"end"));e=!0}}}return e}function ba(i){const t=parseInt(i.getAttribute("headingRows")||"0"),e=Array.from(i.getChildren()).reduce((o,s)=>s.is("element","tableRow")?o+1:o,0),n=[];for(const{row:o,cell:s,cellHeight:l}of new y(i)){if(l<2)continue;const r=o<t?t:e;if(o+l>r){const c=r-o;n.push({cell:s,rowspan:c})}}return n}function wa(i){const t=new Array(i.childCount).fill(0);for(const{rowIndex:e}of new y(i,{includeAllSlots:!0}))t[e]++;return t}function Ca(i){if(i.type!=="attribute")return!1;const t=i.attributeKey;return t==="headingRows"||t==="colspan"||t==="rowspan"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _a(i){i.document.registerPostFixer(t=>va(t,i))}function va(i,t){const e=t.document.differ.getChanges();let n=!1;for(const o of e)o.type=="insert"&&o.name=="table"&&(n=ka(o.position.nodeAfter,i)||n),o.type=="insert"&&o.name=="tableRow"&&(n=Ln(o.position.nodeAfter,i)||n),o.type=="insert"&&o.name=="tableCell"&&(n=ze(o.position.nodeAfter,i)||n),(o.type=="remove"||o.type=="insert")&&ya(o)&&(n=ze(o.position.parent,i)||n);return n}function ka(i,t){let e=!1;for(const n of i.getChildren())n.is("element","tableRow")&&(e=Ln(n,t)||e);return e}function Ln(i,t){let e=!1;for(const n of i.getChildren())e=ze(n,t)||e;return e}function ze(i,t){if(i.childCount==0)return t.insertElement("paragraph",i),!0;const e=Array.from(i.getChildren()).filter(n=>n.is("$text"));for(const n of e)t.wrap(t.createRangeOn(n),"paragraph");return!!e.length}function ya(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}function Ia(i,t){const e=i.document.differ;for(const n of e.getChanges()){let o,s=!1;if(n.type=="attribute"){const c=n.range.start.nodeAfter;if(!c||!c.is("element","table")||n.attributeKey!="headingRows"&&n.attributeKey!="headingColumns")continue;o=c,s=n.attributeKey=="headingRows"}else(n.name=="tableRow"||n.name=="tableCell")&&(o=n.position.findAncestor("table"),s=n.name=="tableRow");if(!o)continue;const l=o.getAttribute("headingRows")||0,a=o.getAttribute("headingColumns")||0,r=new y(o);for(const c of r){const u=c.row<l||c.column<a?"th":"td",m=t.mapper.toViewElement(c.cell);m&&m.is("element")&&m.name!=u&&t.reconvertItem(s?c.cell.parent:c.cell)}}}function Ta(i,t){const e=i.document.differ,n=new Set;for(const o of e.getChanges()){const s=o.type=="attribute"?o.range.start.parent:o.position.parent;s.is("element","tableCell")&&n.add(s)}for(const o of n.values()){const s=Array.from(o.getChildren()).filter(l=>xa(l,t.mapper));for(const l of s)t.reconvertItem(l)}}function xa(i,t){if(!i.is("element","paragraph"))return!1;const e=t.toViewElement(i);return e?In(i)!==e.is("element","span"):!1}class Sa extends _{constructor(e){super(e);g(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get requires(){return[R]}init(){const e=this.editor,n=e.model,o=n.schema,s=e.conversion,l=e.plugins.get(R);o.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),o.register("tableRow",{allowIn:"table",isLimit:!0}),o.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(Vl()),s.for("upcast").add(Bl()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:yt(l,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:yt(l,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(Ll()),s.for("downcast").elementToElement({model:"tableRow",view:Ol()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(kt("td")),s.for("upcast").add(kt("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:It({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:It()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:Tt({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:Tt(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:Lt("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Lt("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Dl(e)),e.commands.add("insertTableRowAbove",new xt(e,{order:"above"})),e.commands.add("insertTableRowBelow",new xt(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new St(e,{order:"left"})),e.commands.add("insertTableColumnRight",new St(e,{order:"right"})),e.commands.add("removeTableRow",new Gl(e)),e.commands.add("removeTableColumn",new Yl(e)),e.commands.add("splitTableCellVertically",new At(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new At(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new ra(e)),e.commands.add("mergeTableCellRight",new ge(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new ge(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new ge(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new ge(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new Ql(e)),e.commands.add("setTableRowHeader",new Xl(e)),e.commands.add("selectTableRow",new ua(e)),e.commands.add("selectTableColumn",new ma(e)),ha(n),_a(n),this.listenTo(n.document,"change:data",()=>{Ia(n,e.editing),Ta(n,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function Lt(i){return t=>{const e=parseInt(t.getAttribute(i));return Number.isNaN(e)||e<=0?null:e}}class Ft extends ne{constructor(e){super(e);g(this,"items");g(this,"keystrokes");g(this,"focusTracker");const n=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new de,this.focusTracker=new ce,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(o,s)=>`${s} × ${o}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":n.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:n.to("label")}]}],on:{mousedown:n.to(o=>{o.preventDefault()}),click:n.to(()=>{this.fire("execute")})}}),this.on("boxover",(o,s)=>{const{row:l,column:a}=s.target.dataset;this.items.get((parseInt(l,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(o,s,l)=>{if(!l)return;const{row:a,column:r}=l.dataset;this.set({rows:parseInt(a),columns:parseInt(r)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),Yo({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,n=this.columns;this.items.map((o,s)=>{const l=Math.floor(s/10),a=s%10,r=l<e&&a<n;o.set("isOn",r)})}_createGridButton(e,n,o,s){const l=new H(e);return l.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),l.extendTemplate({attributes:{"data-row":n,"data-column":o}}),l}_createGridCollection(){const e=[];for(let n=0;n<100;n++){const o=Math.floor(n/10),s=n%10,l=`${o+1} × ${s+1}`;e.push(this._createGridButton(this.locale,o+1,s+1,l))}return this.createCollection(e)}}var Aa='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',Ra='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',Ea='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class Va extends _{static get pluginName(){return"TableUI"}init(){const t=this.editor,e=this.editor.t,o=t.locale.contentLanguageDirection==="ltr";t.ui.componentFactory.add("insertTable",s=>{const l=t.commands.get("insertTable"),a=W(s);a.bind("isEnabled").to(l),a.buttonView.set({icon:F.table,label:e("Insert table"),tooltip:!0});let r;return a.on("change:isOpen",()=>{r||(r=new Ft(s),a.panelView.children.add(r),r.delegate("execute").to(a),a.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()}))}),a}),t.ui.componentFactory.add("menuBar:insertTable",s=>{const l=t.commands.get("insertTable"),a=new oe(s),r=new Ft(s);return r.delegate("execute").to(a),a.on("change:isOpen",(c,d,u)=>{u||r.reset()}),r.on("execute",()=>{t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:F.table}),a.panelView.children.add(r),a.bind("isEnabled").to(l),a}),t.ui.componentFactory.add("tableColumn",s=>{const l=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:o?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:o?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),Aa,l,s)}),t.ui.componentFactory.add("tableRow",s=>{const l=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),Ra,l,s)}),t.ui.componentFactory.add("mergeTableCells",s=>{const l=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:o?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:o?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),Ea,l,s)})}_prepareDropdown(t,e,n,o){const s=this.editor,l=W(o),a=this._fillDropdownWithListOptions(l,n);return l.buttonView.set({label:t,icon:e,tooltip:!0}),l.bind("isEnabled").toMany(a,"isEnabled",(...r)=>r.some(c=>c)),this.listenTo(l,"execute",r=>{s.execute(r.source.commandName),r.source instanceof qt||s.editing.view.focus()}),l}_prepareMergeSplitButtonDropdown(t,e,n,o){const s=this.editor,l=W(o,Ot),a="mergeTableCells",r=s.commands.get(a),c=this._fillDropdownWithListOptions(l,n);return l.buttonView.set({label:t,icon:e,tooltip:!0,isEnabled:!0}),l.bind("isEnabled").toMany([r,...c],"isEnabled",(...d)=>d.some(u=>u)),this.listenTo(l.buttonView,"execute",()=>{s.execute(a),s.editing.view.focus()}),this.listenTo(l,"execute",d=>{s.execute(d.source.commandName),s.editing.view.focus()}),l}_fillDropdownWithListOptions(t,e){const n=this.editor,o=[],s=new re;for(const l of e)Ba(l,n,o,s);return _e(t,s),o}}function Ba(i,t,e,n){if(i.type==="button"||i.type==="switchbutton"){const o=i.model=new ye(i.model),{commandName:s,bindIsOn:l}=i.model,a=t.commands.get(s);e.push(a),o.set({commandName:s}),o.bind("isEnabled").to(a),l&&o.bind("isOn").to(a,"value"),o.set({withText:!0})}n.add(i)}class K extends _{static get pluginName(){return"TableSelection"}static get requires(){return[R,R]}init(){const t=this.editor,e=t.model,n=t.editing.view;this.listenTo(e,"deleteContent",(o,s)=>this._handleDeleteContent(o,s),{priority:"high"}),this.listenTo(n.document,"insertText",(o,s)=>this._handleInsertTextEvent(o,s),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const t=this.editor.plugins.get(R),e=this.editor.model.document.selection,n=t.getSelectedTableCells(e);return n.length==0?null:n}getSelectionAsFragment(){const t=this.editor.plugins.get(R),e=this.getSelectedTableCells();return e?this.editor.model.change(n=>{const o=n.createDocumentFragment(),{first:s,last:l}=t.getColumnIndexes(e),{first:a,last:r}=t.getRowIndexes(e),c=e[0].findAncestor("table");let d=r,u=l;if(t.isSelectionRectangular(e)){const f={firstColumn:s,lastColumn:l,firstRow:a,lastRow:r};d=Vn(c,f),u=Bn(c,f)}const h=Tn(c,{startRow:a,startColumn:s,endRow:d,endColumn:u},n);return n.insert(h,o,0),o}):null}setCellSelection(t,e){const n=this._getCellsToSelect(t,e);this.editor.model.change(o=>{o.setSelection(n.cells.map(s=>o.createRangeOn(s)),{backward:n.backward})})}getFocusCell(){const n=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return n&&n.is("element","tableCell")?n:null}getAnchorCell(){const t=this.editor.model.document.selection,n=q(t.getRanges()).getContainedElement();return n&&n.is("element","tableCell")?n:null}_defineSelectionConverter(){const t=this.editor,e=new Set;t.conversion.for("editingDowncast").add(o=>o.on("selection",(s,l,a)=>{const r=a.writer;n(r);const c=this.getSelectedTableCells();if(!c)return;for(const u of c){const m=a.mapper.toViewElement(u);r.addClass("ck-editor__editable_selected",m),e.add(m)}const d=a.mapper.toViewElement(c[c.length-1]);r.setSelection(d,0)},{priority:"lowest"}));function n(o){for(const s of e)o.removeClass("ck-editor__editable_selected",s);e.clear()}}_enablePluginDisabling(){const t=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;t.model.change(n=>{const o=n.createPositionAt(e[0],0),s=t.model.schema.getNearestSelectionRange(o);n.setSelection(s)})}})}_handleDeleteContent(t,e){const n=this.editor.plugins.get(R),o=e[0],s=e[1],l=this.editor.model,a=!s||s.direction=="backward",r=n.getSelectedTableCells(o);r.length&&(t.stop(),l.change(c=>{const d=r[a?r.length-1:0];l.change(m=>{for(const h of r)l.deleteContent(m.createSelection(h,"in"))});const u=l.schema.getNearestSelectionRange(c.createPositionAt(d,0));o.is("documentSelection")?c.setSelection(u):o.setTo(u)}))}_handleInsertTextEvent(t,e){const n=this.editor,o=this.getSelectedTableCells();if(!o)return;const s=n.editing.view,l=n.editing.mapper,a=o.map(r=>s.createRangeOn(l.toViewElement(r)));e.selection=s.createSelection(a)}_getCellsToSelect(t,e){const n=this.editor.plugins.get("TableUtils"),o=n.getCellLocation(t),s=n.getCellLocation(e),l=Math.min(o.row,s.row),a=Math.max(o.row,s.row),r=Math.min(o.column,s.column),c=Math.max(o.column,s.column),d=new Array(a-l+1).fill(null).map(()=>[]),u={startRow:l,endRow:a,startColumn:r,endColumn:c};for(const{row:f,cell:p}of new y(t.findAncestor("table"),u))d[f-l].push(p);const m=s.row<o.row,h=s.column<o.column;return m&&d.reverse(),h&&d.forEach(f=>f.reverse()),{cells:d.flat(),backward:m||h}}}class La extends _{static get pluginName(){return"TableClipboard"}static get requires(){return[Re,Ie,K,R]}init(){const t=this.editor,e=t.editing.view.document;this.listenTo(e,"copy",(n,o)=>this._onCopyCut(n,o)),this.listenTo(e,"cut",(n,o)=>this._onCopyCut(n,o)),this.listenTo(t.model,"insertContent",(n,[o,s])=>this._onInsertContent(n,o,s),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(t,e){const n=this.editor.editing.view,o=this.editor.plugins.get(K),s=this.editor.plugins.get(Re);o.getSelectedTableCells()&&(t.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),t.stop(),this.editor.model.enqueueChange({isUndoable:t.name==="cut"},()=>{const l=s._copySelectedFragmentWithMarkers(t.name,this.editor.model.document.selection,()=>o.getSelectionAsFragment());n.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(l),method:t.name})})))}_onInsertContent(t,e,n){if(n&&!n.is("documentSelection"))return;const o=this.editor.model,s=this.editor.plugins.get(R),l=this.editor.plugins.get(Re),a=this.getTableIfOnlyTableInContent(e,o);if(!a)return;const r=s.getSelectionAffectedTableCells(o.document.selection);if(!r.length){et(a,s);return}t.stop(),e.is("documentFragment")?l._pasteMarkersIntoTransformedElement(e.markers,c=>this._replaceSelectedCells(a,r,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,r,c)})}_replaceSelectedCells(t,e,n){const o=this.editor.plugins.get(R),s={width:o.getColumns(t),height:o.getRows(t)},l=Fa(e,s,n,o),a=l.lastRow-l.firstRow+1,r=l.lastColumn-l.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,s.height)-1,endColumn:Math.min(r,s.width)-1};t=Tn(t,c,n);const d=e[0].findAncestor("table"),u=this._replaceSelectedCellsWithPasted(t,s,d,l,n);if(this.editor.plugins.get("TableSelection").isEnabled){const m=o.sortRanges(u.map(h=>n.createRangeOn(h)));n.setSelection(m)}else n.setSelection(u[0],0);return d}_replaceSelectedCellsWithPasted(t,e,n,o,s){const{width:l,height:a}=e,r=Ua(t,l,a),c=[...new y(n,{startRow:o.firstRow,endRow:o.lastRow,startColumn:o.firstColumn,endColumn:o.lastColumn,includeAllSlots:!0})],d=[];let u;for(const C of c){const{row:w,column:v}=C;v===o.firstColumn&&(u=C.getPositionBefore());const E=w-o.firstRow,V=v-o.firstColumn,S=r[E%a][V%l],J=S?s.cloneElement(S):null,P=this._replaceTableSlotCell(C,J,u,s);P&&(En(P,w,v,o.lastRow,o.lastColumn,s),d.push(P),u=s.createPositionAfter(P))}const m=parseInt(n.getAttribute("headingRows")||"0"),h=parseInt(n.getAttribute("headingColumns")||"0"),f=o.firstRow<m&&m<=o.lastRow,p=o.firstColumn<h&&h<=o.lastColumn;if(f){const C={first:o.firstColumn,last:o.lastColumn},w=We(n,m,C,s,o.firstRow);d.push(...w)}if(p){const C={first:o.firstRow,last:o.lastRow},w=Ke(n,h,C,s);d.push(...w)}return d}_replaceTableSlotCell(t,e,n,o){const{cell:s,isAnchor:l}=t;return l&&o.remove(s),e?(o.insert(e,n),e):null}getTableIfOnlyTableInContent(t,e){if(!t.is("documentFragment")&&!t.is("element"))return null;if(t.is("element","table"))return t;if(t.childCount==1&&t.getChild(0).is("element","table"))return t.getChild(0);const n=e.createRangeIn(t);for(const o of n.getItems())if(o.is("element","table")){const s=e.createRange(n.start,e.createPositionBefore(o));if(e.hasContent(s,{ignoreWhitespaces:!0}))return null;const l=e.createRange(e.createPositionAfter(o),n.end);return e.hasContent(l,{ignoreWhitespaces:!0})?null:o}return null}}function Fa(i,t,e,n){const o=i[0].findAncestor("table"),s=n.getColumnIndexes(i),l=n.getRowIndexes(i),a={firstColumn:s.first,lastColumn:s.last,firstRow:l.first,lastRow:l.last},r=i.length===1;return r&&(a.lastRow+=t.height-1,a.lastColumn+=t.width-1,Pa(o,a.lastRow+1,a.lastColumn+1,n)),r||!n.isSelectionRectangular(i)?Ha(o,a,e):(a.lastRow=Vn(o,a),a.lastColumn=Bn(o,a)),a}function Pa(i,t,e,n){const o=n.getColumns(i),s=n.getRows(i);e>o&&n.insertColumns(i,{at:o,columns:e-o}),t>s&&n.insertRows(i,{at:s,rows:t-s})}function Ua(i,t,e){const n=new Array(e).fill(null).map(()=>new Array(t).fill(null));for(const{column:o,row:s,cell:l}of new y(i))n[s][o]=l;return n}function Ha(i,t,e){const{firstRow:n,lastRow:o,firstColumn:s,lastColumn:l}=t,a={first:n,last:o},r={first:s,last:l};Ke(i,s,a,e),Ke(i,l+1,a,e),We(i,n,r,e),We(i,o+1,r,e,n)}function We(i,t,e,n,o=0){return t<1?void 0:xn(i,t,o).filter(({column:a,cellWidth:r})=>Fn(a,r,e)).map(({cell:a})=>Sn(a,t,n))}function Ke(i,t,e,n){return t<1?void 0:An(i,t).filter(({row:l,cellHeight:a})=>Fn(l,a,e)).map(({cell:l,column:a})=>Rn(l,a,t,n))}function Fn(i,t,e){const n=i+t-1,{first:o,last:s}=e,l=i>=o&&i<=s,a=i<o&&n>=o;return l||a}class Oa extends _{static get pluginName(){return"TableKeyboard"}static get requires(){return[K,R]}init(){const t=this.editor,n=t.editing.view.document,o=t.t;this.listenTo(n,"arrowKey",(...s)=>this._onArrowKey(...s),{context:"table"}),this.listenTo(n,"tab",(...s)=>this._handleTabOnSelectedTable(...s),{context:"figure"}),this.listenTo(n,"tab",(...s)=>this._handleTab(...s),{context:["th","td"]}),t.accessibility.addKeystrokeInfoGroup({id:"table",label:o("Keystrokes that can be used in a table cell"),keystrokes:[{label:o("Move the selection to the next cell"),keystroke:"Tab"},{label:o("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:o("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:o("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(t,e){const n=this.editor,s=n.model.document.selection.getSelectedElement();!s||!s.is("element","table")||(e.preventDefault(),e.stopPropagation(),t.stop(),n.model.change(l=>{l.setSelection(l.createRangeIn(s.getChild(0).getChild(0)))}))}_handleTab(t,e){const n=this.editor,o=this.editor.plugins.get(R),s=this.editor.plugins.get("TableSelection"),l=n.model.document.selection,a=!e.shiftKey;let r=o.getTableCellsContainingSelection(l)[0];if(r||(r=s.getFocusCell()),!r)return;e.preventDefault(),e.stopPropagation(),t.stop();const c=r.parent,d=c.parent,u=d.getChildIndex(c),m=c.getChildIndex(r),h=m===0;if(!a&&h&&u===0){n.model.change(w=>{w.setSelection(w.createRangeOn(d))});return}const f=m===c.childCount-1,p=u===o.getRows(d)-1;if(a&&p&&f&&(n.execute("insertTableRowBelow"),u===o.getRows(d)-1)){n.model.change(w=>{w.setSelection(w.createRangeOn(d))});return}let C;if(a&&f)C=d.getChild(u+1).getChild(0);else if(!a&&h){const w=d.getChild(u-1);C=w.getChild(w.childCount-1)}else C=c.getChild(m+(a?1:-1));n.model.change(w=>{w.setSelection(w.createRangeIn(C))})}_onArrowKey(t,e){const n=this.editor,o=e.keyCode,s=Go(o,n.locale.contentLanguageDirection);this._handleArrowKeys(s,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),t.stop())}_handleArrowKeys(t,e){const n=this.editor.plugins.get(R),o=this.editor.plugins.get("TableSelection"),s=this.editor.model,l=s.document.selection,a=["right","down"].includes(t),r=n.getSelectedTableCells(l);if(r.length){let d;return e?d=o.getFocusCell():d=a?r[r.length-1]:r[0],this._navigateFromCellInDirection(d,t,e),!0}const c=l.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!l.isCollapsed)if(e){if(l.isBackward==a&&!l.containsEntireContent(c))return!1}else{const d=l.getSelectedElement();if(!d||!s.schema.isObject(d))return!1}return this._isSelectionAtCellEdge(l,c,a)?(this._navigateFromCellInDirection(c,t,e),!0):!1}_isSelectionAtCellEdge(t,e,n){const o=this.editor.model,s=this.editor.model.schema,l=n?t.getLastPosition():t.getFirstPosition();if(!s.getLimitElement(l).is("element","tableCell"))return o.createPositionAt(e,n?"end":0).isTouching(l);const a=o.createSelection(l);return o.modifySelection(a,{direction:n?"forward":"backward"}),l.isEqual(a.focus)}_navigateFromCellInDirection(t,e,n=!1){const o=this.editor.model,s=t.findAncestor("table"),l=[...new y(s,{includeAllSlots:!0})],{row:a,column:r}=l[l.length-1],c=l.find(({cell:v})=>v==t);let{row:d,column:u}=c;switch(e){case"left":u--;break;case"up":d--;break;case"right":u+=c.cellWidth;break;case"down":d+=c.cellHeight;break}const m=d<0||d>a,h=u<0&&d<=0,f=u>r&&d>=a;if(m||h||f){o.change(v=>{v.setSelection(v.createRangeOn(s))});return}u<0?(u=n?0:r,d--):u>r&&(u=n?r:0,d++);const p=l.find(v=>v.row==d&&v.column==u).cell,C=["right","down"].includes(e),w=this.editor.plugins.get("TableSelection");if(n&&w.isEnabled){const v=w.getAnchorCell()||t;w.setCellSelection(v,p)}else{const v=o.createPositionAt(p,C?0:"end");o.change(E=>{E.setSelection(v)})}}}class Ma extends Zo{constructor(){super(...arguments);g(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class Na extends _{static get pluginName(){return"TableMouse"}static get requires(){return[K,R]}init(){this.editor.editing.view.addObserver(Ma),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const t=this.editor,e=t.plugins.get(R);let n=!1;const o=t.plugins.get(K);this.listenTo(t.editing.view.document,"mousedown",(s,l)=>{const a=t.model.document.selection;if(!this.isEnabled||!o.isEnabled||!l.domEvent.shiftKey)return;const r=o.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!r)return;const c=this._getModelTableCellFromDomEvent(l);c&&Pt(r,c)&&(n=!0,o.setCellSelection(r,c),l.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{n=!1}),this.listenTo(t.editing.view.document,"selectionChange",s=>{n&&s.stop()},{priority:"highest"})}_enableMouseDragSelection(){const t=this.editor;let e,n,o=!1,s=!1;const l=t.plugins.get(K);this.listenTo(t.editing.view.document,"mousedown",(a,r)=>{!this.isEnabled||!l.isEnabled||r.domEvent.shiftKey||r.domEvent.ctrlKey||r.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(r))}),this.listenTo(t.editing.view.document,"mousemove",(a,r)=>{if(!r.domEvent.buttons||!e)return;const c=this._getModelTableCellFromDomEvent(r);c&&Pt(e,c)&&(n=c,!o&&n!=e&&(o=!0)),o&&(s=!0,l.setCellSelection(e,n),r.preventDefault())}),this.listenTo(t.editing.view.document,"mouseup",()=>{o=!1,s=!1,e=null,n=null}),this.listenTo(t.editing.view.document,"selectionChange",a=>{s&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(t){const e=t.target,n=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor("tableCell",{includeSelf:!0})}}function Pt(i,t){return i.parent.parent==t.parent.parent}class Da extends _{static get requires(){return[Sa,Va,K,Na,Oa,La,Ge]}static get pluginName(){return"Table"}}function za(i){const t=i.getSelectedElement();return t&&Pn(t)?t:null}function Wa(i){const t=i.getFirstPosition();if(!t)return null;let e=t.parent;for(;e;){if(e.is("element")&&Pn(e))return e;e=e.parent}return null}function Pn(i){return!!i.getCustomProperty("table")&&Je(i)}class Ka extends _{static get requires(){return[lt]}static get pluginName(){return"TableToolbar"}afterInit(){const t=this.editor,e=t.t,n=t.plugins.get(lt),o=t.config.get("table.contentToolbar"),s=t.config.get("table.tableToolbar");o&&n.register("tableContent",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:Wa}),s&&n.register("table",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:za})}}const qa=qe(()=>je(()=>import("./side-form-create-DFAqnpzu.min.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ja=qe(()=>je(()=>import("./side-form-update-DBDhd1v7.min.js"),__vite__mapDeps([7,1,2,3,4,5,8,6]))),Ga=qe(()=>je(()=>import("./form_field-Cfs-92DN.min.js"),__vite__mapDeps([8,1,2,3,4,5,6]))),Ja={components:{datatabble:Zn,"vue-medialibrary-field":Gn,color_picker:Jn,static_field:Yn,Vue3TagsInput:$n,Ckeditor:$o,SideFormCreate:qa,SideFormUpdate:ja,close_icon:Wn,delete_icon:Kn,car_icon:jn,route_icon:qn,form_field:Ga},name:"Products categories",emits:["callback"],setup(i,{emit:t}){const e=U(!1),n=U(!1),o=U({id:0,picture:"/uploads/img/placeholder.png",content_langs:{}}),s=U("english"),l=U([]),a=U(Y("General")),r=U({}),c=U(!1),d=U([{title:Y("Default"),value:"default"},{title:Y("Modern"),value:"modern"}]),u=U([Y("General"),Y("SEO")]),m=i.conf.url+i.path+"?load=json",h=()=>{Nn(m).then(V=>{var S=JSON.parse(JSON.stringify(V));o.value=S.item??o.value,r.value=S,l.value=r.value.categories})};h();const f=()=>{h(),e.value=!1},p=()=>{var V=new URLSearchParams;let S=JSON.parse(JSON.stringify(o.value)),J=Object.keys(S),P,tt;for(let se=0;se<J.length;se++)P=J[se],tt=typeof S[P]=="object"||typeof S[P]=="array"?JSON.stringify(S[P]):S[P],V.append("params["+P+"]",tt);let nt=S.id>0?"update":"create";V.append("type","Blog."+nt),Dn(V,"/api/"+nt).then(se=>{zn(se)})},C=()=>{t("callback")},w=(V,S)=>(o.value.content_langs[S]=V.content_langs[S]??{},o.value.content_langs[S]),v=Ps,E=U({plugins:[As,Ys,Bs,Xo,pe,nn,Li,El,Qo,Xi,xi,Da,Ka],toolbar:["undo","redo","|","bold","italic","heading","fontSize","fontColor","link","insertTable","bulletedList","numberedList"]});return{editor:v,editorConfig:E,getLang:w,showAddCategory:e,showEditSide:n,closeSide:f,content:r,templates:d,tabs:u,categories:l,activeItem:o,activeTab:a,translate:Y,collapsed:c,seoLang:s,save:p,back:C}},props:["conf","path","system_setting","business_setting","langs","setting","item"]},Ya={class:"w-full flex overflow-auto"},Za={class:"w-full relative"},$a={key:0,id:"kt_app_content_container",class:"app-container container-xxl"},Xa={class:"action form d-flex flex-column flex-lg-row"},Qa={class:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10",style:{"min-width":"300px"}},er={class:"card card-flush py-4"},tr={class:"card-header"},nr={class:"card-title"},or=["textContent"],sr={class:"card-body text-center pt-0"},ir={class:"image-input image-input-empty image-input-outline image-input-placeholder mb-3 w-full"},lr=["textContent"],ar={class:"card card-flush py-4"},rr={class:"card-header"},cr={class:"card-title"},dr=["textContent"],ur={class:"card-toolbar"},mr={class:"card-body pt-0"},hr=["textContent"],gr={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},fr={class:"nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-semibold mb-n2"},pr={class:"nav-item"},br=["onClick","textContent"],wr={class:"tab-content"},Cr={key:0,class:"tab-pane fade show active"},_r={class:"d-flex flex-column gap-7 gap-lg-10"},vr={class:"card card-flush py-4"},kr={class:"card-header flex flex-nowrap"},yr={class:"card-title w-full"},Ir=["textContent"],Tr={class:"flex gap-10 flex-none"},xr=["onClick"],Sr=["src"],Ar=["textContent"],Rr={class:"w-full"},Er={key:0,class:"card-body pt-0"},Vr={class:"mb-10 fv-row"},Br={class:"required form-label"},Lr=["textContent"],Fr=["textContent"],Pr={class:"position-relative flex"},Ur=["value"],Hr=["onUpdate:modelValue"],Or=["textContent"],Mr={class:"mb-10 fv-row"},Nr={class:"required form-label"},Dr=["textContent"],zr=["textContent"],Wr=["onUpdate:modelValue"],Kr=["textContent"],qr={class:"mb-10 fv-row"},jr={class:"required form-label"},Gr=["textContent"],Jr=["textContent"],Yr=["onUpdate:modelValue"],Zr=["textContent"],$r={class:"form-label gap-6 flex"},Xr=["textContent"],Qr=["textContent"],ec=["textContent"],tc={key:1,class:"tab-pane fade show active"},nc={class:"d-flex flex-column gap-7 gap-lg-10"},oc={class:"w-full"},sc={class:"card-header flex flex-nowrap"},ic={class:"w-full card-title"},lc=["textContent"],ac={class:"flex gap-10 flex-none"},rc={class:"py-5"},cc=["onClick"],dc=["src"],uc=["textContent"],mc={key:0,class:"card-body pt-0"},hc={class:"mb-10"},gc=["textContent"],fc=["placeholder","onUpdate:modelValue"],pc=["textContent"],bc={class:"mb-10"},wc=["textContent"],Cc=["onUpdate:modelValue"],_c=["textContent"],vc=["textContent"],kc=["onUpdate:modelValue"],yc=["textContent"],Ic={class:"d-flex justify-content-end"},Tc=["textContent"],xc=["textContent"];function Sc(i,t,e,n,o,s){const l=ue("close_icon"),a=ue("vue-medialibrary-field"),r=ue("form_field"),c=ue("ckeditor");return x(),A("div",Ya,[b("div",Za,[Ae(l,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:n.back},null,8,["onClick"]),n.activeItem?(x(),A("div",$a,[b("div",Xa,[b("div",Qa,[b("div",er,[b("div",tr,[b("div",nr,[b("h2",{textContent:k(n.translate("Main picture"))},null,8,or)])]),b("div",sr,[b("div",ir,[e.conf?(x(),Mn(a,{onChanged:t[0]||(t[0]=d=>{n.activeItem.picture=d}),key:n.activeItem,name:"params[picture]",filepath:n.activeItem.picture??"",api_url:e.conf.url},null,8,["filepath","api_url"])):z("",!0)]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("allowed media types msg"))},null,8,lr)])]),b("div",ar,[b("div",rr,[b("div",cr,[b("h2",{textContent:k(n.translate("Status"))},null,8,dr)]),b("div",ur,[b("div",{class:me([n.activeItem.status=="on"?"bg-success":"bg-danger","rounded-circle w-15px h-15px"])},null,2)])]),b("div",mr,[Ae(r,{item:n.activeItem,column:{required:!0,key:"status",title:n.translate("status"),column_type:"select",text_key:"title",column_key:"value",data:[{value:null,title:n.translate("Pending")},{value:"on",title:n.translate("Active")}]}},null,8,["item","column"]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Set the item status"))},null,8,hr)])])]),b("div",gr,[b("ul",fr,[(x(!0),A(ie,null,le(n.tabs,d=>(x(),A("li",pr,[b("a",{class:me(["nav-link text-active-primary pb-4",d==n.activeTab?"active":""]),onClick:u=>n.activeTab=d,href:"javascript:;",textContent:k(d)},null,10,br)]))),256))]),b("div",wr,[n.activeTab==n.translate("General")?(x(),A("div",Cr,[b("div",_r,[b("div",vr,[b("div",kr,[b("div",yr,[b("h2",{textContent:k(n.translate("General"))},null,8,Ir)]),b("ul",Tr,[(x(!0),A(ie,null,le(e.langs,d=>(x(),A("li",{class:"text-lg flex py-5 gap-2 cursor-pointer",onClick:u=>n.seoLang=d.language_code},[b("img",{src:d.icon,class:"rounded-full w-10 h-10 border-1 border border-gray-600 p-1"},null,8,Sr),b("a",{href:"javascript:;",class:me(d.language_code==n.seoLang?"text-danger font-bold":"opacity-75 text-gray-400"),textContent:k(d.language_code)},null,10,Ar)],8,xr))),256))])]),b("div",Rr,[(x(!0),A(ie,null,le(e.langs,d=>(x(),A("div",{key:n.seoLang},[d&&n.seoLang==d.language_code?(x(),A("div",Er,[b("div",Vr,[b("label",Br,[b("span",{textContent:k(n.translate("Path"))},null,8,Lr),b("strong",{class:"px-4",textContent:k(d.name)},null,8,Fr)]),b("div",Pr,[b("input",{disabled:!0,value:e.conf.url,class:"bg-gray-200 form-control-solid px-4"},null,8,Ur),Z(b("input",{type:"text","onUpdate:modelValue":u=>n.getLang(n.activeItem,d.language_code).prefix=u,class:"form-control form-control-solid"},null,8,Hr),[[$,n.getLang(n.activeItem,d.language_code).prefix]])]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("URL path for the item webpage"))},null,8,Or)]),b("div",Mr,[b("label",Nr,[b("span",{textContent:k(n.translate("Name"))},null,8,Dr),b("strong",{class:"px-4",textContent:k(n.translate(d.language_code))},null,8,zr)]),Z(b("input",{type:"text",class:"form-control mb-2","onUpdate:modelValue":u=>n.activeItem.content_langs[d.language_code].title=u},null,8,Wr),[[$,n.activeItem.content_langs[d.language_code].title]]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Name is required and recommended to be unique"))},null,8,Kr)]),b("div",qr,[b("label",jr,[b("span",{textContent:k(n.translate("Short"))},null,8,Gr),b("strong",{class:"px-4",textContent:k(n.translate(d.language_code))},null,8,Jr)]),Z(b("textarea",{"onUpdate:modelValue":u=>n.activeItem.content_langs[d.language_code].short=u,class:""},null,8,Yr),[[$,n.activeItem.content_langs[d.language_code].short]]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Used for articles list"))},null,8,Zr)]),b("div",null,[b("label",$r,[b("span",{textContent:k(n.translate("Content"))},null,8,Xr),b("strong",{class:"px-4",textContent:k(n.translate(d.language_code))},null,8,Qr)]),Ae(c,{modelValue:n.activeItem.content_langs[d.language_code].content,"onUpdate:modelValue":u=>n.activeItem.content_langs[d.language_code].content=u,editor:n.editor,config:n.editorConfig},null,8,["modelValue","onUpdate:modelValue","editor","config"]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Set a description to the item for better visibility"))},null,8,ec)])])):z("",!0)]))),128))])])])])):z("",!0),n.activeTab==n.translate("SEO")?(x(),A("div",tc,[b("div",nc,[b("div",oc,[(x(!0),A(ie,null,le(e.langs,d=>(x(),A("div",null,[n.seoLang==d.language_code?(x(),A("div",{key:d,class:"card card-flush py-4"},[b("div",sc,[b("div",ic,[b("h2",{textContent:k(n.translate("Meta Options"))},null,8,lc)]),b("ul",ac,[(x(!0),A(ie,null,le(e.langs,u=>(x(),A("li",rc,[i.key?(x(),A("div",{key:0,class:"text-lg flex gap-2 cursor-pointer",onClick:m=>n.seoLang=u.language_code},[b("img",{src:u.icon,class:"rounded-full w-10 h-10 border-1 border border-gray-600 p-1"},null,8,dc),b("a",{href:"javascript:;",class:me(u.language_code==n.seoLang?"text-danger font-bold":"opacity-75 text-gray-400"),textContent:k(u.name)},null,10,uc)],8,cc)):z("",!0)]))),256))])]),d?(x(),A("div",mc,[b("div",hc,[b("label",{class:"form-label",textContent:k(n.translate("Meta Tag Title")+" ("+d.name+")")},null,8,gc),Z(b("input",{type:"text",class:"form-control mb-2",name:"meta_title",placeholder:n.translate("Meta tag name"),"onUpdate:modelValue":u=>n.activeItem.content_langs[d.language_code].seo_title=u},null,8,fc),[[$,n.activeItem.content_langs[d.language_code].seo_title]]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Set a meta tag title. Recommended to be simple and precise keywords")+" ("+d.name+")")},null,8,pc)]),b("div",bc,[b("label",{class:"form-label",textContent:k(n.translate("Meta Tag Description"))},null,8,wc),Z(b("textarea",{"onUpdate:modelValue":u=>n.activeItem.content_langs[d.language_code].seo_desc=u,class:""},null,8,Cc),[[$,n.activeItem.content_langs[d.language_code].seo_desc]]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Set a meta tag description to the item for increased SEO ranking"))},null,8,_c)]),b("div",null,[b("label",{class:"form-label",textContent:k(n.translate("Meta Tag Keywords"))},null,8,vc),Z(b("input",{id:"kt_ecommerce_add_item_meta_keywords",class:"form-control","onUpdate:modelValue":u=>n.activeItem.content_langs[d.language_code].seo_keywords=u},null,8,kc),[[$,n.activeItem.content_langs[d.language_code].seo_keywords]]),b("div",{class:"text-muted fs-7",textContent:k(n.translate("Set a list of keywords that the item is related to. Separate the keywords by adding a comma <code>,</code> between each keyword"))},null,8,yc)])])):z("",!0)])):z("",!0)]))),256))])])])):z("",!0)]),b("div",Ic,[b("a",{href:"javascript:;",onClick:t[1]||(t[1]=(...d)=>n.back&&n.back(...d)),class:"btn btn-light me-5",textContent:k(n.translate("Cancel"))},null,8,Tc),b("button",{onClick:t[2]||(t[2]=(...d)=>n.save&&n.save(...d)),class:"btn btn-primary"},[b("span",{class:"indicator-label",textContent:k(n.translate("Save Changes"))},null,8,xc)])])])])])):z("",!0)])])}const Nc=On(Ja,[["render",Sc]]);export{Nc as default};
