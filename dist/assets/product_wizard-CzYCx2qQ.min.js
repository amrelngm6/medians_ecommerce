const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["side-form-create-CYBl-84Z.min.js","Close-BjOQ1kqe.min.js","index.min.js","index.min.css","Field-EMplKIN-.min.js","toNumber-BkRaARbo.min.js","Field.min.css","side-form-update-BP10sB42.min.js","form_field-Cd7MZxp_.min.js","multiselect-B8bsXApd.min.js"])))=>i.map(i=>d[i]);
var Gn=Object.defineProperty;var Jn=(i,n,e)=>n in i?Gn(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e;var p=(i,n,e)=>Jn(i,typeof n!="symbol"?n+"":n,e);import{_ as Yn,ai as Zn,r as B,t as L,a as D,o as k,c as x,d as u,g as T,e as C,u as ie,b as R,n as we,F as G,f as J,w as z,v as W,z as Ze,A as Xe,j as Xn,l as Qn,G as $n}from"./index.min.js";import eo from"./Close-BjOQ1kqe.min.js";import{d as to}from"./trash-CBmbfHzq.min.js";import{r as no}from"./route-C5YfD9_P.min.js";import{c as oo}from"./car-CsAKjkB1.min.js";import{f as so}from"./Field-EMplKIN-.min.js";import{c as io,s as lo}from"./color-picker-Gw2PYG2F.min.js";import{D as ao}from"./vue3-easy-data-table.es-3BuEiyD5.min.js";import{e as ro}from"./vue3-tags-input.esm-NBiugKOq.min.js";import{b as co,t as uo,P as y,i as O,B as N,M as Z,C as S,E as mo,a as ho,c as ge,d as go,g as fo,e as po,f as bo,n as wo,h as _o,j as Co,R as dt,D as ut,k as vo,S as yo,T as ko,l as xo,I as Io,m as To,p as So,o as Ao,N as Ro,A as Eo,q as Vo,r as Bo,s as Lo,u as Po,v as X,w as Te,x as ue,y as Se,z as Ae,F as fe,G as Re,H as Fo,J as Uo,K as Ho,L as Oo,O as Mo,Q as No,U as Wt,V as $,W as Do,X as Qe,Y as Ee,Z as qt,_ as ce,$ as jt,a0 as zo,a1 as Wo,a2 as Kt,a3 as $e,a4 as qo,a5 as Me,a6 as Gt,a7 as Jt,a8 as de,a9 as pe,aa as be,ab as Ve,ac as Be,ad as jo,ae as et,af as Yt,ag as Zt,ah as Ko,ai as Go,aj as Jo,ak as mt,al as Yo,am as Zo,an as Xo,ao as Qo,ap as $o,aq as es,ar as tt,as as ts,at as ns,au as Xt,av as os,aw as Qt,ax as ht,ay as Pe,az as ss,aA as is,aB as ls,aC as as,aD as rs,aE as cs,aF as ds}from"./ckeditor5-BgIaPkh6.min.js";import"./toNumber-BkRaARbo.min.js";import"./multiselect-B8bsXApd.min.js";function us(i,n,e){var t=i.length;return e=e===void 0?t:e,!n&&e>=t?i:co(i,n,e)}var ms="\\ud800-\\udfff",hs="\\u0300-\\u036f",gs="\\ufe20-\\ufe2f",fs="\\u20d0-\\u20ff",ps=hs+gs+fs,bs="\\ufe0e\\ufe0f",ws="\\u200d",_s=RegExp("["+ws+ms+ps+bs+"]");function $t(i){return _s.test(i)}function Cs(i){return i.split("")}var en="\\ud800-\\udfff",vs="\\u0300-\\u036f",ys="\\ufe20-\\ufe2f",ks="\\u20d0-\\u20ff",xs=vs+ys+ks,Is="\\ufe0e\\ufe0f",Ts="["+en+"]",Ne="["+xs+"]",De="\\ud83c[\\udffb-\\udfff]",Ss="(?:"+Ne+"|"+De+")",tn="[^"+en+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",on="[\\ud800-\\udbff][\\udc00-\\udfff]",As="\\u200d",sn=Ss+"?",ln="["+Is+"]?",Rs="(?:"+As+"(?:"+[tn,nn,on].join("|")+")"+ln+sn+")*",Es=ln+sn+Rs,Vs="(?:"+[tn+Ne+"?",Ne,nn,on,Ts].join("|")+")",Bs=RegExp(De+"(?="+De+")|"+Vs+Es,"g");function Ls(i){return i.match(Bs)||[]}function Ps(i){return $t(i)?Ls(i):Cs(i)}function Fs(i){return function(n){n=uo(n);var e=$t(n)?Ps(n):void 0,t=e?e[0]:n.charAt(0),o=e?us(e,1).join(""):n.slice(1);return t[i]()+o}}var Us=Fs("toUpperCase");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class an extends S{constructor(e,t){super(e);p(this,"attributeKey");this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,l=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(s.isCollapsed)l?a.setSelectionAttribute(this.attributeKey,!0):a.removeSelectionAttribute(this.attributeKey);else{const r=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const c of r)l?a.setAttribute(this.attributeKey,l,c):a.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,o=e.document.selection;if(o.isCollapsed)return o.hasAttribute(this.attributeKey);for(const s of o.getRanges())for(const l of s.getItems())if(t.checkAttribute(l,this.attributeKey))return l.hasAttribute(this.attributeKey);return!1}}const le="bold";class Hs extends y{static get pluginName(){return"BoldEditing"}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:le}),n.model.schema.setAttributeProperties(le,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:le,view:"strong",upcastAlso:["b",t=>{const o=t.getStyle("font-weight");return o&&(o=="bold"||Number(o)>=600)?{name:!0,styles:["font-weight"]}:null}]}),n.commands.add(le,new an(n,le)),n.keystrokes.set("CTRL+B",le),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}function rn({editor:i,commandName:n,plugin:e,icon:t,label:o,keystroke:s}){return l=>{const a=i.commands.get(n),r=new l(i.locale);return r.set({label:o,icon:t,keystroke:s,isToggleable:!0}),r.bind("isEnabled").to(a,"isEnabled"),r.bind("isOn").to(a,"value"),r instanceof Z?r.set({role:"menuitemcheckbox"}):r.set({tooltip:!0}),e.listenTo(r,"execute",()=>{i.execute(n),i.editing.view.focus()}),r}}const Fe="bold";class Os extends y{static get pluginName(){return"BoldUI"}init(){const n=this.editor,e=n.locale.t,t=rn({editor:n,commandName:Fe,plugin:this,icon:O.bold,label:e("Bold"),keystroke:"CTRL+B"});n.ui.componentFactory.add(Fe,()=>t(N)),n.ui.componentFactory.add("menuBar:"+Fe,()=>t(Z))}}class Ms extends y{static get requires(){return[Hs,Os]}static get pluginName(){return"Bold"}}const ae="italic";class Ns extends y{static get pluginName(){return"ItalicEditing"}init(){const n=this.editor,e=this.editor.t;n.model.schema.extend("$text",{allowAttributes:ae}),n.model.schema.setAttributeProperties(ae,{isFormatting:!0,copyOnEnter:!0}),n.conversion.attributeToElement({model:ae,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),n.commands.add(ae,new an(n,ae)),n.keystrokes.set("CTRL+I",ae),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Italic text"),keystroke:"CTRL+I"}]})}}var Ds='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const Ue="italic";class zs extends y{static get pluginName(){return"ItalicUI"}init(){const n=this.editor,e=n.locale.t,t=rn({editor:n,commandName:Ue,plugin:this,icon:Ds,keystroke:"CTRL+I",label:e("Italic")});n.ui.componentFactory.add(Ue,()=>t(N)),n.ui.componentFactory.add("menuBar:"+Ue,()=>t(Z))}}class Ws extends y{static get requires(){return[Ns,zs]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qs extends bo{constructor(e,t){super(e);p(this,"view");p(this,"_toolbarConfig");p(this,"_elementReplacer");this.view=t,this._toolbarConfig=wo(e.config.get("toolbar")),this._elementReplacer=new _o,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,o=this.view,s=t.editing.view,l=o.editable,a=s.document.getRoot();l.name=a.rootName,o.render();const r=l.element;this.setEditableElement(l.name,r),o.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(r),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),o.menuBarView&&this._initMenuBar(o.menuBarView),this._initDialogPluginIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,o=t.document.getRoot(),s=e.sourceElement;let l;const a=e.config.get("placeholder");a&&(l=typeof a=="string"?a:a[this.view.editable.name]),!l&&s&&s.tagName.toLowerCase()==="textarea"&&(l=s.getAttribute("placeholder")),l&&(o.placeholder=l),Co({view:t,element:o,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,t,o){const s=this.view.stickyPanel;if(s.isSticky){const l=new dt(s.element).height;t.viewportOffset.top+=l}else{const l=()=>{this.editor.editing.view.scrollToTheSelection(o)};this.listenTo(s,"change:isSticky",l),setTimeout(()=>{this.stopListening(s,"change:isSticky",l)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{const o=t.view;o.on("moveTo",(s,l)=>{if(!e.isSticky||o.wasMoved)return;const a=new dt(e.contentPanelElement);l[1]<a.bottom+ut.defaultOffset&&(l[1]=a.bottom+ut.defaultOffset)},{priority:"high"})},{priority:"low"})}}class js extends vo{constructor(e,t,o={}){super(e);p(this,"stickyPanel");p(this,"toolbar");p(this,"editable");this.stickyPanel=new yo(e),this.toolbar=new ko(e,{shouldGroupWhenFull:o.shouldToolbarGroupWhenFull}),o.useMenuBar&&(this.menuBarView=new xo(e)),this.editable=new Io(e,t)}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class Ks extends mo(ho){constructor(e,t={}){if(!ve(e)&&t.initialData!==void 0)throw new ge("editor-create-initial-data",null);super(t);p(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",Gs(e)),ve(e)&&(this.sourceElement=e),this.model.document.createRoot();const o=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),l=new js(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:o,useMenuBar:s.isVisible});this.ui=new qs(this,l),go(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(o=>{const s=new this(e,t);o(s.initPlugins().then(()=>s.ui.init(ve(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function Gs(i){return ve(i)?fo(i):i}function ve(i){return po(i)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Js extends S{constructor(n){super(n),this.affectsData=!1}execute(){const n=this.editor.model,e=n.document.selection;let t=n.schema.getLimitElement(e);if(e.containsEntireContent(t)||!gt(n.schema,t))do if(t=t.parent,!t)return;while(!gt(n.schema,t));n.change(o=>{o.setSelection(t,"in")})}}function gt(i,n){return i.isLimit(n)&&(i.checkChild(n,"$text")||i.checkChild(n,"paragraph"))}const Ys=So("Ctrl+A");class Zs extends y{static get pluginName(){return"SelectAllEditing"}init(){const n=this.editor,e=n.t,o=n.editing.view.document;n.commands.add("selectAll",new Js(n)),this.listenTo(o,"keydown",(s,l)=>{To(l)===Ys&&(n.execute("selectAll"),l.preventDefault())}),n.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}var Xs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class Qs extends y{static get pluginName(){return"SelectAllUI"}init(){const n=this.editor;n.ui.componentFactory.add("selectAll",()=>{const e=this._createButton(N);return e.set({tooltip:!0}),e}),n.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(Z))}_createButton(n){const e=this.editor,t=e.locale,o=e.commands.get("selectAll"),s=new n(e.locale),l=t.t;return s.set({label:l("Select all"),icon:Xs,keystroke:"Ctrl+A"}),s.bind("isEnabled").to(o,"isEnabled"),this.listenTo(s,"execute",()=>{e.execute("selectAll"),e.editing.view.focus()}),s}}class $s extends y{static get requires(){return[Zs,Qs]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cn extends S{constructor(e){super(e);p(this,"_stack",[]);p(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,o)=>{o[1]={...o[1]};const s=o[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,o)=>{o[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,o={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:o}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,o){const s=this.editor.model,l=s.document,a=[],r=e.map(d=>d.getTransformedByOperations(o)),c=r.flat();for(const d of r){const h=d.filter(m=>m.root!=l.graveyard).filter(m=>!ti(m,c));h.length&&(ei(h),a.push(h[0]))}a.length&&s.change(d=>{d.setSelection(a,{backward:t})})}_undo(e,t){const o=this.editor.model,s=o.document;this._createdBatches.add(t);const l=e.operations.slice().filter(a=>a.isDocumentOperation);l.reverse();for(const a of l){const r=a.baseVersion+1,c=Array.from(s.history.getOperations(r)),h=Ao([a.getReversed()],c,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let m of h){const f=m.affectedSelectable;f&&!o.canEditAt(f)&&(m=new Ro(m.baseVersion)),t.addOperation(m),o.applyOperation(m),s.history.setOperationAsUndone(a,m)}}}}function ei(i){i.sort((n,e)=>n.start.isBefore(e.start)?-1:1);for(let n=1;n<i.length;n++){const t=i[n-1].getJoined(i[n],!0);t&&(n--,i.splice(n,2,t))}}function ti(i,n){return n.some(e=>e!==i&&e.containsRange(i,!0))}class ni extends cn{execute(n=null){const e=n?this._stack.findIndex(s=>s.batch==n):this._stack.length-1,t=this._stack.splice(e,1)[0],o=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(o,()=>{this._undo(t.batch,o);const s=this.editor.model.document.history.getOperations(t.batch.baseVersion);this._restoreSelection(t.selection.ranges,t.selection.isBackward,s)}),this.fire("revert",t.batch,o),this.refresh()}}class oi extends cn{execute(){const n=this._stack.pop(),e=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(e,()=>{const o=n.batch.operations[n.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(o);this._restoreSelection(n.selection.ranges,n.selection.isBackward,s),this._undo(n.batch,e)}),this.refresh()}}class si extends y{constructor(){super(...arguments);p(this,"_undoCommand");p(this,"_redoCommand");p(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,t=e.t;this._undoCommand=new ni(e),this._redoCommand=new oi(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(o,s)=>{const l=s[0];if(!l.isDocumentOperation)return;const a=l.batch,r=this._redoCommand.createdBatches.has(a),c=this._undoCommand.createdBatches.has(a);this._batchRegistry.has(a)||(this._batchRegistry.add(a),a.isUndoable&&(r?this._undoCommand.addBatch(a):c||(this._undoCommand.addBatch(a),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(o,s,l)=>{this._redoCommand.addBatch(l)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class ii extends y{static get pluginName(){return"UndoUI"}init(){const n=this.editor,e=n.locale,t=n.t,o=e.uiLanguageDirection=="ltr"?O.undo:O.redo,s=e.uiLanguageDirection=="ltr"?O.redo:O.undo;this._addButtonsToFactory("undo",t("Undo"),"CTRL+Z",o),this._addButtonsToFactory("redo",t("Redo"),"CTRL+Y",s)}_addButtonsToFactory(n,e,t,o){const s=this.editor;s.ui.componentFactory.add(n,()=>{const l=this._createButton(N,n,e,t,o);return l.set({tooltip:!0}),l}),s.ui.componentFactory.add("menuBar:"+n,()=>this._createButton(Z,n,e,t,o))}_createButton(n,e,t,o,s){const l=this.editor,a=l.locale,r=l.commands.get(e),c=new n(a);return c.set({label:t,icon:s,keystroke:o}),c.bind("isEnabled").to(r,"isEnabled"),this.listenTo(c,"execute",()=>{l.execute(e),l.editing.view.focus()}),c}}class dn extends y{static get requires(){return[si,ii]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class li extends y{static get requires(){return[Eo,Vo,Bo,$s,Lo,Po,dn]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Le extends S{constructor(e,t){super(e);p(this,"attributeKey");this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,l=e.value,a=e.batch,r=c=>{if(s.isCollapsed)l?c.setSelectionAttribute(this.attributeKey,l):c.removeSelectionAttribute(this.attributeKey);else{const d=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const h of d)l?c.setAttribute(this.attributeKey,l,h):c.removeAttribute(this.attributeKey,h)}};a?t.enqueueChange(a,c=>{r(c)}):t.change(c=>{r(c)})}}const U="fontSize",H="fontFamily",j="fontColor",Y="fontBackgroundColor";function un(i,n){const e={model:{key:i,values:[]},view:{},upcastAlso:{}};for(const t of n)e.model.values.push(t.model),e.view[t.model]=t.view,t.upcastAlso&&(e.upcastAlso[t.model]=t.upcastAlso);return e}function mn(i){return n=>ri(n.getStyle(i))}function hn(i){return(n,{writer:e})=>e.createAttributeElement("span",{style:`${i}:${n}`},{priority:7})}function ai({dropdownView:i,colors:n,columns:e,removeButtonLabel:t,colorPickerLabel:o,documentColorsLabel:s,documentColorsCount:l,colorPickerViewConfig:a}){const r=i.locale,c=new Wt(r,{colors:n,columns:e,removeButtonLabel:t,colorPickerLabel:o,documentColorsLabel:s,documentColorsCount:l,colorPickerViewConfig:a});return i.colorSelectorView=c,i.panelView.children.add(c),c}function ri(i){return i.replace(/\s/g,"")}class ci extends Le{constructor(n){super(n,H)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gn(i){return i.map(di).filter(n=>n!==void 0)}function di(i){if(typeof i=="object")return i;if(i==="default")return{title:"Default",model:void 0};if(typeof i=="string")return ui(i)}function ui(i){const n=i.replace(/"|'/g,"").split(","),e=n[0],t=n.map(mi).join(", ");return{title:e,model:t,view:{name:"span",styles:{"font-family":t},priority:7}}}function mi(i){return i=i.trim(),i.indexOf(" ")>0&&(i=`'${i}'`),i}class hi extends y{static get pluginName(){return"FontFamilyEditing"}constructor(n){super(n),n.config.define(H,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const n=this.editor;n.model.schema.extend("$text",{allowAttributes:H}),n.model.schema.setAttributeProperties(H,{isFormatting:!0,copyOnEnter:!0});const e=gn(n.config.get("fontFamily.options")).filter(o=>o.model),t=un(H,e);n.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):n.conversion.attributeToElement(t),n.commands.add(H,new ci(n))}_prepareAnyValueConverters(){const n=this.editor;n.conversion.for("downcast").attributeToElement({model:H,view:(e,{writer:t})=>t.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),n.conversion.for("upcast").elementToAttribute({model:{key:H,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:H,value:e=>e.getAttribute("face")}})}}var ft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class gi extends y{static get pluginName(){return"FontFamilyUI"}init(){const n=this.editor,e=n.t,t=this._getLocalizedOptions(),o=n.commands.get(H),s=e("Font Family"),l=fi(t,o);n.ui.componentFactory.add(H,a=>{const r=X(a);return Te(r,l,{role:"menu",ariaLabel:s}),r.buttonView.set({label:s,icon:ft,tooltip:!0}),r.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),r.bind("isEnabled").to(o),this.listenTo(r,"execute",c=>{n.execute(c.source.commandName,{value:c.source.commandParam}),n.editing.view.focus()}),r}),n.ui.componentFactory.add(`menuBar:${H}`,a=>{const r=new ue(a);r.buttonView.set({label:s,icon:ft}),r.bind("isEnabled").to(o);const c=new Se(a);for(const d of l){const h=new Ae(a,r),m=new Z(a);m.set({role:"menuitemradio",isToggleable:!0}),m.bind(...Object.keys(d.model)).to(d.model),m.delegate("execute").to(r),m.on("execute",()=>{n.execute(d.model.commandName,{value:d.model.commandParam}),n.editing.view.focus()}),h.children.add(m),c.items.add(h)}return r.panelView.children.add(c),r})}_getLocalizedOptions(){const n=this.editor,e=n.t;return gn(n.config.get(H).options).map(o=>(o.title==="Default"&&(o.title=e("Default")),o))}}function fi(i,n){const e=new fe;for(const t of i){const o={type:"button",model:new Re({commandName:H,commandParam:t.model,label:t.title,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(n,"value",s=>s===t.model?!0:!s||!t.model?!1:s.split(",")[0].replace(/'/g,"").toLowerCase()===t.model.toLowerCase()),t.view&&typeof t.view!="string"&&t.view.styles&&o.model.set("labelStyle",`font-family: ${t.view.styles["font-family"]}`),e.add(o)}return e}class pi extends y{static get requires(){return[hi,gi]}static get pluginName(){return"FontFamily"}}class bi extends Le{constructor(n){super(n,U)}}function nt(i){return i.map(n=>wi(n)).filter(n=>n!==void 0)}const pt={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function wi(i){if(typeof i=="number"&&(i=String(i)),typeof i=="object"&&vi(i))return ze(i);const n=Ci(i);if(n)return ze(n);if(i==="default")return{model:void 0,title:"Default"};if(!yi(i))return _i(i)}function _i(i){return typeof i=="string"&&(i={title:i,model:`${parseFloat(i)}px`}),i.view={name:"span",styles:{"font-size":i.model}},ze(i)}function ze(i){return i.view&&typeof i.view!="string"&&!i.view.priority&&(i.view.priority=7),i}function Ci(i){return typeof i=="string"?pt[i]:pt[i.model]}function vi(i){return i.title&&i.model&&i.view}function yi(i){let n;if(typeof i=="object")if(i.model)n=parseFloat(i.model);else throw new ge("font-size-invalid-definition",null,i);else n=parseFloat(i);return isNaN(n)}const bt=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class ki extends y{static get pluginName(){return"FontSizeEditing"}constructor(n){super(n),n.config.define(U,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const n=this.editor;n.model.schema.extend("$text",{allowAttributes:U}),n.model.schema.setAttributeProperties(U,{isFormatting:!0,copyOnEnter:!0});const e=n.config.get("fontSize.supportAllValues"),t=nt(this.editor.config.get("fontSize.options")).filter(s=>s.model),o=un(U,t);e?(this._prepareAnyValueConverters(o),this._prepareCompatibilityConverter()):n.conversion.attributeToElement(o),n.commands.add(U,new bi(n))}_prepareAnyValueConverters(n){const e=this.editor,t=n.model.values.filter(o=>!Fo(String(o))&&!Uo(String(o)));if(t.length)throw new ge("font-size-invalid-use-of-named-presets",null,{presets:t});e.conversion.for("downcast").attributeToElement({model:U,view:(o,{writer:s})=>{if(o)return s.createAttributeElement("span",{style:"font-size:"+o},{priority:7})}}),e.conversion.for("upcast").elementToAttribute({model:{key:U,value:o=>o.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:U,value:e=>{const t=e.getAttribute("size"),o=t[0]==="-"||t[0]==="+";let s=parseInt(t,10);o&&(s=3+s);const l=bt.length-1,a=Math.min(Math.max(s,0),l);return bt[a]}}})}}var wt='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class xi extends y{static get pluginName(){return"FontSizeUI"}init(){const n=this.editor,e=n.t,t=this._getLocalizedOptions(),o=n.commands.get(U),s=e("Font Size"),l=Ii(t,o);n.ui.componentFactory.add(U,a=>{const r=X(a);return Te(r,l,{role:"menu",ariaLabel:s}),r.buttonView.set({label:s,icon:wt,tooltip:!0}),r.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),r.bind("isEnabled").to(o),this.listenTo(r,"execute",c=>{n.execute(c.source.commandName,{value:c.source.commandParam}),n.editing.view.focus()}),r}),n.ui.componentFactory.add(`menuBar:${U}`,a=>{const r=new ue(a);r.buttonView.set({label:s,icon:wt}),r.bind("isEnabled").to(o);const c=new Se(a);for(const d of l){const h=new Ae(a,r),m=new Z(a);m.set({role:"menuitemradio",isToggleable:!0}),m.bind(...Object.keys(d.model)).to(d.model),m.delegate("execute").to(r),m.on("execute",()=>{n.execute(d.model.commandName,{value:d.model.commandParam}),n.editing.view.focus()}),h.children.add(m),c.items.add(h)}return r.panelView.children.add(c),r})}_getLocalizedOptions(){const n=this.editor,e=n.t,t={Default:e("Default"),Tiny:e("Tiny"),Small:e("Small"),Big:e("Big"),Huge:e("Huge")};return nt(n.config.get(U).options).map(s=>{const l=t[s.title];return l&&l!=s.title&&(s=Object.assign({},s,{title:l})),s})}}function Ii(i,n){const e=new fe;for(const t of i){const o={type:"button",model:new Re({commandName:U,commandParam:t.model,label:t.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};t.view&&typeof t.view!="string"&&(t.view.styles&&o.model.set("labelStyle",`font-size:${t.view.styles["font-size"]}`),t.view.classes&&o.model.set("class",`${o.model.class} ${t.view.classes}`)),o.model.bind("isOn").to(n,"value",s=>s===t.model),e.add(o)}return e}class Ti extends y{static get requires(){return[ki,xi]}static get pluginName(){return"FontSize"}normalizeSizeOptions(n){return nt(n)}}class Si extends Le{constructor(n){super(n,j)}}class Ai extends y{static get pluginName(){return"FontColorEditing"}constructor(n){super(n),n.config.define(j,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),n.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:j,value:mn("color")}}),n.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:j,value:e=>e.getAttribute("color")}}),n.conversion.for("downcast").attributeToElement({model:j,view:hn("color")}),n.commands.add(j,new Si(n)),n.model.schema.extend("$text",{allowAttributes:j}),n.model.schema.setAttributeProperties(j,{isFormatting:!0,copyOnEnter:!0})}}class fn extends y{constructor(e,{commandName:t,componentName:o,icon:s,dropdownLabel:l}){super(e);p(this,"commandName");p(this,"componentName");p(this,"icon");p(this,"dropdownLabel");p(this,"columns");this.commandName=t,this.componentName=o,this.icon=s,this.dropdownLabel=l,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,t=e.locale,o=t.t,s=e.commands.get(this.commandName),l=e.config.get(this.componentName),a=Oo(l.colors),r=Mo(t,a),c=l.documentColors,d=l.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,h=>{const m=X(h);let f=!1;const w=ai({dropdownView:m,colors:r.map(_=>({label:_.label,color:_.model,options:{hasBorder:_.hasBorder}})),columns:this.columns,removeButtonLabel:o("Remove color"),colorPickerLabel:o("Color picker"),documentColorsLabel:c!==0?o("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:d?l.colorPicker||{}:!1});return w.bind("selectedColor").to(s,"value"),m.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),m.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),m.bind("isEnabled").to(s),w.on("execute",(_,g)=>{m.isOpen&&e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),g.source!=="colorPicker"&&e.editing.view.focus(),g.source==="colorPickerSaveButton"&&(m.isOpen=!1)}),w.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),w.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(m.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),m.on("change:isOpen",(_,g,b)=>{f||(f=!0,m.colorSelectorView.appendUI()),b&&(c!==0&&w.updateDocumentColors(e.model,this.componentName),w.updateSelectedColors(),w.showColorGridsFragment())}),No(m,()=>m.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(_=>_.isOn)),m}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,h=>{const m=new ue(h);m.buttonView.set({label:this.dropdownLabel,icon:this.icon}),m.bind("isEnabled").to(s);let f=!1;const w=new Wt(h,{colors:r.map(_=>({label:_.label,color:_.model,options:{hasBorder:_.hasBorder}})),columns:this.columns,removeButtonLabel:o("Remove color"),colorPickerLabel:o("Color picker"),documentColorsLabel:c!==0?o("Document colors"):"",documentColorsCount:c===void 0?this.columns:c,colorPickerViewConfig:!1});return w.bind("selectedColor").to(s,"value"),w.delegate("execute").to(m),w.on("execute",(_,g)=>{e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),e.editing.view.focus()}),m.on("change:isOpen",(_,g,b)=>{f||(f=!0,w.appendUI()),b&&(c!==0&&w.updateDocumentColors(e.model,this.componentName),w.updateSelectedColors(),w.showColorGridsFragment())}),m.panelView.children.add(w),m})}}var Ri='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class Ei extends fn{constructor(n){const e=n.locale.t;super(n,{commandName:j,componentName:j,icon:Ri,dropdownLabel:e("Font Color")})}static get pluginName(){return"FontColorUI"}}class Vi extends y{static get requires(){return[Ai,Ei]}static get pluginName(){return"FontColor"}}class Bi extends Le{constructor(n){super(n,Y)}}class Li extends y{static get pluginName(){return"FontBackgroundColorEditing"}constructor(n){super(n),n.config.define(Y,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),n.data.addStyleProcessorRules(Ho),n.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Y,value:mn("background-color")}}),n.conversion.for("downcast").attributeToElement({model:Y,view:hn("background-color")}),n.commands.add(Y,new Bi(n)),n.model.schema.extend("$text",{allowAttributes:Y}),n.model.schema.setAttributeProperties(Y,{isFormatting:!0,copyOnEnter:!0})}}var Pi='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class Fi extends fn{constructor(n){const e=n.locale.t;super(n,{commandName:Y,componentName:Y,icon:Pi,dropdownLabel:e("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class Ui extends y{static get requires(){return[Li,Fi]}static get pluginName(){return"FontBackgroundColor"}}class Hi extends y{static get requires(){return[pi,Ti,Vi,Ui]}static get pluginName(){return"Font"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oi extends S{constructor(n){super(n),this._isEnabledBasedOnSelection=!1}refresh(){const n=this.editor.model,e=n.document,t=$(e.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&_t(t,n.schema)}execute(n={}){const e=this.editor.model,t=e.document,o=n.selection||t.selection;e.canEditAt(o)&&e.change(s=>{const l=o.getSelectedBlocks();for(const a of l)!a.is("element","paragraph")&&_t(a,e.schema)&&s.rename(a,"paragraph")})}}function _t(i,n){return n.checkChild(i.parent,"paragraph")&&!n.isObject(i)}class Mi extends S{constructor(n){super(n),this._isEnabledBasedOnSelection=!1}execute(n){const e=this.editor.model,t=n.attributes;let o=n.position;e.canEditAt(o)&&e.change(s=>{if(o=this._findPositionToInsertParagraph(o,s),!o)return;const l=s.createElement("paragraph");t&&e.schema.setAllowedAttributes(l,t,s),e.insertContent(l,o),s.setSelection(l,"in")})}_findPositionToInsertParagraph(n,e){const t=this.editor.model;if(t.schema.checkChild(n,"paragraph"))return n;const o=t.schema.findAllowedParent(n,"paragraph");if(!o)return null;const s=n.parent,l=t.schema.checkChild(s,"$text");return s.isEmpty||l&&n.isAtEnd?t.createPositionAfter(s):!s.isEmpty&&l&&n.isAtStart?t.createPositionBefore(s):e.split(n,o).position}}const Ie=class Ie extends y{static get pluginName(){return"Paragraph"}init(){const n=this.editor,e=n.model;n.commands.add("paragraph",new Oi(n)),n.commands.add("insertParagraph",new Mi(n)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),n.conversion.elementToElement({model:"paragraph",view:"p"}),n.conversion.for("upcast").elementToElement({model:(t,{writer:o})=>!Ie.paragraphLikeElements.has(t.name)||t.isEmpty?null:o.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};p(Ie,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let ye=Ie;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ni extends S{constructor(e,t){super(e);p(this,"modelElements");this.modelElements=t}refresh(){const e=$(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>Ct(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,o=t.document,s=e.value;t.change(l=>{const a=Array.from(o.selection.getSelectedBlocks()).filter(r=>Ct(r,s,t.schema));for(const r of a)r.is("element",s)||l.rename(r,s)})}}function Ct(i,n,e){return e.checkChild(i.parent,n)&&!e.isObject(i)}const vt="paragraph";class Di extends y{static get pluginName(){return"HeadingEditing"}constructor(n){super(n),n.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[ye]}init(){const n=this.editor,e=n.config.get("heading.options"),t=[];for(const o of e)o.model!=="paragraph"&&(n.model.schema.register(o.model,{inheritAllFrom:"$block"}),n.conversion.elementToElement(o),t.push(o.model));this._addDefaultH1Conversion(n),n.commands.add("heading",new Ni(n,t))}afterInit(){const n=this.editor,e=n.commands.get("enter"),t=n.config.get("heading.options");e&&this.listenTo(e,"afterExecute",(o,s)=>{const l=n.model.document.selection.getFirstPosition().parent;t.some(r=>l.is("element",r.model))&&!l.is("element",vt)&&l.childCount===0&&s.writer.rename(l,vt)})}_addDefaultH1Conversion(n){n.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Do.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zi(i){const n=i.t,e={Paragraph:n("Paragraph"),"Heading 1":n("Heading 1"),"Heading 2":n("Heading 2"),"Heading 3":n("Heading 3"),"Heading 4":n("Heading 4"),"Heading 5":n("Heading 5"),"Heading 6":n("Heading 6")};return i.config.get("heading.options").map(t=>{const o=e[t.title];return o&&o!=t.title&&(t.title=o),t})}class Wi extends y{static get pluginName(){return"HeadingUI"}init(){const n=this.editor,e=n.t,t=zi(n),o=e("Choose heading"),s=e("Heading");n.ui.componentFactory.add("heading",l=>{const a={},r=new fe,c=n.commands.get("heading"),d=n.commands.get("paragraph"),h=[c];for(const f of t){const w={type:"button",model:new Re({label:f.title,class:f.class,role:"menuitemradio",withText:!0})};f.model==="paragraph"?(w.model.bind("isOn").to(d,"value"),w.model.set("commandName","paragraph"),h.push(d)):(w.model.bind("isOn").to(c,"value",_=>_===f.model),w.model.set({commandName:"heading",commandValue:f.model})),r.add(w),a[f.model]=f.title}const m=X(l);return Te(m,r,{ariaLabel:s,role:"menu"}),m.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),m.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),m.bind("isEnabled").toMany(h,"isEnabled",(...f)=>f.some(w=>w)),m.buttonView.bind("label").to(c,"value",d,"value",(f,w)=>{const _=w?"paragraph":f;return typeof _=="boolean"||!a[_]?o:a[_]}),m.buttonView.bind("ariaLabel").to(c,"value",d,"value",(f,w)=>{const _=w?"paragraph":f;return typeof _=="boolean"||!a[_]?s:`${a[_]}, ${s}`}),this.listenTo(m,"execute",f=>{const{commandName:w,commandValue:_}=f.source;n.execute(w,_?{value:_}:void 0),n.editing.view.focus()}),m}),n.ui.componentFactory.add("menuBar:heading",l=>{const a=new ue(l),r=n.commands.get("heading"),c=n.commands.get("paragraph"),d=[r],h=new Se(l);a.set({class:"ck-heading-dropdown"}),h.set({ariaLabel:e("Heading"),role:"menu"}),a.buttonView.set({label:e("Heading")}),a.panelView.children.add(h);for(const m of t){const f=new Ae(l,a),w=new Z(l);f.children.add(w),h.items.add(f),w.set({isToggleable:!0,label:m.title,role:"menuitemradio",class:m.class}),w.delegate("execute").to(a),w.on("execute",()=>{const _=m.model==="paragraph"?"paragraph":"heading";n.execute(_,{value:m.model}),n.editing.view.focus()}),m.model==="paragraph"?(w.bind("isOn").to(c,"value"),d.push(c)):w.bind("isOn").to(r,"value",_=>_===m.model)}return a.bind("isEnabled").toMany(d,"isEnabled",(...m)=>m.some(f=>f)),a})}}class qi extends y{static get requires(){return[Di,Wi]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ji(i){return i.createContainerElement("span",{class:"image-inline"},i.createEmptyElement("img"))}function yt(i){return i.createContainerElement("figure",{class:"image"},[i.createEmptyElement("img"),i.createSlot("children")])}function pn(i,n){const e=i.plugins.get("ImageUtils"),t=i.plugins.has("ImageInlineEditing")&&i.plugins.has("ImageBlockEditing");return s=>e.isInlineImageView(s)?t&&(s.getStyle("display")=="block"||s.findAncestor(e.isBlockImageView)?"imageBlock":"imageInline")!==n?null:o(s):null;function o(s){const l={name:!0};return s.hasAttribute("src")&&(l.attributes=["src"]),l}}function ot(i,n){const e=$(n.getSelectedBlocks());return!e||i.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}function ke(i){return i&&i.endsWith("px")?parseInt(i):null}function kt(i){const n=ke(i.getStyle("width")),e=ke(i.getStyle("height"));return!!(n&&e)}const Ki=/^(image|image-inline)$/;class ee extends y{constructor(){super(...arguments);p(this,"_domEmitter",new(zo()))}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,o=null,s={}){const l=this.editor,a=l.model,r=a.document.selection,c=bn(l,t||r,o);e={...Object.fromEntries(r.getAttributes()),...e};for(const d in e)a.schema.checkAttribute(c,d)||delete e[d];return a.change(d=>{const{setImageSizes:h=!0}=s,m=d.createElement(c,e);return a.insertObject(m,t,null,{setSelection:"on",findOptimalPosition:!t&&c!="imageInline"?"auto":void 0}),m.parent?(h&&this.setImageNaturalSizeAttributes(m),m):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(o=>{const s=new Wo.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(o.batch,l=>{l.setAttribute("width",s.naturalWidth,e),l.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const o=e.getSelectedElement();if(o&&this.isImageWidget(o))return o;let s=t.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:Ki})}isImageAllowed(){const t=this.editor.model.document.selection;return Gi(this.editor,t)&&Ji(t)}toImageWidget(e,t,o){return t.setCustomProperty("image",!0,e),Kt(e,t,{label:()=>{const a=this.findViewImgElement(e).getAttribute("alt");return a?`${a} ${o}`:o}})}isImageWidget(e){return!!e.getCustomProperty("image")&&$e(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:o}of t.createRangeIn(e))if(this.isInlineImageView(o))return o}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function Gi(i,n){if(bn(i,n,null)=="imageBlock"){const t=Yi(n,i.model);if(i.model.schema.checkChild(t,"imageBlock"))return!0}else if(i.model.schema.checkChild(n.focus,"imageInline"))return!0;return!1}function Ji(i){return[...i.focus.getAncestors()].every(n=>!n.is("element","imageBlock"))}function Yi(i,n){const t=qo(i,n).start.parent;return t.isEmpty&&!t.is("element","$root")?t.parent:t}function bn(i,n,e){const t=i.model.schema,o=i.config.get("image.insert.type");return i.plugins.has("ImageBlockEditing")?i.plugins.has("ImageInlineEditing")?e||(o==="inline"?"imageInline":o!=="auto"?"imageBlock":n.is("selection")?ot(t,n):t.checkChild(n,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}class Zi extends S{refresh(){const t=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!t,this.isEnabled&&t.hasAttribute("alt")?this.value=t.getAttribute("alt"):this.value=!1}execute(n){const e=this.editor,t=e.plugins.get("ImageUtils"),o=e.model,s=t.getClosestSelectedImageElement(o.document.selection);o.change(l=>{l.setAttribute("alt",n.newValue,s)})}}class Xi extends y{static get requires(){return[ee]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new Zi(this.editor))}}class Qi extends de{constructor(e){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"labeledInput");p(this,"saveButtonView");p(this,"cancelButtonView");p(this,"_focusables");p(this,"_focusCycler");const t=this.locale.t;this.focusTracker=new pe,this.keystrokes=new be,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),O.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),O.cancel,"ck-button-cancel","cancel"),this._focusables=new Ve,this._focusCycler=new Be({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),et({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,o,s){const l=new N(this.locale);return l.set({label:e,icon:t,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}_createLabeledInputView(){const e=this.locale.t,t=new Yt(this.locale,Zt);return t.label=e("Text alternative"),t}}function $i(i){const n=i.plugins.get("ContextualBalloon");if(i.plugins.get("ImageUtils").getClosestSelectedImageWidget(i.editing.view.document.selection)){const t=wn(i);n.updatePosition(t)}}function wn(i){const n=i.editing.view,e=Jo.defaultPositions,t=i.plugins.get("ImageUtils");return{target:n.domConverter.mapViewToDom(t.getClosestSelectedImageWidget(n.document.selection)),positions:[e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast,e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.viewportStickyNorth]}}class el extends y{constructor(){super(...arguments);p(this,"_balloon");p(this,"_form")}static get requires(){return[Me]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",o=>{const s=e.commands.get("imageTextAlternative"),l=new N(o);return l.set({label:t("Change image text alternative"),icon:O.textAlternative,tooltip:!0}),l.bind("isEnabled").to(s,"isEnabled"),l.bind("isOn").to(s,"value",a=>!!a),this.listenTo(l,"execute",()=>{this._showForm()}),l})}_createForm(){const e=this.editor,o=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Gt(Qi))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(l,a)=>{this._hideForm(!0),a()}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(o.selection)?this._isVisible&&$i(e):this._hideForm(!0)}),Jt({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),o=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:wn(e)}),o.fieldView.value=o.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class _n extends y{static get requires(){return[Xi,el]}static get pluginName(){return"ImageTextAlternative"}}function tl(i){const n=(e,t,o)=>{if(!o.consumable.test(t.viewItem,{name:!0,classes:"image"}))return;const s=i.findViewImgElement(t.viewItem);if(!s||!o.consumable.test(s,{name:!0}))return;o.consumable.consume(t.viewItem,{name:!0,classes:"image"});const l=o.convertItem(s,t.modelCursor),a=$(l.modelRange.getItems());if(!a){o.consumable.revert(t.viewItem,{name:!0,classes:"image"});return}o.convertChildren(t.viewItem,a),o.updateConversionResult(a,t)};return e=>{e.on("element:figure",n)}}function Cn(i,n){const e=(t,o,s)=>{if(!s.consumable.consume(o.item,t.name))return;const l=s.writer,a=s.mapper.toViewElement(o.item),r=i.findViewImgElement(a);o.attributeNewValue===null?(l.removeAttribute("srcset",r),l.removeAttribute("sizes",r)):o.attributeNewValue&&(l.setAttribute("srcset",o.attributeNewValue,r),l.setAttribute("sizes","100vw",r))};return t=>{t.on(`attribute:srcset:${n}`,e)}}function xe(i,n,e){const t=(o,s,l)=>{if(!l.consumable.consume(s.item,o.name))return;const a=l.writer,r=l.mapper.toViewElement(s.item),c=i.findViewImgElement(r);a.setAttribute(s.attributeKey,s.attributeNewValue||"",c)};return o=>{o.on(`attribute:${e}:${n}`,t)}}class vn extends Ko{observe(n){this.listenTo(n,"load",(e,t)=>{const o=t.target;this.checkShouldIgnoreEventFromTarget(o)||o.tagName=="IMG"&&this._fireEvents(t)},{useCapture:!0})}stopObserving(n){this.stopListening(n)}_fireEvents(n){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",n))}}class nl extends S{constructor(n){super(n);const e=n.config.get("image.insert.type");n.plugins.has("ImageBlockEditing")||e==="block"&&ce("image-block-plugin-required"),n.plugins.has("ImageInlineEditing")||e==="inline"&&ce("image-inline-plugin-required")}refresh(){const n=this.editor.plugins.get("ImageUtils");this.isEnabled=n.isImageAllowed()}execute(n){const e=Go(n.source),t=this.editor.model.document.selection,o=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(t.getAttributes());e.forEach((l,a)=>{const r=t.getSelectedElement();if(typeof l=="string"&&(l={src:l}),a&&r&&o.isImage(r)){const c=this.editor.model.createPositionAfter(r);o.insertImage({...l,...s},c)}else o.insertImage({...l,...s})})}}class ol extends S{constructor(n){super(n),this.decorate("cleanupImage")}refresh(){const e=this.editor.plugins.get("ImageUtils"),t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=e.isImage(t),this.value=this.isEnabled?t.getAttribute("src"):null}execute(n){const e=this.editor.model.document.selection.getSelectedElement(),t=this.editor.plugins.get("ImageUtils");this.editor.model.change(o=>{o.setAttribute("src",n.source,e),this.cleanupImage(o,e),t.setImageNaturalSizeAttributes(e)})}cleanupImage(n,e){n.removeAttribute("srcset",e),n.removeAttribute("sizes",e),n.removeAttribute("sources",e),n.removeAttribute("width",e),n.removeAttribute("height",e),n.removeAttribute("alt",e)}}class yn extends y{static get requires(){return[ee]}static get pluginName(){return"ImageEditing"}init(){const n=this.editor,e=n.conversion;n.editing.view.addObserver(vn),e.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const t=new nl(n),o=new ol(n);n.commands.add("insertImage",t),n.commands.add("replaceImageSource",o),n.commands.add("imageInsert",t)}}class kn extends y{static get requires(){return[ee]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(n){const e=this.editor,t=e.plugins.get("ImageUtils"),o=n==="imageBlock"?"figure":"img";e.conversion.for("upcast").attributeToAttribute({view:{name:o,styles:{width:/.+/}},model:{key:"width",value:l=>kt(l)?ke(l.getStyle("width")):null}}).attributeToAttribute({view:{name:o,key:"width"},model:"width"}).attributeToAttribute({view:{name:o,styles:{height:/.+/}},model:{key:"height",value:l=>kt(l)?ke(l.getStyle("height")):null}}).attributeToAttribute({view:{name:o,key:"height"},model:"height"}),e.conversion.for("editingDowncast").add(l=>{s(l,"width","width",!0),s(l,"height","height",!0)}),e.conversion.for("dataDowncast").add(l=>{s(l,"width","width",!1),s(l,"height","height",!1)});function s(l,a,r,c){l.on(`attribute:${a}:${n}`,(d,h,m)=>{if(!m.consumable.consume(h.item,d.name))return;const f=m.writer,w=m.mapper.toViewElement(h.item),_=t.findViewImgElement(w);if(h.attributeNewValue!==null?f.setAttribute(r,h.attributeNewValue,_):f.removeAttribute(r,_),h.item.hasAttribute("sources"))return;const g=h.item.hasAttribute("resizedWidth");if(n==="imageInline"&&!g&&!c)return;const b=h.item.getAttribute("width"),v=h.item.getAttribute("height");b&&v&&f.setStyle("aspect-ratio",`${b}/${v}`,_)})}}}class xn extends S{constructor(e,t){super(e);p(this,"_modelElementName");this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),o=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(o):this.isEnabled=t.isBlockImage(o)}execute(e={}){const t=this.editor,o=this.editor.model,s=t.plugins.get("ImageUtils"),l=s.getClosestSelectedImageElement(o.document.selection),a=Object.fromEntries(l.getAttributes());return!a.src&&!a.uploadId?null:o.change(r=>{const{setImageSizes:c=!0}=e,d=Array.from(o.markers).filter(f=>f.getRange().containsItem(l)),h=s.insertImage(a,o.createSelection(l,"on"),this._modelElementName,{setImageSizes:c});if(!h)return null;const m=r.createRangeOn(h);for(const f of d){const w=f.getRange(),_=w.root.rootName!="$graveyard"?w.getJoined(m,!0):m;r.updateMarker(f,{range:_})}return{oldElement:l,newElement:h}})}}class In extends y{static get requires(){return[ee]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const n=this.editor.model.schema;n.isRegistered("imageBlock")&&n.extend("imageBlock",{allowAttributes:["placeholder"]}),n.isRegistered("imageInline")&&n.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const n=this.editor,e=n.conversion,t=n.plugins.get("ImageUtils");e.for("editingDowncast").add(o=>{o.on("attribute:placeholder",(s,l,a)=>{if(!a.consumable.test(l.item,s.name)||!l.item.is("element","imageBlock")&&!l.item.is("element","imageInline"))return;a.consumable.consume(l.item,s.name);const r=a.writer,c=a.mapper.toViewElement(l.item),d=t.findViewImgElement(c);l.attributeNewValue?(r.addClass("image_placeholder",d),r.setStyle("background-image",`url(${l.attributeNewValue})`,d),r.setCustomProperty("editingPipeline:doNotReuseOnce",!0,d)):(r.removeClass("image_placeholder",d),r.removeStyle("background-image",d))})})}_setupLoadListener(){const n=this.editor,e=n.model,t=n.editing,o=t.view,s=n.plugins.get("ImageUtils");o.addObserver(vn),this.listenTo(o.document,"imageLoaded",(l,a)=>{const r=o.domConverter.mapDomToView(a.target);if(!r)return;const c=s.getImageWidgetFromImageView(r);if(!c)return;const d=t.mapper.toModelElement(c);!d||!d.hasAttribute("placeholder")||e.enqueueChange({isUndoable:!1},h=>{h.removeAttribute("placeholder",d)})})}}class sl extends y{static get requires(){return[yn,kn,ee,In,Ee]}static get pluginName(){return"ImageBlockEditing"}init(){const n=this.editor;n.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),n.plugins.has("ImageInlineEditing")&&(n.commands.add("imageTypeBlock",new xn(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const n=this.editor,e=n.t,t=n.conversion,o=n.plugins.get("ImageUtils");t.for("dataDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:l})=>yt(l)}),t.for("editingDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:l})=>o.toImageWidget(yt(l),l,e("image widget"))}),t.for("downcast").add(xe(o,"imageBlock","src")).add(xe(o,"imageBlock","alt")).add(Cn(o,"imageBlock")),t.for("upcast").elementToElement({view:pn(n,"imageBlock"),model:(s,{writer:l})=>l.createElement("imageBlock",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)}).add(tl(o))}_setupClipboardIntegration(){const n=this.editor,e=n.model,t=n.editing.view,o=n.plugins.get("ImageUtils"),s=n.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(l,a)=>{const r=Array.from(a.content.getChildren());let c;if(!r.every(o.isInlineImageView))return;a.targetRanges?c=n.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const d=e.createSelection(c);if(ot(e.schema,d)==="imageBlock"){const h=new qt(t.document),m=r.map(f=>h.createElement("figure",{class:"image"},f));a.content=h.createDocumentFragment(m)}}),this.listenTo(s,"contentInsertion",(l,a)=>{a.method==="paste"&&e.change(r=>{const c=r.createRangeIn(a.content);for(const d of c.getItems())d.is("element","imageBlock")&&o.setImageNaturalSizeAttributes(d)})})}}class il extends de{constructor(e,t=[]){super(e);p(this,"focusTracker");p(this,"keystrokes");p(this,"_focusables");p(this,"_focusCycler");p(this,"children");this.focusTracker=new pe,this.keystrokes=new be,this._focusables=new Ve,this.children=this.createCollection(),this._focusCycler=new Be({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const o of t)this.children.add(o),this._focusables.add(o),o instanceof jo&&this._focusables.addMany(o.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),et({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class Tn extends y{constructor(e){super(e);p(this,"dropdownView");p(this,"_integrations",new Map);e.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get requires(){return[ee]}init(){const e=this.editor,t=e.model.document.selection,o=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=o.isImage(t.getSelectedElement())});const s=a=>this._createToolbarComponent(a),l=a=>this._createMenuBarComponent(a);e.ui.componentFactory.add("insertImage",s),e.ui.componentFactory.add("imageInsert",s),e.ui.componentFactory.add("menuBar:insertImage",l)}registerIntegration({name:e,observable:t,buttonViewCreator:o,formViewCreator:s,menuBarButtonViewCreator:l,requiresForm:a=!1}){this._integrations.has(e)&&ce("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:o,menuBarButtonViewCreator:l,formViewCreator:s,requiresForm:a})}_createToolbarComponent(e){const t=this.editor,o=e.t,s=this._prepareIntegrations();if(!s.length)return null;let l;const a=s[0];if(s.length==1){if(!a.requiresForm)return a.buttonViewCreator(!0);l=a.buttonViewCreator(!0)}else{const d=a.buttonViewCreator(!1);l=new jt(e,d),l.tooltip=!0,l.bind("label").to(this,"isImageSelected",h=>o(h?"Replace image":"Insert image"))}const r=this.dropdownView=X(e,l),c=s.map(({observable:d})=>typeof d=="function"?d():d);return r.bind("isEnabled").toMany(c,"isEnabled",(...d)=>d.some(h=>h)),r.once("change:isOpen",()=>{const d=s.map(({formViewCreator:m})=>m(s.length==1)),h=new il(t.locale,d);r.panelView.children.add(h)}),r}_createMenuBarComponent(e){const t=e.t,o=this._prepareIntegrations();if(!o.length)return null;let s;const l=o[0];if(o.length==1)s=l.menuBarButtonViewCreator(!0);else{s=new ue(e);const a=new Se(e);s.panelView.children.add(a),s.buttonView.set({icon:O.image,label:t("Image")});for(const r of o){const c=new Ae(e,s),d=r.menuBarButtonViewCreator(!1);c.children.add(d),a.items.add(c)}}return s}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),o=[];if(!t.length)return ce("image-insert-integrations-not-specified"),o;for(const s of t){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||ce("image-insert-unknown-integration",{item:s});continue}o.push(this._integrations.get(s))}return o.length||ce("image-insert-integrations-not-registered"),o}}class ll extends y{static get requires(){return[sl,Qe,_n,Tn]}static get pluginName(){return"ImageBlock"}}class al extends y{static get requires(){return[yn,kn,ee,In,Ee]}static get pluginName(){return"ImageInlineEditing"}init(){const n=this.editor;n.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),n.plugins.has("ImageBlockEditing")&&(n.commands.add("imageTypeInline",new xn(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const n=this.editor,e=n.t,t=n.conversion,o=n.plugins.get("ImageUtils");t.for("dataDowncast").elementToElement({model:"imageInline",view:(s,{writer:l})=>l.createEmptyElement("img")}),t.for("editingDowncast").elementToStructure({model:"imageInline",view:(s,{writer:l})=>o.toImageWidget(ji(l),l,e("image widget"))}),t.for("downcast").add(xe(o,"imageInline","src")).add(xe(o,"imageInline","alt")).add(Cn(o,"imageInline")),t.for("upcast").elementToElement({view:pn(n,"imageInline"),model:(s,{writer:l})=>l.createElement("imageInline",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const n=this.editor,e=n.model,t=n.editing.view,o=n.plugins.get("ImageUtils"),s=n.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(l,a)=>{const r=Array.from(a.content.getChildren());let c;if(!r.every(o.isBlockImageView))return;a.targetRanges?c=n.editing.mapper.toModelRange(a.targetRanges[0]):c=e.document.selection.getFirstRange();const d=e.createSelection(c);if(ot(e.schema,d)==="imageInline"){const h=new qt(t.document),m=r.map(f=>f.childCount===1?(Array.from(f.getAttributes()).forEach(w=>h.setAttribute(...w,o.findViewImgElement(f))),f.getChild(0)):f);a.content=h.createDocumentFragment(m)}}),this.listenTo(s,"contentInsertion",(l,a)=>{a.method==="paste"&&e.change(r=>{const c=r.createRangeIn(a.content);for(const d of c.getItems())d.is("element","imageInline")&&o.setImageNaturalSizeAttributes(d)})})}}class rl extends y{static get requires(){return[al,Qe,_n,Tn]}static get pluginName(){return"ImageInline"}}class cl extends y{static get requires(){return[ll,rl]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dl{constructor(){p(this,"_definitions",new Set)}get length(){return this._definitions.size}add(n){Array.isArray(n)?n.forEach(e=>this._definitions.add(e)):this._definitions.add(n)}getDispatcher(){return n=>{n.on("attribute:linkHref",(e,t,o)=>{if(!o.consumable.test(t.item,"attribute:linkHref")||!(t.item.is("selection")||o.schema.isInline(t.item)))return;const s=o.writer,l=s.document.selection;for(const a of this._definitions){const r=s.createAttributeElement("a",a.attributes,{priority:5});a.classes&&s.addClass(a.classes,r);for(const c in a.styles)s.setStyle(c,a.styles[c],r);s.setCustomProperty("link",!0,r),a.callback(t.attributeNewValue)?t.item.is("selection")?s.wrap(l.getFirstRange(),r):s.wrap(o.mapper.toViewRange(t.range),r):s.unwrap(o.mapper.toViewRange(t.range),r)}},{priority:"high"})}}getDispatcherForLinkedImage(){return n=>{n.on("attribute:linkHref:imageBlock",(e,t,{writer:o,mapper:s})=>{const l=s.toViewElement(t.item),a=Array.from(l.getChildren()).find(r=>r.is("element","a"));for(const r of this._definitions){const c=Xt(r.attributes);if(r.callback(t.attributeNewValue)){for(const[d,h]of c)d==="class"?o.addClass(h,a):o.setAttribute(d,h,a);r.classes&&o.addClass(r.classes,a);for(const d in r.styles)o.setStyle(d,r.styles[d],a)}else{for(const[d,h]of c)d==="class"?o.removeClass(h,a):o.removeAttribute(d,a);r.classes&&o.removeClass(r.classes,a);for(const d in r.styles)o.removeStyle(d,a)}}})}}}const ul=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ml="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",hl=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,gl=/^((\w+:(\/{2,})?)|(\W))/i,fl=["https?","ftps?","mailto"],_e="Ctrl+K";function pl(i){return i.is("attributeElement")&&!!i.getCustomProperty("link")}function xt(i,{writer:n}){const e=n.createAttributeElement("a",{href:i},{priority:5});return n.setCustomProperty("link",!0,e),e}function Sn(i,n=fl){const e=String(i),t=n.join("|"),o=new RegExp(`${ml.replace("<protocols>",t)}`,"i");return bl(e,o)?e:"#"}function bl(i,n){return!!i.replace(ul,"").match(n)}function wl(i,n){const e={"Open in a new tab":i("Open in a new tab"),Downloadable:i("Downloadable")};return n.forEach(t=>("label"in t&&e[t.label]&&(t.label=e[t.label]),t)),n}function _l(i){const n=[];if(i)for(const[e,t]of Object.entries(i)){const o=Object.assign({},t,{id:`link${Us(e)}`});n.push(o)}return n}function We(i,n){return i?n.checkAttribute(i.name,"linkHref"):!1}function Cl(i){return hl.test(i)}function st(i,n){const e=Cl(i)?"mailto:":n,t=!!e&&!An(i);return i&&t?e+i:i}function An(i){return gl.test(i)}function It(i){window.open(i,"_blank","noopener")}class vl extends S{constructor(){super(...arguments);p(this,"manualDecorators",new fe);p(this,"automaticDecorators",new dl)}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,o=t.getSelectedElement()||$(t.getSelectedBlocks());We(o,e.schema)?(this.value=o.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(o,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={}){const o=this.editor.model,s=o.document.selection,l=[],a=[];for(const r in t)t[r]?l.push(r):a.push(r);o.change(r=>{if(s.isCollapsed){const c=s.getFirstPosition();if(s.hasAttribute("linkHref")){const d=Tt(s);let h=tt(c,"linkHref",s.getAttribute("linkHref"),o);s.getAttribute("linkHref")===d&&(h=this._updateLinkContent(o,r,h,e)),r.setAttribute("linkHref",e,h),l.forEach(m=>{r.setAttribute(m,!0,h)}),a.forEach(m=>{r.removeAttribute(m,h)}),r.setSelection(r.createPositionAfter(h.end.nodeBefore))}else if(e!==""){const d=Xt(s.getAttributes());d.set("linkHref",e),l.forEach(m=>{d.set(m,!0)});const{end:h}=o.insertContent(r.createText(e,d),c);r.setSelection(h)}["linkHref",...l,...a].forEach(d=>{r.removeSelectionAttribute(d)})}else{const c=o.schema.getValidRanges(s.getRanges(),"linkHref"),d=[];for(const m of s.getSelectedBlocks())o.schema.checkAttribute(m,"linkHref")&&d.push(r.createRangeOn(m));const h=d.slice();for(const m of c)this._isRangeToUpdate(m,d)&&h.push(m);for(const m of h){let f=m;if(h.length===1){const w=Tt(s);s.getAttribute("linkHref")===w&&(f=this._updateLinkContent(o,r,m,e),r.setSelection(r.createSelection(f)))}r.setAttribute("linkHref",e,f),l.forEach(w=>{r.setAttribute(w,!0,f)}),a.forEach(w=>{r.removeAttribute(w,f)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,o=t.document.selection,s=o.getSelectedElement();return We(s,t.schema)?s.getAttribute(e):o.getAttribute(e)}_isRangeToUpdate(e,t){for(const o of t)if(o.containsRange(e))return!1;return!0}_updateLinkContent(e,t,o,s){const l=t.createText(s,{linkHref:s});return e.insertContent(l,o)}}function Tt(i){if(i.isCollapsed){const n=i.getFirstPosition();return n.textNode&&n.textNode.data}else{const n=Array.from(i.getFirstRange().getItems());if(n.length>1)return null;const e=n[0];return e.is("$text")||e.is("$textProxy")?e.data:null}}class yl extends S{refresh(){const n=this.editor.model,e=n.document.selection,t=e.getSelectedElement();We(t,n.schema)?this.isEnabled=n.schema.checkAttribute(t,"linkHref"):this.isEnabled=n.schema.checkAttributeInSelection(e,"linkHref")}execute(){const n=this.editor,e=this.editor.model,t=e.document.selection,o=n.commands.get("link");e.change(s=>{const l=t.isCollapsed?[tt(t.getFirstPosition(),"linkHref",t.getAttribute("linkHref"),e)]:e.schema.getValidRanges(t.getRanges(),"linkHref");for(const a of l)if(s.removeAttribute("linkHref",a),o)for(const r of o.manualDecorators)s.removeAttribute(r.id,a)})}}class kl extends os(){constructor({id:e,label:t,attributes:o,classes:s,styles:l,defaultValue:a}){super();p(this,"id");p(this,"defaultValue");p(this,"label");p(this,"attributes");p(this,"classes");p(this,"styles");this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=t,this.attributes=o,this.classes=s,this.styles=l}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const xl="ck-link_selected",St="automatic",Il="manual",Tl=/^(https?:)?\/\//;class Rn extends y{static get pluginName(){return"LinkEditing"}static get requires(){return[mt,Yo,Ee]}constructor(n){super(n),n.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const n=this.editor,e=this.editor.config.get("link.allowedProtocols");n.model.schema.extend("$text",{allowAttributes:"linkHref"}),n.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:xt}),n.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(s,l)=>xt(Sn(s,e),l)}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:s=>s.getAttribute("href")}}),n.commands.add("link",new vl(n)),n.commands.add("unlink",new yl(n));const t=wl(n.t,_l(n.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter(s=>s.mode===St)),this._enableManualDecorators(t.filter(s=>s.mode===Il)),n.plugins.get(mt).registerAttribute("linkHref"),Zo(n,"linkHref","a",xl),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(n){const e=this.editor,o=e.commands.get("link").automaticDecorators;e.config.get("link.addTargetToExternalLinks")&&o.add({id:"linkIsExternal",mode:St,callback:s=>!!s&&Tl.test(s),attributes:{target:"_blank",rel:"noopener noreferrer"}}),o.add(n),o.length&&e.conversion.for("downcast").add(o.getDispatcher())}_enableManualDecorators(n){if(!n.length)return;const e=this.editor,o=e.commands.get("link").manualDecorators;n.forEach(s=>{e.model.schema.extend("$text",{allowAttributes:s.id});const l=new kl(s);o.add(l),e.conversion.for("downcast").attributeToElement({model:l.id,view:(a,{writer:r,schema:c},{item:d})=>{if((d.is("selection")||c.isInline(d))&&a){const h=r.createAttributeElement("a",l.attributes,{priority:5});l.classes&&r.addClass(l.classes,h);for(const m in l.styles)r.setStyle(m,l.styles[m],h);return r.setCustomProperty("link",!0,h),h}}}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",...l._createPattern()},model:{key:l.id}})})}_enableLinkOpen(){const n=this.editor,t=n.editing.view.document;this.listenTo(t,"click",(o,s)=>{if(!(Xo.isMac?s.domEvent.metaKey:s.domEvent.ctrlKey))return;let a=s.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const r=a.getAttribute("href");r&&(o.stop(),s.preventDefault(),It(r))},{context:"$capture"}),this.listenTo(t,"keydown",(o,s)=>{const a=n.commands.get("link").value;a&&s.keyCode===Qo.enter&&s.altKey&&(o.stop(),It(a))})}_enableSelectionAttributesFixer(){const e=this.editor.model,t=e.document.selection;this.listenTo(t,"change:attribute",(o,{attributeKeys:s})=>{!s.includes("linkHref")||t.hasAttribute("linkHref")||e.change(l=>{Sl(l,Al(e.schema))})})}_enableClipboardIntegration(){const n=this.editor,e=n.model,t=this.editor.config.get("link.defaultProtocol");t&&this.listenTo(n.plugins.get("ClipboardPipeline"),"contentInsertion",(o,s)=>{e.change(l=>{const a=l.createRangeIn(s.content);for(const r of a.getItems())if(r.hasAttribute("linkHref")){const c=st(r.getAttribute("linkHref"),t);l.setAttribute("linkHref",c,r)}})})}}function Sl(i,n){i.removeSelectionAttribute("linkHref");for(const e of n)i.removeSelectionAttribute(e)}function Al(i){return i.getDefinition("$text").allowAttributes.filter(e=>e.startsWith("link"))}class Rl extends de{constructor(e,t,o){super(e);p(this,"focusTracker",new pe);p(this,"keystrokes",new be);p(this,"urlInputView");p(this,"saveButtonView");p(this,"cancelButtonView");p(this,"_manualDecoratorSwitches");p(this,"children");p(this,"_validators");p(this,"_focusables",new Ve);p(this,"_focusCycler");const s=e.t;this._validators=o,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(s("Save"),O.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(s("Cancel"),O.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new Be({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const l=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&l.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:l,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),et({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,t=new Yt(this.locale,Zt);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,o,s){const l=new N(this.locale);return l.set({label:e,icon:t,tooltip:!0}),l.extendTemplate({attributes:{class:o}}),s&&l.delegate("execute").to(this,s),l}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const o of e.manualDecorators){const s=new Qt(this.locale);s.set({name:o.id,label:o.label,withText:!0}),s.bind("isOn").toMany([o,e],"value",(l,a)=>a===void 0&&l===void 0?!!o.defaultValue:!!l),s.on("execute",()=>{o.set("value",!s.isOn)}),t.add(s)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const o=new de;o.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(s=>({tag:"li",children:[s],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(o)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}var El='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class Vl extends de{constructor(e,t={}){super(e);p(this,"focusTracker",new pe);p(this,"keystrokes",new be);p(this,"previewButtonView");p(this,"unlinkButtonView");p(this,"editButtonView");p(this,"_focusables",new Ve);p(this,"_focusCycler");p(this,"_linkConfig");const o=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(o("Unlink"),El,"unlink"),this.editButtonView=this._createButton(o("Edit link"),O.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new Be({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,o){const s=new N(this.locale);return s.set({label:e,icon:t,tooltip:!0}),s.delegate("execute").to(this,o),s}_createPreviewButton(){const e=new N(this.locale),t=this.bindTemplate,o=this.t;return e.set({withText:!0,tooltip:o("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",s=>s&&Sn(s,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",s=>s||o("This link has no URL")),e.bind("isEnabled").to(this,"href",s=>!!s),e.template.tag="a",e.template.eventListeners={},e}}var Bl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const q="link-ui";class Ll extends y{constructor(){super(...arguments);p(this,"actionsView",null);p(this,"formView",null);p(this,"_balloon")}static get requires(){return[Me]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,t=this.editor.t;e.editing.view.addObserver($o),this._balloon=e.plugins.get(Me),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:q,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:q,view:(o,{writer:s})=>{if(!o.markerRange.isCollapsed)return null;const l=s.createUIElement("span");return s.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],l),l}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:_e},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new Vl(e.locale,e.config.get("link")),o=e.commands.get("link"),s=e.commands.get("unlink");return t.bind("href").to(o,"value"),t.editButtonView.bind("isEnabled").to(o),t.unlinkButtonView.bind("isEnabled").to(s),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(l,a)=>{this._hideUI(),a()}),t.keystrokes.set(_e,(l,a)=>{this._addFormView(),a()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),o=e.config.get("link.defaultProtocol"),s=new(Gt(Rl))(e.locale,t,Pl(e));return s.urlInputView.fieldView.bind("value").to(t,"value"),s.urlInputView.bind("isEnabled").to(t,"isEnabled"),s.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(s,"submit",()=>{if(s.isValid()){const{value:l}=s.urlInputView.fieldView.element,a=st(l,o);e.execute("link",a,s.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(s.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(s,"cancel",()=>{this._closeFormView()}),s.keystrokes.set("Esc",(l,a)=>{this._closeFormView(),a()}),s}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const t=this._createButton(N);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(Z);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,o=t.locale,s=t.commands.get("link"),l=new e(t.locale),a=o.t;return l.set({label:a("Link"),icon:Bl,keystroke:_e,isToggleable:!0}),l.bind("isEnabled").to(s,"isEnabled"),l.bind("isOn").to(s,"value",r=>!!r),this.listenTo(l,"execute",()=>this._showUI(!0)),l}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(_e,(o,s)=>{s(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),Jt({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let o=this._getSelectedLinkElement(),s=a();const l=()=>{const r=this._getSelectedLinkElement(),c=a();o&&!r||!o&&c!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),o=r,s=c};function a(){return t.selection.focus.getAncestors().reverse().find(r=>r.is("element"))}this.listenTo(e.ui,"update",l),this.listenTo(this._balloon,"change:visibleView",l)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,o=e.document;let s;if(t.markers.has(q)){const l=Array.from(this.editor.editing.mapper.markerNameToElements(q)),a=e.createRange(e.createPositionBefore(l[0]),e.createPositionAfter(l[l.length-1]));s=e.domConverter.viewRangeToDom(a)}else s=()=>{const l=this._getSelectedLinkElement();return l?e.domConverter.mapViewToDom(l):e.domConverter.viewRangeToDom(o.selection.getFirstRange())};return{target:s}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,o=t.getSelectedElement();if(t.isCollapsed||o&&$e(o))return He(t.getFirstPosition());{const s=t.getFirstRange().getTrimmed(),l=He(s.start),a=He(s.end);return!l||l!=a?null:e.createRangeIn(l).getTrimmed().isEqual(s)?l:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const o=e.document.selection.getFirstRange();if(e.markers.has(q))t.updateMarker(q,{range:o});else if(o.start.isAtEnd){const s=o.start.getLastMatchingPosition(({item:l})=>!e.schema.isContent(l),{boundaries:o});t.addMarker(q,{usingOperation:!1,affectsData:!1,range:t.createRange(s,o.end)})}else t.addMarker(q,{usingOperation:!1,affectsData:!1,range:o})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(q)&&e.change(t=>{t.removeMarker(q)})}}function He(i){return i.getAncestors().find(n=>pl(n))||null}function Pl(i){const n=i.t,e=i.config.get("link.allowCreatingEmptyLinks");return[t=>{if(!e&&!t.url.length)return n("Link URL must not be empty.")}]}const Fl=4,En=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Ul=2;class Hl extends y{static get requires(){return[es,Rn]}static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(n,e){return e.textNode&&e.textNode.hasAttribute("linkHref")?tt(e,"linkHref",e.textNode.getAttribute("linkHref"),n):null}_selectEntireLinks(n,e){const o=this.editor.model,s=o.document.selection,l=s.getFirstPosition(),a=s.getLastPosition();let r=e.getJoined(this._expandLinkRange(o,l)||e);r&&(r=r.getJoined(this._expandLinkRange(o,a)||e)),r&&(r.start.isBefore(l)||r.end.isAfter(a))&&n.setSelection(r)}_enablePasteLinking(){const n=this.editor,e=n.model,t=e.document.selection,o=n.plugins.get("ClipboardPipeline"),s=n.commands.get("link");o.on("inputTransformation",(l,a)=>{if(!this.isEnabled||!s.isEnabled||t.isCollapsed||a.method!=="paste"||t.rangeCount>1)return;const r=t.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const d=c.match(En);d&&d[2]===c&&(e.change(h=>{this._selectEntireLinks(h,r),s.execute(c)}),l.stop())},{priority:"high"})}_enableTypingHandling(){const n=this.editor,e=new ts(n.model,t=>{if(!Ol(t))return;const o=At(t.substr(0,t.length-1));if(o)return{url:o}});e.on("matched:data",(t,o)=>{const{batch:s,range:l,url:a}=o;if(!s.isTyping)return;const r=l.end.getShiftedBy(-1),c=r.getShiftedBy(-a.length),d=n.model.createRange(c,r);this._applyAutoLink(a,d)}),e.bind("isEnabled").to(this)}_enableEnterHandling(){const n=this.editor,e=n.model,t=n.commands.get("enter");t&&t.on("execute",()=>{const o=e.document.selection.getFirstPosition();if(!o.parent.previousSibling)return;const s=e.createRangeIn(o.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(s)})}_enableShiftEnterHandling(){const n=this.editor,e=n.model,t=n.commands.get("shiftEnter");t&&t.on("execute",()=>{const o=e.document.selection.getFirstPosition(),s=e.createRange(e.createPositionAt(o.parent,0),o.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(s)})}_checkAndApplyAutoLinkOnRange(n){const e=this.editor.model,{text:t,range:o}=ns(n,e),s=At(t);if(s){const l=e.createRange(o.end.getShiftedBy(-s.length),o.end);this._applyAutoLink(s,l)}}_applyAutoLink(n,e){const t=this.editor.model,o=this.editor.config.get("link.defaultProtocol"),s=st(n,o);!this.isEnabled||!Ml(e,t)||!An(s)||Nl(e)||this._persistAutoLink(s,e)}_persistAutoLink(n,e){const t=this.editor.model,o=this.editor.plugins.get("Delete");t.enqueueChange(s=>{s.setAttribute("linkHref",n,e),t.enqueueChange(()=>{o.requestUndoOnBackspace()})})}}function Ol(i){return i.length>Fl&&i[i.length-1]===" "&&i[i.length-2]!==" "}function At(i){const n=En.exec(i);return n?n[Ul]:null}function Ml(i,n){return n.schema.checkAttributeInSelection(n.createSelection(i),"linkHref")}function Nl(i){const n=i.start.nodeAfter;return!!n&&n.hasAttribute("linkHref")}class Dl extends y{static get requires(){return[Rn,Ll,Hl]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function E(i,n,e,t,o=1){n!=null&&o!==void 0&&o!==null&&n>o?t.setAttribute(i,n,e):t.removeAttribute(i,e)}function te(i,n,e={}){const t=i.createElement("tableCell",e);return i.insertElement("paragraph",t),i.insert(t,n),t}function qe(i,n){const e=n.parent.parent,t=parseInt(e.getAttribute("headingColumns")||"0"),{column:o}=i.getCellLocation(n);return!!t&&o<t}function zl(){return i=>{i.on("element:figure",(n,e,t)=>{if(!t.consumable.test(e.viewItem,{name:!0,classes:"table"}))return;const o=jl(e.viewItem);if(!o||!t.consumable.test(o,{name:!0}))return;t.consumable.consume(e.viewItem,{name:!0,classes:"table"});const s=t.convertItem(o,e.modelCursor),l=$(s.modelRange.getItems());if(!l){t.consumable.revert(e.viewItem,{name:!0,classes:"table"});return}t.convertChildren(e.viewItem,t.writer.createPositionAt(l,"end")),t.updateConversionResult(l,e)})}}function Wl(){return i=>{i.on("element:table",(n,e,t)=>{const o=e.viewItem;if(!t.consumable.test(o,{name:!0}))return;const{rows:s,headingRows:l,headingColumns:a}=Kl(o),r={};a&&(r.headingColumns=a),l&&(r.headingRows=l);const c=t.writer.createElement("table",r);if(t.safeInsert(c,e.modelCursor)){if(t.consumable.consume(o,{name:!0}),s.forEach(d=>t.convertItem(d,t.writer.createPositionAt(c,"end"))),t.convertChildren(o,t.writer.createPositionAt(c,"end")),c.isEmpty){const d=t.writer.createElement("tableRow");t.writer.insert(d,t.writer.createPositionAt(c,"end")),te(t.writer,t.writer.createPositionAt(d,"end"))}t.updateConversionResult(c,e)}})}}function ql(){return i=>{i.on("element:tr",(n,e)=>{e.viewItem.isEmpty&&e.modelCursor.index==0&&n.stop()},{priority:"high"})}}function Rt(i){return n=>{n.on(`element:${i}`,(e,t,{writer:o})=>{if(!t.modelRange)return;const s=t.modelRange.start.nodeAfter,l=o.createPositionAt(s,0);if(t.viewItem.isEmpty){o.insertElement("paragraph",l);return}const a=Array.from(s.getChildren());if(a.every(r=>r.is("element","$marker"))){const r=o.createElement("paragraph");o.insert(r,o.createPositionAt(s,0));for(const c of a)o.move(o.createRangeOn(c),o.createPositionAt(r,"end"))}},{priority:"low"})}}function jl(i){for(const n of i.getChildren())if(n.is("element","table"))return n}function Kl(i){let n=0,e;const t=[],o=[];let s;for(const l of Array.from(i.getChildren())){if(l.name!=="tbody"&&l.name!=="thead"&&l.name!=="tfoot")continue;l.name==="thead"&&!s&&(s=l);const a=Array.from(l.getChildren()).filter(r=>r.is("element","tr"));for(const r of a)if(s&&l===s||l.name==="tbody"&&Array.from(r.getChildren()).length&&Array.from(r.getChildren()).every(c=>c.is("element","th")))n++,t.push(r);else{o.push(r);const c=Gl(r);(!e||c<e)&&(e=c)}}return{headingRows:n,headingColumns:e||0,rows:[...t,...o]}}function Gl(i){let n=0,e=0;const t=Array.from(i.getChildren()).filter(o=>o.name==="th"||o.name==="td");for(;e<t.length&&t[e].name==="th";){const o=t[e],s=parseInt(o.getAttribute("colspan")||"1");n=n+s,e++}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I{constructor(n,e={}){p(this,"_table");p(this,"_startRow");p(this,"_endRow");p(this,"_startColumn");p(this,"_endColumn");p(this,"_includeAllSlots");p(this,"_skipRows");p(this,"_row");p(this,"_rowIndex");p(this,"_column");p(this,"_cellIndex");p(this,"_spannedCells");p(this,"_nextCellAtColumn");p(this,"_jumpedToStartRow",!1);this._table=n,this._startRow=e.row!==void 0?e.row:e.startRow||0,this._endRow=e.row!==void 0?e.row:e.endRow,this._startColumn=e.column!==void 0?e.column:e.startColumn||0,this._endColumn=e.column!==void 0?e.column:e.endColumn,this._includeAllSlots=!!e.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const n=this._table.getChild(this._rowIndex);if(!n||this._isOverEndRow())return{done:!0,value:void 0};if(!n.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let e=null;const t=this._getSpanned();if(t)this._includeAllSlots&&!this._shouldSkipSlot()&&(e=this._formatOutValue(t.cell,t.row,t.column));else{const o=n.getChild(this._cellIndex);if(!o)return this._advanceToNextRow();const s=parseInt(o.getAttribute("colspan")||"1"),l=parseInt(o.getAttribute("rowspan")||"1");(s>1||l>1)&&this._recordSpans(o,l,s),this._shouldSkipSlot()||(e=this._formatOutValue(o)),this._nextCellAtColumn=this._column+s}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,e||this.next()}skipRow(n){this._skipRows.add(n)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(n,e=this._row,t=this._column){return{done:!1,value:new Jl(this,n,e,t)}}_shouldSkipSlot(){const n=this._skipRows.has(this._row),e=this._row<this._startRow,t=this._column<this._startColumn,o=this._endColumn!==void 0&&this._column>this._endColumn;return n||e||t||o}_getSpanned(){const n=this._spannedCells.get(this._row);return n&&n.get(this._column)||null}_recordSpans(n,e,t){const o={cell:n,row:this._row,column:this._column};for(let s=this._row;s<this._row+e;s++)for(let l=this._column;l<this._column+t;l++)(s!=this._row||l!=this._column)&&this._markSpannedCell(s,l,o)}_markSpannedCell(n,e,t){this._spannedCells.has(n)||this._spannedCells.set(n,new Map),this._spannedCells.get(n).set(e,t)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const n=this._getRowLength(0);for(let e=this._startRow;!this._jumpedToStartRow;e--)n===this._getRowLength(e)&&(this._row=e,this._rowIndex=e,this._jumpedToStartRow=!0)}_getRowLength(n){return[...this._table.getChild(n).getChildren()].reduce((t,o)=>t+parseInt(o.getAttribute("colspan")||"1"),0)}}class Jl{constructor(n,e,t,o){p(this,"cell");p(this,"row");p(this,"column");p(this,"cellAnchorRow");p(this,"cellAnchorColumn");p(this,"_cellIndex");p(this,"_rowIndex");p(this,"_table");this.cell=e,this.row=n._row,this.column=n._column,this.cellAnchorRow=t,this.cellAnchorColumn=o,this._cellIndex=n._cellIndex,this._rowIndex=n._rowIndex,this._table=n._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function Et(i,n){return(e,{writer:t})=>{const o=e.getAttribute("headingRows")||0,s=t.createContainerElement("table",null,[]),l=t.createContainerElement("figure",{class:"table"},s);o>0&&t.insert(t.createPositionAt(s,"end"),t.createContainerElement("thead",null,t.createSlot(a=>a.is("element","tableRow")&&a.index<o))),o<i.getRows(e)&&t.insert(t.createPositionAt(s,"end"),t.createContainerElement("tbody",null,t.createSlot(a=>a.is("element","tableRow")&&a.index>=o)));for(const{positionOffset:a,filter:r}of n.additionalSlots)t.insert(t.createPositionAt(s,a),t.createSlot(r));return t.insert(t.createPositionAt(s,"after"),t.createSlot(a=>a.is("element","tableRow")?!1:!n.additionalSlots.some(({filter:r})=>r(a)))),n.asWidget?Zl(l,t):l}}function Yl(){return(i,{writer:n})=>i.isEmpty?n.createEmptyElement("tr"):n.createContainerElement("tr")}function Vt(i={}){return(n,{writer:e})=>{const t=n.parent,o=t.parent,s=o.getChildIndex(t),l=new I(o,{row:s}),a=o.getAttribute("headingRows")||0,r=o.getAttribute("headingColumns")||0;let c=null;for(const d of l)if(d.cell==n){const m=d.row<a||d.column<r?"th":"td";c=i.asWidget?is(e.createEditableElement(m),e):e.createContainerElement(m);break}return c}}function Bt(i={}){return(n,{writer:e})=>{if(!n.parent.is("element","tableCell")||!Vn(n))return null;if(i.asWidget)return e.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const t=e.createContainerElement("p");return e.setCustomProperty("dataPipeline:transparentRendering",!0,t),t}}}function Vn(i){return i.parent.childCount==1&&!Xl(i)}function Zl(i,n){return n.setCustomProperty("table",!0,i),Kt(i,n,{hasSelectionHandle:!0})}function Xl(i){return!i.getAttributeKeys().next().done}class Ql extends S{refresh(){const n=this.editor.model,e=n.document.selection,t=n.schema;this.isEnabled=$l(e,t)}execute(n={}){const e=this.editor,t=e.model,o=e.plugins.get("TableUtils"),s=e.config.get("table.defaultHeadings.rows"),l=e.config.get("table.defaultHeadings.columns");n.headingRows===void 0&&s&&(n.headingRows=s),n.headingColumns===void 0&&l&&(n.headingColumns=l),t.change(a=>{const r=o.createTable(a,n);t.insertObject(r,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(r.getNodeByPath([0,0,0]),0))})}}function $l(i,n){const e=i.getFirstPosition().parent,t=e===e.root?e:e.parent;return n.checkChild(t,"table")}class Lt extends S{constructor(e,t={}){super(e);p(this,"order");this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,o=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=o}execute(){const e=this.editor,t=e.model.document.selection,o=e.plugins.get("TableUtils"),s=this.order==="above",l=o.getSelectionAffectedTableCells(t),a=o.getRowIndexes(l),r=s?a.first:a.last,c=l[0].findAncestor("table");o.insertRows(c,{at:s?r:r+1,copyStructureFromAbove:!s})}}class Pt extends S{constructor(e,t={}){super(e);p(this,"order");this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,o=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=o}execute(){const e=this.editor,t=e.model.document.selection,o=e.plugins.get("TableUtils"),s=this.order==="left",l=o.getSelectionAffectedTableCells(t),a=o.getColumnIndexes(l),r=s?a.first:a.last,c=l[0].findAncestor("table");o.insertColumns(c,{columns:1,at:s?r:r+1})}}class Ft extends S{constructor(e,t={}){super(e);p(this,"direction");this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}function Bn(i,n,e){const{startRow:t,startColumn:o,endRow:s,endColumn:l}=n,a=e.createElement("table"),r=s-t+1;for(let d=0;d<r;d++)e.insertElement("tableRow",a,"end");const c=[...new I(i,{startRow:t,endRow:s,startColumn:o,endColumn:l,includeAllSlots:!0})];for(const{row:d,column:h,cell:m,isAnchor:f,cellAnchorRow:w,cellAnchorColumn:_}of c){const g=d-t,b=a.getChild(g);if(!f)(w<t||_<o)&&te(e,e.createPositionAt(b,"end"));else{const v=e.cloneElement(m);e.append(v,b),Hn(v,d,h,s,l,e)}}return ea(a,i,t,o,e),a}function Ln(i,n,e=0){const t=[],o=new I(i,{startRow:e,endRow:n-1});for(const s of o){const{row:l,cellHeight:a}=s,r=l+a-1;l<n&&n<=r&&t.push(s)}return t}function Pn(i,n,e){const t=i.parent,o=t.parent,s=t.index,l=parseInt(i.getAttribute("rowspan")),a=n-s,r={},c=l-a;c>1&&(r.rowspan=c);const d=parseInt(i.getAttribute("colspan")||"1");d>1&&(r.colspan=d);const h=s,m=h+a,f=[...new I(o,{startRow:h,endRow:m,includeAllSlots:!0})];let w=null,_;for(const g of f){const{row:b,column:v,cell:F}=g;F===i&&_===void 0&&(_=v),_!==void 0&&_===v&&b===m&&(w=te(e,g.getPositionBefore(),r))}return E("rowspan",a,i,e),w}function Fn(i,n){const e=[],t=new I(i);for(const o of t){const{column:s,cellWidth:l}=o,a=s+l-1;s<n&&n<=a&&e.push(o)}return e}function Un(i,n,e,t){const o=parseInt(i.getAttribute("colspan")),s=e-n,l={},a=o-s;a>1&&(l.colspan=a);const r=parseInt(i.getAttribute("rowspan")||"1");r>1&&(l.rowspan=r);const c=te(t,t.createPositionAfter(i),l);return E("colspan",s,i,t),c}function Hn(i,n,e,t,o,s){const l=parseInt(i.getAttribute("colspan")||"1"),a=parseInt(i.getAttribute("rowspan")||"1");if(e+l-1>o){const d=o-e+1;E("colspan",d,i,s,1)}if(n+a-1>t){const d=t-n+1;E("rowspan",d,i,s,1)}}function ea(i,n,e,t,o){const s=parseInt(n.getAttribute("headingRows")||"0");if(s>0){const a=s-e;E("headingRows",a,i,o,0)}const l=parseInt(n.getAttribute("headingColumns")||"0");if(l>0){const a=l-t;E("headingColumns",a,i,o,0)}}function je(i,n){const e=n.getColumns(i),t=new Array(e).fill(0);for(const{column:s}of new I(i))t[s]++;const o=t.reduce((s,l,a)=>l?s:[...s,a],[]);if(o.length>0){const s=o[o.length-1];return n.removeColumns(i,{at:s}),!0}return!1}function Ke(i,n){const e=[],t=n.getRows(i);for(let o=0;o<t;o++)i.getChild(o).isEmpty&&e.push(o);if(e.length>0){const o=e[e.length-1];return n.removeRows(i,{at:o}),!0}return!1}function it(i,n){je(i,n)||Ke(i,n)}function On(i,n){const e=Array.from(new I(i,{startColumn:n.firstColumn,endColumn:n.lastColumn,row:n.lastRow}));if(e.every(({cellHeight:s})=>s===1))return n.lastRow;const o=e[0].cellHeight-1;return n.lastRow+o}function Mn(i,n){const e=Array.from(new I(i,{startRow:n.firstRow,endRow:n.lastRow,column:n.lastColumn}));if(e.every(({cellWidth:s})=>s===1))return n.lastColumn;const o=e[0].cellWidth-1;return n.lastColumn+o}class Ce extends S{constructor(e,t){super(e);p(this,"direction");p(this,"isHorizontal");this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],l=this.value,a=this.direction;e.change(r=>{const c=a=="right"||a=="down",d=c?s:l,h=c?l:s,m=h.parent;oa(h,d,r);const f=this.isHorizontal?"colspan":"rowspan",w=parseInt(s.getAttribute(f)||"1"),_=parseInt(l.getAttribute(f)||"1");r.setAttribute(f,w+_,d),r.setSelection(r.createRangeIn(d));const g=this.editor.plugins.get("TableUtils"),b=m.findAncestor("table");it(b,g)})}_getMergeableCell(){const t=this.editor.model.document,o=this.editor.plugins.get("TableUtils"),s=o.getTableCellsContainingSelection(t.selection)[0];if(!s)return;const l=this.isHorizontal?ta(s,this.direction,o):na(s,this.direction,o);if(!l)return;const a=this.isHorizontal?"rowspan":"colspan",r=parseInt(s.getAttribute(a)||"1");if(parseInt(l.getAttribute(a)||"1")===r)return l}}function ta(i,n,e){const o=i.parent.parent,s=n=="right"?i.nextSibling:i.previousSibling,l=(o.getAttribute("headingColumns")||0)>0;if(!s)return;const a=n=="right"?i:s,r=n=="right"?s:i,{column:c}=e.getCellLocation(a),{column:d}=e.getCellLocation(r),h=parseInt(a.getAttribute("colspan")||"1"),m=qe(e,a),f=qe(e,r);return l&&m!=f?void 0:c+h===d?s:void 0}function na(i,n,e){const t=i.parent,o=t.parent,s=o.getChildIndex(t);if(n=="down"&&s===e.getRows(o)-1||n=="up"&&s===0)return null;const l=parseInt(i.getAttribute("rowspan")||"1"),a=o.getAttribute("headingRows")||0,r=n=="down"&&s+l===a,c=n=="up"&&s===a;if(a&&(r||c))return null;const d=parseInt(i.getAttribute("rowspan")||"1"),h=n=="down"?s+d:s,m=[...new I(o,{endRow:h})],w=m.find(g=>g.cell===i).column,_=m.find(({row:g,cellHeight:b,column:v})=>v!==w?!1:n=="down"?g===h:h===g+b);return _&&_.cell?_.cell:null}function oa(i,n,e){Ut(i)||(Ut(n)&&e.remove(e.createRangeIn(n)),e.move(e.createRangeIn(i),e.createPositionAt(n,"end"))),e.remove(i)}function Ut(i){const n=i.getChild(0);return i.childCount==1&&n.is("element","paragraph")&&n.isEmpty}class sa extends S{refresh(){const n=this.editor.plugins.get("TableUtils"),e=n.getSelectionAffectedTableCells(this.editor.model.document.selection),t=e[0];if(t){const o=t.findAncestor("table"),l=n.getRows(o)-1,a=n.getRowIndexes(e),r=a.first===0&&a.last===l;this.isEnabled=!r}else this.isEnabled=!1}execute(){const n=this.editor.model,e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(n.document.selection),o=e.getRowIndexes(t),s=t[0],l=s.findAncestor("table"),a=e.getCellLocation(s).column;n.change(r=>{const c=o.last-o.first+1;e.removeRows(l,{at:o.first,rows:c});const d=ia(l,o.first,a,e.getRows(l));r.setSelection(r.createPositionAt(d,0))})}}function ia(i,n,e,t){const o=i.getChild(Math.min(n,t-1));let s=o.getChild(0),l=0;for(const a of o.getChildren()){if(l>e)return s;s=a,l+=parseInt(a.getAttribute("colspan")||"1")}return s}class la extends S{refresh(){const n=this.editor.plugins.get("TableUtils"),e=n.getSelectionAffectedTableCells(this.editor.model.document.selection),t=e[0];if(t){const o=t.findAncestor("table"),s=n.getColumns(o),{first:l,last:a}=n.getColumnIndexes(e);this.isEnabled=a-l<s-1}else this.isEnabled=!1}execute(){const n=this.editor.plugins.get("TableUtils"),[e,t]=ra(this.editor.model.document.selection,n),o=e.parent.parent,s=[...new I(o)],l={first:s.find(r=>r.cell===e).column,last:s.find(r=>r.cell===t).column},a=aa(s,e,t,l);this.editor.model.change(r=>{const c=l.last-l.first+1;n.removeColumns(o,{at:l.first,columns:c}),r.setSelection(r.createPositionAt(a,0))})}}function aa(i,n,e,t){return parseInt(e.getAttribute("colspan")||"1")>1?e:n.previousSibling||e.nextSibling?e.nextSibling||n.previousSibling:t.first?i.reverse().find(({column:s})=>s<t.first).cell:i.reverse().find(({column:s})=>s>t.last).cell}function ra(i,n){const e=n.getSelectionAffectedTableCells(i),t=e[0],o=e.pop(),s=[t,o];return t.isBefore(o)?s:s.reverse()}class ca extends S{refresh(){const n=this.editor.plugins.get("TableUtils"),e=this.editor.model,t=n.getSelectionAffectedTableCells(e.document.selection),o=t.length>0;this.isEnabled=o,this.value=o&&t.every(s=>this._isInHeading(s,s.parent.parent))}execute(n={}){if(n.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection),s=o[0].findAncestor("table"),{first:l,last:a}=e.getRowIndexes(o),r=this.value?l:a+1,c=s.getAttribute("headingRows")||0;t.change(d=>{if(r){const h=r>c?c:0,m=Ln(s,r,h);for(const{cell:f}of m)Pn(f,r,d)}E("headingRows",r,s,d,0)})}_isInHeading(n,e){const t=parseInt(e.getAttribute("headingRows")||"0");return!!t&&n.parent.index<t}}class da extends S{refresh(){const n=this.editor.model,e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(n.document.selection),o=t.length>0;this.isEnabled=o,this.value=o&&t.every(s=>qe(e,s))}execute(n={}){if(n.forceValue===this.value)return;const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection),s=o[0].findAncestor("table"),{first:l,last:a}=e.getColumnIndexes(o),r=this.value?l:a+1;t.change(c=>{if(r){const d=Fn(s,r);for(const{cell:h,column:m}of d)Un(h,m,r,c)}E("headingColumns",r,s,c,0)})}}function ua(i){if(i.is("element","tableColumnGroup"))return i;const n=i.getChildren();return Array.from(n).find(e=>e.is("element","tableColumnGroup"))}function ma(i){const n=ua(i);return n?Array.from(n.getChildren()):[]}class P extends y{static get pluginName(){return"TableUtils"}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(n){const e=n.parent,t=e.parent,o=t.getChildIndex(e),s=new I(t,{row:o});for(const{cell:l,row:a,column:r}of s)if(l===n)return{row:a,column:r};/* istanbul ignore next -- @preserve */}createTable(n,e){const t=n.createElement("table"),o=e.rows||2,s=e.columns||2;return Oe(n,t,0,o,s),e.headingRows&&E("headingRows",Math.min(e.headingRows,o),t,n,0),e.headingColumns&&E("headingColumns",Math.min(e.headingColumns,s),t,n,0),t}insertRows(n,e={}){const t=this.editor.model,o=e.at||0,s=e.rows||1,l=e.copyStructureFromAbove!==void 0,a=e.copyStructureFromAbove?o-1:o,r=this.getRows(n),c=this.getColumns(n);if(o>r)throw new ge("tableutils-insertrows-insert-out-of-range",this,{options:e});t.change(d=>{const h=n.getAttribute("headingRows")||0;if(h>o&&E("headingRows",h+s,n,d,0),!l&&(o===0||o===r)){Oe(d,n,o,s,c);return}const m=l?Math.max(o,a):o,f=new I(n,{endRow:m}),w=new Array(c).fill(1);for(const{row:_,column:g,cellHeight:b,cellWidth:v,cell:F}of f){const K=_+b-1,ne=_<o&&o<=K,me=_<=a&&a<=K;ne?(d.setAttribute("rowspan",b+s,F),w[g]=-v):l&&me&&(w[g]=v)}for(let _=0;_<s;_++){const g=d.createElement("tableRow");d.insert(g,n,o);for(let b=0;b<w.length;b++){const v=w[b],F=d.createPositionAt(g,"end");v>0&&te(d,F,v>1?{colspan:v}:void 0),b+=Math.abs(v)-1}}})}insertColumns(n,e={}){const t=this.editor.model,o=e.at||0,s=e.columns||1;t.change(l=>{const a=n.getAttribute("headingColumns");o<a&&l.setAttribute("headingColumns",a+s,n);const r=this.getColumns(n);if(o===0||r===o){for(const d of n.getChildren())d.is("element","tableRow")&&re(s,l,l.createPositionAt(d,o?"end":0));return}const c=new I(n,{column:o,includeAllSlots:!0});for(const d of c){const{row:h,cell:m,cellAnchorColumn:f,cellAnchorRow:w,cellWidth:_,cellHeight:g}=d;if(f<o){l.setAttribute("colspan",_+s,m);const b=w+g-1;for(let v=h;v<=b;v++)c.skipRow(v)}else re(s,l,d.getPositionBefore())}})}removeRows(n,e){const t=this.editor.model,o=e.rows||1,s=this.getRows(n),l=e.at,a=l+o-1;if(a>s-1)throw new ge("tableutils-removerows-row-index-out-of-range",this,{table:n,options:e});t.change(r=>{const c={first:l,last:a},{cellsToMove:d,cellsToTrim:h}=fa(n,c);if(d.size){const m=a+1;pa(n,m,d,r)}for(let m=a;m>=l;m--)r.remove(n.getChild(m));for(const{rowspan:m,cell:f}of h)E("rowspan",m,f,r);ga(n,c,r),je(n,this)||Ke(n,this)})}removeColumns(n,e){const t=this.editor.model,o=e.at,s=e.columns||1,l=e.at+s-1;t.change(a=>{ha(n,{first:o,last:l},a);const r=ma(n);for(let c=l;c>=o;c--){for(const{cell:d,column:h,cellWidth:m}of[...new I(n)])h<=c&&m>1&&h+m>c?E("colspan",m-1,d,a):h===c&&a.remove(d);if(r[c]){const d=c===0?r[1]:r[c-1],h=parseFloat(r[c].getAttribute("columnWidth")),m=parseFloat(d.getAttribute("columnWidth"));a.remove(r[c]),a.setAttribute("columnWidth",h+m+"%",d)}}Ke(n,this)||je(n,this)})}splitCellVertically(n,e=2){const t=this.editor.model,s=n.parent.parent,l=parseInt(n.getAttribute("rowspan")||"1"),a=parseInt(n.getAttribute("colspan")||"1");t.change(r=>{if(a>1){const{newCellsSpan:c,updatedSpan:d}=Ht(a,e);E("colspan",d,n,r);const h={};c>1&&(h.colspan=c),l>1&&(h.rowspan=l);const m=a>e?e-1:a-1;re(m,r,r.createPositionAfter(n),h)}if(a<e){const c=e-a,d=[...new I(s)],{column:h}=d.find(({cell:_})=>_===n),m=d.filter(({cell:_,cellWidth:g,column:b})=>{const v=_!==n&&b===h,F=b<h&&b+g>h;return v||F});for(const{cell:_,cellWidth:g}of m)r.setAttribute("colspan",g+c,_);const f={};l>1&&(f.rowspan=l),re(c,r,r.createPositionAfter(n),f);const w=s.getAttribute("headingColumns")||0;w>h&&E("headingColumns",w+c,s,r)}})}splitCellHorizontally(n,e=2){const t=this.editor.model,o=n.parent,s=o.parent,l=s.getChildIndex(o),a=parseInt(n.getAttribute("rowspan")||"1"),r=parseInt(n.getAttribute("colspan")||"1");t.change(c=>{if(a>1){const d=[...new I(s,{startRow:l,endRow:l+a-1,includeAllSlots:!0})],{newCellsSpan:h,updatedSpan:m}=Ht(a,e);E("rowspan",m,n,c);const{column:f}=d.find(({cell:g})=>g===n),w={};h>1&&(w.rowspan=h),r>1&&(w.colspan=r);let _=0;for(const g of d){const{column:b,row:v}=g,F=v>=l+m,K=b===f;_>=h&&K&&(_=0),F&&K&&(_||re(1,c,g.getPositionBefore(),w),_++)}}if(a<e){const d=e-a,h=[...new I(s,{startRow:0,endRow:l})];for(const{cell:w,cellHeight:_,row:g}of h)if(w!==n&&g+_>l){const b=_+d;c.setAttribute("rowspan",b,w)}const m={};r>1&&(m.colspan=r),Oe(c,s,l+1,d,1,m);const f=s.getAttribute("headingRows")||0;f>l&&E("headingRows",f+d,s,c)}})}getColumns(n){return[...n.getChild(0).getChildren()].filter(t=>t.is("element","tableCell")).reduce((t,o)=>{const s=parseInt(o.getAttribute("colspan")||"1");return t+s},0)}getRows(n){return Array.from(n.getChildren()).reduce((e,t)=>t.is("element","tableRow")?e+1:e,0)}createTableWalker(n,e={}){return new I(n,e)}getSelectedTableCells(n){const e=[];for(const t of this.sortRanges(n.getRanges())){const o=t.getContainedElement();o&&o.is("element","tableCell")&&e.push(o)}return e}getTableCellsContainingSelection(n){const e=[];for(const t of n.getRanges()){const o=t.start.findAncestor("tableCell");o&&e.push(o)}return e}getSelectionAffectedTableCells(n){const e=this.getSelectedTableCells(n);return e.length?e:this.getTableCellsContainingSelection(n)}getRowIndexes(n){const e=n.map(t=>t.parent.index);return this._getFirstLastIndexesObject(e)}getColumnIndexes(n){const e=n[0].findAncestor("table"),o=[...new I(e)].filter(s=>n.includes(s.cell)).map(s=>s.column);return this._getFirstLastIndexesObject(o)}isSelectionRectangular(n){if(n.length<2||!this._areCellInTheSameTableSection(n))return!1;const e=new Set,t=new Set;let o=0;for(const l of n){const{row:a,column:r}=this.getCellLocation(l),c=parseInt(l.getAttribute("rowspan"))||1,d=parseInt(l.getAttribute("colspan"))||1;e.add(a),t.add(r),c>1&&e.add(a+c-1),d>1&&t.add(r+d-1),o+=c*d}return wa(e,t)==o}sortRanges(n){return Array.from(n).sort(ba)}_getFirstLastIndexesObject(n){const e=n.sort((s,l)=>s-l),t=e[0],o=e[e.length-1];return{first:t,last:o}}_areCellInTheSameTableSection(n){const e=n[0].findAncestor("table"),t=this.getRowIndexes(n),o=parseInt(e.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(t,o))return!1;const s=this.getColumnIndexes(n),l=parseInt(e.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(s,l)}_areIndexesInSameSection({first:n,last:e},t){const o=n<t,s=e<t;return o===s}}function Oe(i,n,e,t,o,s={}){for(let l=0;l<t;l++){const a=i.createElement("tableRow");i.insert(a,n,e),re(o,i,i.createPositionAt(a,"end"),s)}}function re(i,n,e,t={}){for(let o=0;o<i;o++)te(n,e,t)}function Ht(i,n){if(i<n)return{newCellsSpan:1,updatedSpan:1};const e=Math.floor(i/n),t=i-e*n+e;return{newCellsSpan:e,updatedSpan:t}}function ha(i,n,e){const t=i.getAttribute("headingColumns")||0;if(t&&n.first<t){const o=Math.min(t-1,n.last)-n.first+1;e.setAttribute("headingColumns",t-o,i)}}function ga(i,{first:n,last:e},t){const o=i.getAttribute("headingRows")||0;if(n<o){const s=e<o?o-(e-n+1):n;E("headingRows",s,i,t,0)}}function fa(i,{first:n,last:e}){const t=new Map,o=[];for(const{row:s,column:l,cellHeight:a,cell:r}of new I(i,{endRow:e})){const c=s+a-1;if(s>=n&&s<=e&&c>e){const m=e-s+1,f=a-m;t.set(l,{cell:r,rowspan:f})}if(s<n&&c>=n){let m;c>=e?m=e-n+1:m=c-n+1,o.push({cell:r,rowspan:a-m})}}return{cellsToMove:t,cellsToTrim:o}}function pa(i,n,e,t){const s=[...new I(i,{includeAllSlots:!0,row:n})],l=i.getChild(n);let a;for(const{column:r,cell:c,isAnchor:d}of s)if(e.has(r)){const{cell:h,rowspan:m}=e.get(r),f=a?t.createPositionAfter(a):t.createPositionAt(l,0);t.move(t.createRangeOn(h),f),E("rowspan",m,h,t),a=h}else d&&(a=c)}function ba(i,n){const e=i.start,t=n.start;return e.isBefore(t)?-1:1}function wa(i,n){const e=Array.from(i.values()),t=Array.from(n.values()),o=Math.max(...e),s=Math.min(...e),l=Math.max(...t),a=Math.min(...t);return(o-s+1)*(l-a+1)}class _a extends S{refresh(){const n=this.editor.plugins.get(P),e=n.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=n.isSelectionRectangular(e)}execute(){const n=this.editor.model,e=this.editor.plugins.get(P);n.change(t=>{const o=e.getSelectedTableCells(n.document.selection),s=o.shift(),{mergeWidth:l,mergeHeight:a}=va(s,o,e);E("colspan",l,s,t),E("rowspan",a,s,t);for(const c of o)Ca(c,s,t);const r=s.findAncestor("table");it(r,e),t.setSelection(s,"in")})}}function Ca(i,n,e){Ot(i)||(Ot(n)&&e.remove(e.createRangeIn(n)),e.move(e.createRangeIn(i),e.createPositionAt(n,"end"))),e.remove(i)}function Ot(i){const n=i.getChild(0);return i.childCount==1&&n.is("element","paragraph")&&n.isEmpty}function va(i,n,e){let t=0,o=0;for(const c of n){const{row:d,column:h}=e.getCellLocation(c);t=Mt(c,h,t,"colspan"),o=Mt(c,d,o,"rowspan")}const{row:s,column:l}=e.getCellLocation(i),a=t-l,r=o-s;return{mergeWidth:a,mergeHeight:r}}function Mt(i,n,e,t){const o=parseInt(i.getAttribute(t)||"1");return Math.max(e,n+o)}class ya extends S{constructor(n){super(n),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const n=this.editor.model,e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(n.document.selection),o=e.getRowIndexes(t),s=t[0].findAncestor("table"),l=[];for(let a=o.first;a<=o.last;a++)for(const r of s.getChild(a).getChildren())l.push(n.createRangeOn(r));n.change(a=>{a.setSelection(l)})}}class ka extends S{constructor(n){super(n),this.affectsData=!1}refresh(){const e=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=e.length>0}execute(){const n=this.editor.plugins.get("TableUtils"),e=this.editor.model,t=n.getSelectionAffectedTableCells(e.document.selection),o=t[0],s=t.pop(),l=o.findAncestor("table"),a=n.getCellLocation(o),r=n.getCellLocation(s),c=Math.min(a.column,r.column),d=Math.max(a.column,r.column),h=[];for(const m of new I(l,{startColumn:c,endColumn:d}))h.push(e.createRangeOn(m.cell));e.change(m=>{m.setSelection(h)})}}function xa(i){i.document.registerPostFixer(n=>Ia(n,i))}function Ia(i,n){const e=n.document.differ.getChanges();let t=!1;const o=new Set;for(const s of e){let l=null;s.type=="insert"&&s.name=="table"&&(l=s.position.nodeAfter),(s.type=="insert"||s.type=="remove")&&(s.name=="tableRow"||s.name=="tableCell")&&(l=s.position.findAncestor("table")),Ea(s)&&(l=s.range.start.findAncestor("table")),l&&!o.has(l)&&(t=Ta(l,i)||t,t=Sa(l,i)||t,o.add(l))}return t}function Ta(i,n){let e=!1;const t=Aa(i);if(t.length){e=!0;for(const o of t)E("rowspan",o.rowspan,o.cell,n,1)}return e}function Sa(i,n){let e=!1;const t=Ra(i),o=[];for(const[r,c]of t.entries())!c&&i.getChild(r).is("element","tableRow")&&o.push(r);if(o.length){e=!0;for(const r of o.reverse())n.remove(i.getChild(r)),t.splice(r,1)}const s=t.filter((r,c)=>i.getChild(c).is("element","tableRow")),l=s[0];if(!s.every(r=>r===l)){const r=s.reduce((c,d)=>d>c?d:c,0);for(const[c,d]of s.entries()){const h=r-d;if(h){for(let m=0;m<h;m++)te(n,n.createPositionAt(i.getChild(c),"end"));e=!0}}}return e}function Aa(i){const n=parseInt(i.getAttribute("headingRows")||"0"),e=Array.from(i.getChildren()).reduce((o,s)=>s.is("element","tableRow")?o+1:o,0),t=[];for(const{row:o,cell:s,cellHeight:l}of new I(i)){if(l<2)continue;const r=o<n?n:e;if(o+l>r){const c=r-o;t.push({cell:s,rowspan:c})}}return t}function Ra(i){const n=new Array(i.childCount).fill(0);for(const{rowIndex:e}of new I(i,{includeAllSlots:!0}))n[e]++;return n}function Ea(i){if(i.type!=="attribute")return!1;const n=i.attributeKey;return n==="headingRows"||n==="colspan"||n==="rowspan"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Va(i){i.document.registerPostFixer(n=>Ba(n,i))}function Ba(i,n){const e=n.document.differ.getChanges();let t=!1;for(const o of e)o.type=="insert"&&o.name=="table"&&(t=La(o.position.nodeAfter,i)||t),o.type=="insert"&&o.name=="tableRow"&&(t=Nn(o.position.nodeAfter,i)||t),o.type=="insert"&&o.name=="tableCell"&&(t=Ge(o.position.nodeAfter,i)||t),(o.type=="remove"||o.type=="insert")&&Pa(o)&&(t=Ge(o.position.parent,i)||t);return t}function La(i,n){let e=!1;for(const t of i.getChildren())t.is("element","tableRow")&&(e=Nn(t,n)||e);return e}function Nn(i,n){let e=!1;for(const t of i.getChildren())e=Ge(t,n)||e;return e}function Ge(i,n){if(i.childCount==0)return n.insertElement("paragraph",i),!0;const e=Array.from(i.getChildren()).filter(t=>t.is("$text"));for(const t of e)n.wrap(n.createRangeOn(t),"paragraph");return!!e.length}function Pa(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}function Fa(i,n){const e=i.document.differ;for(const t of e.getChanges()){let o,s=!1;if(t.type=="attribute"){const c=t.range.start.nodeAfter;if(!c||!c.is("element","table")||t.attributeKey!="headingRows"&&t.attributeKey!="headingColumns")continue;o=c,s=t.attributeKey=="headingRows"}else(t.name=="tableRow"||t.name=="tableCell")&&(o=t.position.findAncestor("table"),s=t.name=="tableRow");if(!o)continue;const l=o.getAttribute("headingRows")||0,a=o.getAttribute("headingColumns")||0,r=new I(o);for(const c of r){const h=c.row<l||c.column<a?"th":"td",m=n.mapper.toViewElement(c.cell);m&&m.is("element")&&m.name!=h&&n.reconvertItem(s?c.cell.parent:c.cell)}}}function Ua(i,n){const e=i.document.differ,t=new Set;for(const o of e.getChanges()){const s=o.type=="attribute"?o.range.start.parent:o.position.parent;s.is("element","tableCell")&&t.add(s)}for(const o of t.values()){const s=Array.from(o.getChildren()).filter(l=>Ha(l,n.mapper));for(const l of s)n.reconvertItem(l)}}function Ha(i,n){if(!i.is("element","paragraph"))return!1;const e=n.toViewElement(i);return e?Vn(i)!==e.is("element","span"):!1}class Oa extends y{constructor(e){super(e);p(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get requires(){return[P]}init(){const e=this.editor,t=e.model,o=t.schema,s=e.conversion,l=e.plugins.get(P);o.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),o.register("tableRow",{allowIn:"table",isLimit:!0}),o.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(zl()),s.for("upcast").add(Wl()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Et(l,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Et(l,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(ql()),s.for("downcast").elementToElement({model:"tableRow",view:Yl()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(Rt("td")),s.for("upcast").add(Rt("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:Vt({asWidget:!0})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:Vt()}),s.for("editingDowncast").elementToElement({model:"paragraph",view:Bt({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:Bt(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:Nt("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Nt("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new Ql(e)),e.commands.add("insertTableRowAbove",new Lt(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Lt(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new Pt(e,{order:"left"})),e.commands.add("insertTableColumnRight",new Pt(e,{order:"right"})),e.commands.add("removeTableRow",new sa(e)),e.commands.add("removeTableColumn",new la(e)),e.commands.add("splitTableCellVertically",new Ft(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new Ft(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new _a(e)),e.commands.add("mergeTableCellRight",new Ce(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Ce(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Ce(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Ce(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new da(e)),e.commands.add("setTableRowHeader",new ca(e)),e.commands.add("selectTableRow",new ya(e)),e.commands.add("selectTableColumn",new ka(e)),xa(t),Va(t),this.listenTo(t.document,"change:data",()=>{Fa(t,e.editing),Ua(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function Nt(i){return n=>{const e=parseInt(n.getAttribute(i));return Number.isNaN(e)||e<=0?null:e}}class Dt extends de{constructor(e){super(e);p(this,"items");p(this,"keystrokes");p(this,"focusTracker");const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new be,this.focusTracker=new pe,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(o,s)=>`${s} × ${o}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(o=>{o.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(o,s)=>{const{row:l,column:a}=s.target.dataset;this.items.get((parseInt(l,10)-1)*10+(parseInt(a,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(o,s,l)=>{if(!l)return;const{row:a,column:r}=l.dataset;this.set({rows:parseInt(a),columns:parseInt(r)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),ls({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((o,s)=>{const l=Math.floor(s/10),a=s%10,r=l<e&&a<t;o.set("isOn",r)})}_createGridButton(e,t,o,s){const l=new N(e);return l.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),l.extendTemplate({attributes:{"data-row":t,"data-column":o}}),l}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const o=Math.floor(t/10),s=t%10,l=`${o+1} × ${s+1}`;e.push(this._createGridButton(this.locale,o+1,s+1,l))}return this.createCollection(e)}}var Ma='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',Na='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',Da='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class za extends y{static get pluginName(){return"TableUI"}init(){const n=this.editor,e=this.editor.t,o=n.locale.contentLanguageDirection==="ltr";n.ui.componentFactory.add("insertTable",s=>{const l=n.commands.get("insertTable"),a=X(s);a.bind("isEnabled").to(l),a.buttonView.set({icon:O.table,label:e("Insert table"),tooltip:!0});let r;return a.on("change:isOpen",()=>{r||(r=new Dt(s),a.panelView.children.add(r),r.delegate("execute").to(a),a.on("execute",()=>{n.execute("insertTable",{rows:r.rows,columns:r.columns}),n.editing.view.focus()}))}),a}),n.ui.componentFactory.add("menuBar:insertTable",s=>{const l=n.commands.get("insertTable"),a=new ue(s),r=new Dt(s);return r.delegate("execute").to(a),a.on("change:isOpen",(c,d,h)=>{h||r.reset()}),r.on("execute",()=>{n.execute("insertTable",{rows:r.rows,columns:r.columns}),n.editing.view.focus()}),a.buttonView.set({label:e("Table"),icon:O.table}),a.panelView.children.add(r),a.bind("isEnabled").to(l),a}),n.ui.componentFactory.add("tableColumn",s=>{const l=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:o?"insertTableColumnLeft":"insertTableColumnRight",label:e("Insert column left")}},{type:"button",model:{commandName:o?"insertTableColumnRight":"insertTableColumnLeft",label:e("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:e("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:e("Select column")}}];return this._prepareDropdown(e("Column"),Ma,l,s)}),n.ui.componentFactory.add("tableRow",s=>{const l=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:e("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:e("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:e("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:e("Select row")}}];return this._prepareDropdown(e("Row"),Na,l,s)}),n.ui.componentFactory.add("mergeTableCells",s=>{const l=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("Merge cell up")}},{type:"button",model:{commandName:o?"mergeTableCellRight":"mergeTableCellLeft",label:e("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("Merge cell down")}},{type:"button",model:{commandName:o?"mergeTableCellLeft":"mergeTableCellRight",label:e("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(e("Merge cells"),Da,l,s)})}_prepareDropdown(n,e,t,o){const s=this.editor,l=X(o),a=this._fillDropdownWithListOptions(l,t);return l.buttonView.set({label:n,icon:e,tooltip:!0}),l.bind("isEnabled").toMany(a,"isEnabled",(...r)=>r.some(c=>c)),this.listenTo(l,"execute",r=>{s.execute(r.source.commandName),r.source instanceof Qt||s.editing.view.focus()}),l}_prepareMergeSplitButtonDropdown(n,e,t,o){const s=this.editor,l=X(o,jt),a="mergeTableCells",r=s.commands.get(a),c=this._fillDropdownWithListOptions(l,t);return l.buttonView.set({label:n,icon:e,tooltip:!0,isEnabled:!0}),l.bind("isEnabled").toMany([r,...c],"isEnabled",(...d)=>d.some(h=>h)),this.listenTo(l.buttonView,"execute",()=>{s.execute(a),s.editing.view.focus()}),this.listenTo(l,"execute",d=>{s.execute(d.source.commandName),s.editing.view.focus()}),l}_fillDropdownWithListOptions(n,e){const t=this.editor,o=[],s=new fe;for(const l of e)Wa(l,t,o,s);return Te(n,s),o}}function Wa(i,n,e,t){if(i.type==="button"||i.type==="switchbutton"){const o=i.model=new Re(i.model),{commandName:s,bindIsOn:l}=i.model,a=n.commands.get(s);e.push(a),o.set({commandName:s}),o.bind("isEnabled").to(a),l&&o.bind("isOn").to(a,"value"),o.set({withText:!0})}t.add(i)}class Q extends y{static get pluginName(){return"TableSelection"}static get requires(){return[P,P]}init(){const n=this.editor,e=n.model,t=n.editing.view;this.listenTo(e,"deleteContent",(o,s)=>this._handleDeleteContent(o,s),{priority:"high"}),this.listenTo(t.document,"insertText",(o,s)=>this._handleInsertTextEvent(o,s),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const n=this.editor.plugins.get(P),e=this.editor.model.document.selection,t=n.getSelectedTableCells(e);return t.length==0?null:t}getSelectionAsFragment(){const n=this.editor.plugins.get(P),e=this.getSelectedTableCells();return e?this.editor.model.change(t=>{const o=t.createDocumentFragment(),{first:s,last:l}=n.getColumnIndexes(e),{first:a,last:r}=n.getRowIndexes(e),c=e[0].findAncestor("table");let d=r,h=l;if(n.isSelectionRectangular(e)){const w={firstColumn:s,lastColumn:l,firstRow:a,lastRow:r};d=On(c,w),h=Mn(c,w)}const f=Bn(c,{startRow:a,startColumn:s,endRow:d,endColumn:h},t);return t.insert(f,o,0),o}):null}setCellSelection(n,e){const t=this._getCellsToSelect(n,e);this.editor.model.change(o=>{o.setSelection(t.cells.map(s=>o.createRangeOn(s)),{backward:t.backward})})}getFocusCell(){const t=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return t&&t.is("element","tableCell")?t:null}getAnchorCell(){const n=this.editor.model.document.selection,t=$(n.getRanges()).getContainedElement();return t&&t.is("element","tableCell")?t:null}_defineSelectionConverter(){const n=this.editor,e=new Set;n.conversion.for("editingDowncast").add(o=>o.on("selection",(s,l,a)=>{const r=a.writer;t(r);const c=this.getSelectedTableCells();if(!c)return;for(const h of c){const m=a.mapper.toViewElement(h);r.addClass("ck-editor__editable_selected",m),e.add(m)}const d=a.mapper.toViewElement(c[c.length-1]);r.setSelection(d,0)},{priority:"lowest"}));function t(o){for(const s of e)o.removeClass("ck-editor__editable_selected",s);e.clear()}}_enablePluginDisabling(){const n=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const e=this.getSelectedTableCells();if(!e)return;n.model.change(t=>{const o=t.createPositionAt(e[0],0),s=n.model.schema.getNearestSelectionRange(o);t.setSelection(s)})}})}_handleDeleteContent(n,e){const t=this.editor.plugins.get(P),o=e[0],s=e[1],l=this.editor.model,a=!s||s.direction=="backward",r=t.getSelectedTableCells(o);r.length&&(n.stop(),l.change(c=>{const d=r[a?r.length-1:0];l.change(m=>{for(const f of r)l.deleteContent(m.createSelection(f,"in"))});const h=l.schema.getNearestSelectionRange(c.createPositionAt(d,0));o.is("documentSelection")?c.setSelection(h):o.setTo(h)}))}_handleInsertTextEvent(n,e){const t=this.editor,o=this.getSelectedTableCells();if(!o)return;const s=t.editing.view,l=t.editing.mapper,a=o.map(r=>s.createRangeOn(l.toViewElement(r)));e.selection=s.createSelection(a)}_getCellsToSelect(n,e){const t=this.editor.plugins.get("TableUtils"),o=t.getCellLocation(n),s=t.getCellLocation(e),l=Math.min(o.row,s.row),a=Math.max(o.row,s.row),r=Math.min(o.column,s.column),c=Math.max(o.column,s.column),d=new Array(a-l+1).fill(null).map(()=>[]),h={startRow:l,endRow:a,startColumn:r,endColumn:c};for(const{row:w,cell:_}of new I(n.findAncestor("table"),h))d[w-l].push(_);const m=s.row<o.row,f=s.column<o.column;return m&&d.reverse(),f&&d.forEach(w=>w.reverse()),{cells:d.flat(),backward:m||f}}}class qa extends y{static get pluginName(){return"TableClipboard"}static get requires(){return[Pe,Ee,Q,P]}init(){const n=this.editor,e=n.editing.view.document;this.listenTo(e,"copy",(t,o)=>this._onCopyCut(t,o)),this.listenTo(e,"cut",(t,o)=>this._onCopyCut(t,o)),this.listenTo(n.model,"insertContent",(t,[o,s])=>this._onInsertContent(t,o,s),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(n,e){const t=this.editor.editing.view,o=this.editor.plugins.get(Q),s=this.editor.plugins.get(Pe);o.getSelectedTableCells()&&(n.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(e.preventDefault(),n.stop(),this.editor.model.enqueueChange({isUndoable:n.name==="cut"},()=>{const l=s._copySelectedFragmentWithMarkers(n.name,this.editor.model.document.selection,()=>o.getSelectionAsFragment());t.document.fire("clipboardOutput",{dataTransfer:e.dataTransfer,content:this.editor.data.toView(l),method:n.name})})))}_onInsertContent(n,e,t){if(t&&!t.is("documentSelection"))return;const o=this.editor.model,s=this.editor.plugins.get(P),l=this.editor.plugins.get(Pe),a=this.getTableIfOnlyTableInContent(e,o);if(!a)return;const r=s.getSelectionAffectedTableCells(o.document.selection);if(!r.length){it(a,s);return}n.stop(),e.is("documentFragment")?l._pasteMarkersIntoTransformedElement(e.markers,c=>this._replaceSelectedCells(a,r,c)):this.editor.model.change(c=>{this._replaceSelectedCells(a,r,c)})}_replaceSelectedCells(n,e,t){const o=this.editor.plugins.get(P),s={width:o.getColumns(n),height:o.getRows(n)},l=ja(e,s,t,o),a=l.lastRow-l.firstRow+1,r=l.lastColumn-l.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(a,s.height)-1,endColumn:Math.min(r,s.width)-1};n=Bn(n,c,t);const d=e[0].findAncestor("table"),h=this._replaceSelectedCellsWithPasted(n,s,d,l,t);if(this.editor.plugins.get("TableSelection").isEnabled){const m=o.sortRanges(h.map(f=>t.createRangeOn(f)));t.setSelection(m)}else t.setSelection(h[0],0);return d}_replaceSelectedCellsWithPasted(n,e,t,o,s){const{width:l,height:a}=e,r=Ga(n,l,a),c=[...new I(t,{startRow:o.firstRow,endRow:o.lastRow,startColumn:o.firstColumn,endColumn:o.lastColumn,includeAllSlots:!0})],d=[];let h;for(const g of c){const{row:b,column:v}=g;v===o.firstColumn&&(h=g.getPositionBefore());const F=b-o.firstRow,K=v-o.firstColumn,ne=r[F%a][K%l],me=ne?s.cloneElement(ne):null,oe=this._replaceTableSlotCell(g,me,h,s);oe&&(Hn(oe,b,v,o.lastRow,o.lastColumn,s),d.push(oe),h=s.createPositionAfter(oe))}const m=parseInt(t.getAttribute("headingRows")||"0"),f=parseInt(t.getAttribute("headingColumns")||"0"),w=o.firstRow<m&&m<=o.lastRow,_=o.firstColumn<f&&f<=o.lastColumn;if(w){const g={first:o.firstColumn,last:o.lastColumn},b=Je(t,m,g,s,o.firstRow);d.push(...b)}if(_){const g={first:o.firstRow,last:o.lastRow},b=Ye(t,f,g,s);d.push(...b)}return d}_replaceTableSlotCell(n,e,t,o){const{cell:s,isAnchor:l}=n;return l&&o.remove(s),e?(o.insert(e,t),e):null}getTableIfOnlyTableInContent(n,e){if(!n.is("documentFragment")&&!n.is("element"))return null;if(n.is("element","table"))return n;if(n.childCount==1&&n.getChild(0).is("element","table"))return n.getChild(0);const t=e.createRangeIn(n);for(const o of t.getItems())if(o.is("element","table")){const s=e.createRange(t.start,e.createPositionBefore(o));if(e.hasContent(s,{ignoreWhitespaces:!0}))return null;const l=e.createRange(e.createPositionAfter(o),t.end);return e.hasContent(l,{ignoreWhitespaces:!0})?null:o}return null}}function ja(i,n,e,t){const o=i[0].findAncestor("table"),s=t.getColumnIndexes(i),l=t.getRowIndexes(i),a={firstColumn:s.first,lastColumn:s.last,firstRow:l.first,lastRow:l.last},r=i.length===1;return r&&(a.lastRow+=n.height-1,a.lastColumn+=n.width-1,Ka(o,a.lastRow+1,a.lastColumn+1,t)),r||!t.isSelectionRectangular(i)?Ja(o,a,e):(a.lastRow=On(o,a),a.lastColumn=Mn(o,a)),a}function Ka(i,n,e,t){const o=t.getColumns(i),s=t.getRows(i);e>o&&t.insertColumns(i,{at:o,columns:e-o}),n>s&&t.insertRows(i,{at:s,rows:n-s})}function Ga(i,n,e){const t=new Array(e).fill(null).map(()=>new Array(n).fill(null));for(const{column:o,row:s,cell:l}of new I(i))t[s][o]=l;return t}function Ja(i,n,e){const{firstRow:t,lastRow:o,firstColumn:s,lastColumn:l}=n,a={first:t,last:o},r={first:s,last:l};Ye(i,s,a,e),Ye(i,l+1,a,e),Je(i,t,r,e),Je(i,o+1,r,e,t)}function Je(i,n,e,t,o=0){return n<1?void 0:Ln(i,n,o).filter(({column:a,cellWidth:r})=>Dn(a,r,e)).map(({cell:a})=>Pn(a,n,t))}function Ye(i,n,e,t){return n<1?void 0:Fn(i,n).filter(({row:l,cellHeight:a})=>Dn(l,a,e)).map(({cell:l,column:a})=>Un(l,a,n,t))}function Dn(i,n,e){const t=i+n-1,{first:o,last:s}=e,l=i>=o&&i<=s,a=i<o&&t>=o;return l||a}class Ya extends y{static get pluginName(){return"TableKeyboard"}static get requires(){return[Q,P]}init(){const n=this.editor,t=n.editing.view.document,o=n.t;this.listenTo(t,"arrowKey",(...s)=>this._onArrowKey(...s),{context:"table"}),this.listenTo(t,"tab",(...s)=>this._handleTabOnSelectedTable(...s),{context:"figure"}),this.listenTo(t,"tab",(...s)=>this._handleTab(...s),{context:["th","td"]}),n.accessibility.addKeystrokeInfoGroup({id:"table",label:o("Keystrokes that can be used in a table cell"),keystrokes:[{label:o("Move the selection to the next cell"),keystroke:"Tab"},{label:o("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:o("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:o("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(n,e){const t=this.editor,s=t.model.document.selection.getSelectedElement();!s||!s.is("element","table")||(e.preventDefault(),e.stopPropagation(),n.stop(),t.model.change(l=>{l.setSelection(l.createRangeIn(s.getChild(0).getChild(0)))}))}_handleTab(n,e){const t=this.editor,o=this.editor.plugins.get(P),s=this.editor.plugins.get("TableSelection"),l=t.model.document.selection,a=!e.shiftKey;let r=o.getTableCellsContainingSelection(l)[0];if(r||(r=s.getFocusCell()),!r)return;e.preventDefault(),e.stopPropagation(),n.stop();const c=r.parent,d=c.parent,h=d.getChildIndex(c),m=c.getChildIndex(r),f=m===0;if(!a&&f&&h===0){t.model.change(b=>{b.setSelection(b.createRangeOn(d))});return}const w=m===c.childCount-1,_=h===o.getRows(d)-1;if(a&&_&&w&&(t.execute("insertTableRowBelow"),h===o.getRows(d)-1)){t.model.change(b=>{b.setSelection(b.createRangeOn(d))});return}let g;if(a&&w)g=d.getChild(h+1).getChild(0);else if(!a&&f){const b=d.getChild(h-1);g=b.getChild(b.childCount-1)}else g=c.getChild(m+(a?1:-1));t.model.change(b=>{b.setSelection(b.createRangeIn(g))})}_onArrowKey(n,e){const t=this.editor,o=e.keyCode,s=ss(o,t.locale.contentLanguageDirection);this._handleArrowKeys(s,e.shiftKey)&&(e.preventDefault(),e.stopPropagation(),n.stop())}_handleArrowKeys(n,e){const t=this.editor.plugins.get(P),o=this.editor.plugins.get("TableSelection"),s=this.editor.model,l=s.document.selection,a=["right","down"].includes(n),r=t.getSelectedTableCells(l);if(r.length){let d;return e?d=o.getFocusCell():d=a?r[r.length-1]:r[0],this._navigateFromCellInDirection(d,n,e),!0}const c=l.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!l.isCollapsed)if(e){if(l.isBackward==a&&!l.containsEntireContent(c))return!1}else{const d=l.getSelectedElement();if(!d||!s.schema.isObject(d))return!1}return this._isSelectionAtCellEdge(l,c,a)?(this._navigateFromCellInDirection(c,n,e),!0):!1}_isSelectionAtCellEdge(n,e,t){const o=this.editor.model,s=this.editor.model.schema,l=t?n.getLastPosition():n.getFirstPosition();if(!s.getLimitElement(l).is("element","tableCell"))return o.createPositionAt(e,t?"end":0).isTouching(l);const a=o.createSelection(l);return o.modifySelection(a,{direction:t?"forward":"backward"}),l.isEqual(a.focus)}_navigateFromCellInDirection(n,e,t=!1){const o=this.editor.model,s=n.findAncestor("table"),l=[...new I(s,{includeAllSlots:!0})],{row:a,column:r}=l[l.length-1],c=l.find(({cell:v})=>v==n);let{row:d,column:h}=c;switch(e){case"left":h--;break;case"up":d--;break;case"right":h+=c.cellWidth;break;case"down":d+=c.cellHeight;break}const m=d<0||d>a,f=h<0&&d<=0,w=h>r&&d>=a;if(m||f||w){o.change(v=>{v.setSelection(v.createRangeOn(s))});return}h<0?(h=t?0:r,d--):h>r&&(h=t?r:0,d++);const _=l.find(v=>v.row==d&&v.column==h).cell,g=["right","down"].includes(e),b=this.editor.plugins.get("TableSelection");if(t&&b.isEnabled){const v=b.getAnchorCell()||n;b.setCellSelection(v,_)}else{const v=o.createPositionAt(_,g?0:"end");o.change(F=>{F.setSelection(v)})}}}class Za extends as{constructor(){super(...arguments);p(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(e){this.fire(e.type,e)}}class Xa extends y{static get pluginName(){return"TableMouse"}static get requires(){return[Q,P]}init(){this.editor.editing.view.addObserver(Za),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const n=this.editor,e=n.plugins.get(P);let t=!1;const o=n.plugins.get(Q);this.listenTo(n.editing.view.document,"mousedown",(s,l)=>{const a=n.model.document.selection;if(!this.isEnabled||!o.isEnabled||!l.domEvent.shiftKey)return;const r=o.getAnchorCell()||e.getTableCellsContainingSelection(a)[0];if(!r)return;const c=this._getModelTableCellFromDomEvent(l);c&&zt(r,c)&&(t=!0,o.setCellSelection(r,c),l.preventDefault())}),this.listenTo(n.editing.view.document,"mouseup",()=>{t=!1}),this.listenTo(n.editing.view.document,"selectionChange",s=>{t&&s.stop()},{priority:"highest"})}_enableMouseDragSelection(){const n=this.editor;let e,t,o=!1,s=!1;const l=n.plugins.get(Q);this.listenTo(n.editing.view.document,"mousedown",(a,r)=>{!this.isEnabled||!l.isEnabled||r.domEvent.shiftKey||r.domEvent.ctrlKey||r.domEvent.altKey||(e=this._getModelTableCellFromDomEvent(r))}),this.listenTo(n.editing.view.document,"mousemove",(a,r)=>{if(!r.domEvent.buttons||!e)return;const c=this._getModelTableCellFromDomEvent(r);c&&zt(e,c)&&(t=c,!o&&t!=e&&(o=!0)),o&&(s=!0,l.setCellSelection(e,t),r.preventDefault())}),this.listenTo(n.editing.view.document,"mouseup",()=>{o=!1,s=!1,e=null,t=null}),this.listenTo(n.editing.view.document,"selectionChange",a=>{s&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(n){const e=n.target,t=this.editor.editing.view.createPositionAt(e,0);return this.editor.editing.mapper.toModelPosition(t).parent.findAncestor("tableCell",{includeSelf:!0})}}function zt(i,n){return i.parent.parent==n.parent.parent}class Qa extends y{static get requires(){return[Oa,za,Q,Xa,Ya,qa,Qe]}static get pluginName(){return"Table"}}function $a(i){const n=i.getSelectedElement();return n&&zn(n)?n:null}function er(i){const n=i.getFirstPosition();if(!n)return null;let e=n.parent;for(;e;){if(e.is("element")&&zn(e))return e;e=e.parent}return null}function zn(i){return!!i.getCustomProperty("table")&&$e(i)}class tr extends y{static get requires(){return[ht]}static get pluginName(){return"TableToolbar"}afterInit(){const n=this.editor,e=n.t,t=n.plugins.get(ht),o=n.config.get("table.contentToolbar"),s=n.config.get("table.tableToolbar");o&&t.register("tableContent",{ariaLabel:e("Table toolbar"),items:o,getRelatedElement:er}),s&&t.register("table",{ariaLabel:e("Table toolbar"),items:s,getRelatedElement:$a})}}const nr=Ze(()=>Xe(()=>import("./side-form-create-CYBl-84Z.min.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),or=Ze(()=>Xe(()=>import("./side-form-update-BP10sB42.min.js"),__vite__mapDeps([7,1,2,3,4,5,6,8,9]))),sr=Ze(()=>Xe(()=>import("./form_field-Cd7MZxp_.min.js"),__vite__mapDeps([8,1,2,3,4,5,6,9]))),ir={components:{clean_charts:Zn,datatabble:ao,"vue-medialibrary-field":so,color_picker:io,static_field:lo,Vue3TagsInput:ro,Ckeditor:rs,SideFormCreate:nr,SideFormUpdate:or,close_icon:eo,delete_icon:to,car_icon:oo,route_icon:no,form_field:sr},name:"Products",emits:["callback"],setup(i,{emit:n}){const e=B(!1),t=B(!1),o=B({picture:"/uploads/img/placeholder.png",content_langs:{},product_fields:{},colors:[""],sizes:[""],variants:[{}],images:[]}),s=B("english"),l=B([]),a=B([]),r=B([]),c=B(0),d=B(L("General")),h=B({}),m=B(!1),f=B([{title:L("Free tax"),value:""},{title:L("Tax percentage"),value:"percent"},{title:L("Tax amount"),value:"fixed"}]),w=B([{title:L("Free Vat"),value:""},{title:L("Vat percentage"),value:"percent"},{title:L("Vat amount"),value:"fixed"}]),_=B([{title:L("Default"),value:"default"},{title:L("Modern"),value:"modern"}]),g=B([L("General"),L("Pricing"),L("Attributes"),L("Advanced"),L("Images"),L("SEO"),L("Stats")]),b=i.conf.url+i.path+"?load=json";function v(){Xn(b).then(V=>{var A=JSON.parse(JSON.stringify(V));A.item&&(o.value=A.item??o.value,o.value.product_fields=A.item.product_fields??{}),h.value=A,l.value=h.value.categories,a.value=h.value.brands,r.value=h.value.shipping,c.value=h.value.orders_sales_amount,Kn(A.orders_sales)})}v();const F=()=>{v(),e.value=!1},K=()=>{var V=new URLSearchParams;let A=JSON.parse(JSON.stringify(o.value)),se=Object.keys(A),M,rt;for(let he=0;he<se.length;he++)M=se[he],rt=typeof A[M]=="object"||typeof A[M]=="array"?JSON.stringify(A[M]):A[M],V.append("params["+M+"]",rt);let ct=A.product_id>0?"update":"create";V.append("type","Product."+ct),Qn(V,"/api/"+ct).then(he=>{$n(he)})},ne=()=>{n("callback")},me=(V,A)=>{const se=o.value[A];for(let M=0;M<V.length;M++)if(V[M][A]==se)return V[M];return{}},oe=(V,A)=>{o.value.colors[A]=V},Wn=(V,A)=>(o.value.content_langs[A]=V.content_langs[A]??{},o.value.content_langs[A]),qn=Ks,jn=B({plugins:[Ms,li,Ws,cs,ye,dn,qi,Dl,ds,cl,Hi,Qa,tr],toolbar:["undo","redo","|","bold","italic","heading","fontSize","fontColor","link","insertTable","bulletedList","numberedList"]}),lt=(V,A)=>V.map(se=>se[A]),at=B(),Kn=V=>{at.value={labels:lt(V,"total_amount")??[],datasets:[{label:"",backgroundColor:"#42A5F5",data:lt(V,"total_amount")??[]}]}};return{Cdatasets:at,orders_sales_amount:c,editor:qn,editorConfig:jn,getLang:Wn,taxsTypes:f,vatsTypes:w,handleColors:oe,selectedObject:me,showAddCategory:e,showEditSide:t,closeSide:F,content:h,templates:_,tabs:g,categories:l,brands:a,shipping:r,activeItem:o,activeTab:d,translate:L,collapsed:m,seoLang:s,save:K,back:ne}},props:["conf","path","system_setting","business_setting","langs","setting","currency","item"]},lr={class:"w-full flex overflow-auto"},ar={class:"w-full relative"},rr={id:"kt_app_content_container",class:"app-container container-xxl"},cr={class:"action form d-flex flex-column flex-lg-row"},dr={class:"d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10"},ur={class:"card card-flush py-4"},mr={class:"card-header"},hr={class:"card-title"},gr=["textContent"],fr={class:"card-body text-center pt-0"},pr={class:"image-input image-input-empty image-input-outline image-input-placeholder mb-3 w-full"},br=["textContent"],wr={class:"card card-flush py-4"},_r={class:"card-header"},Cr={class:"card-title"},vr=["textContent"],yr={class:"card-toolbar"},kr={class:"card-body pt-0"},xr=["textContent"],Ir={class:"card card-flush py-4"},Tr={class:"card-header"},Sr={class:"card-title"},Ar=["textContent"],Rr={class:"card-body pt-0"},Er=u("hr",{class:"my-2"},null,-1),Vr=["textContent"],Br=["textContent"],Lr=["textContent"],Pr={class:"card card-flush py-4"},Fr={class:"card-header"},Ur={class:"card-title"},Hr=["textContent"],Or={class:"card-body pt-0"},Mr=u("hr",{class:"my-2"},null,-1),Nr=["textContent"],Dr=["textContent"],zr={class:"card card-flush py-4"},Wr={class:"card-header"},qr={class:"card-title"},jr=["textContent"],Kr=["textContent"],Gr=["textContent"],Jr={class:"card card-flush py-4"},Yr={class:"card-header"},Zr={class:"card-title"},Xr=["textContent"],Qr=["textContent"],$r=["textContent"],ec={class:"card card-flush py-4"},tc={class:"card-header"},nc={class:"card-title"},oc=["textContent"],sc={class:"card-body pt-0"},ic=["textContent"],lc=["textContent"],ac={class:"d-flex flex-column flex-row-fluid gap-7 gap-lg-10"},rc={class:"nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-semibold mb-n2"},cc={class:"nav-item"},dc=["onClick","textContent"],uc={class:"tab-content"},mc={key:0,class:"tab-pane fade show active"},hc={class:"d-flex flex-column gap-7 gap-lg-10"},gc={class:"card card-flush py-4"},fc={class:"card-header flex flex-nowrap"},pc={class:"card-title w-full"},bc=["textContent"],wc={class:"flex gap-10 flex-none"},_c=["onClick"],Cc=["src"],vc=["textContent"],yc={class:"w-full"},kc={key:0,class:"card-body pt-0"},xc={class:"mb-10 fv-row"},Ic={class:"required form-label"},Tc=["textContent"],Sc=["textContent"],Ac={class:"position-relative flex"},Rc=["value"],Ec=["onUpdate:modelValue"],Vc=["textContent"],Bc={class:"mb-10 fv-row"},Lc={class:"required form-label"},Pc=["textContent"],Fc=["textContent"],Uc=["onUpdate:modelValue"],Hc=["textContent"],Oc={class:"mb-10 fv-row"},Mc={class:"form-label gap-6 flex"},Nc=["textContent"],Dc=["textContent"],zc=["textContent"],Wc={class:"mb-10 fv-row"},qc={class:"form-label gap-6 flex"},jc=["textContent"],Kc=["textContent"],Gc=["textContent"],Jc={key:1,class:"tab-pane fade show active"},Yc={class:"d-flex flex-column gap-7 gap-lg-10"},Zc={class:"w-full"},Xc={key:0,class:"card card-flush py-4"},Qc={class:"card-header flex flex-nowrap"},$c={class:"w-full card-title"},ed=["textContent"],td={class:"flex gap-10 flex-none"},nd=["onClick"],od=["src"],sd=["textContent"],id={class:"card-body pt-0"},ld={class:"mb-10"},ad=["textContent"],rd=["placeholder","onUpdate:modelValue"],cd=["textContent"],dd={class:"mb-10"},ud=["textContent"],md=["onUpdate:modelValue"],hd=["textContent"],gd=["textContent"],fd=["onUpdate:modelValue"],pd=["textContent"],bd={key:2,class:"tab-pane fade show active"},wd={class:"d-flex flex-column gap-7 gap-lg-10"},_d={class:"card card-flush py-4"},Cd={class:"card-header"},vd={class:"card-title"},yd=["textContent"],kd={class:"card-body pt-0"},xd={key:3,class:"tab-pane fade show active"},Id={class:"d-flex flex-column gap-7 gap-lg-10"},Td={class:"card card-flush py-4"},Sd={class:"card-header"},Ad={class:"card-title"},Rd=["textContent"],Ed={class:"card-body pt-0"},Vd={class:"","data-kt-ecommerce-catalog-add-product":"auto-options"},Bd=["textContent"],Ld={id:"kt_ecommerce_add_product_options"},Pd={class:"form-group"},Fd={class:"d-flex flex-column gap-3 mb-2"},Ud={key:0,class:"form-group flex flex-wrap align-items-center gap-5"},Hd=["onClick"],Od={class:"form-group mt-5"},Md=["textContent"],Nd={class:"card card-flush py-4"},Dd={class:"card-header"},zd={class:"card-title"},Wd=["textContent"],qd={class:"card-body pt-0"},jd={class:"","data-kt-ecommerce-catalog-add-product":"auto-options"},Kd=["textContent"],Gd={id:"kt_ecommerce_add_product_options"},Jd={class:"form-group"},Yd={class:"d-flex flex-column gap-3 mb-2"},Zd={key:0,class:"form-group flex flex-wrap align-items-center gap-5"},Xd=["onUpdate:modelValue","placeholder"],Qd=["onClick"],$d={class:"form-group mt-5"},eu=["textContent"],tu={class:"card card-flush py-4"},nu={class:"card-header"},ou={class:"card-title"},su=["textContent"],iu={class:"card-body pt-0"},lu={class:"","data-kt-ecommerce-catalog-add-product":"auto-options"},au=["textContent"],ru={id:"kt_ecommerce_add_product_options"},cu={class:"form-group"},du={key:0,class:"d-flex flex-column gap-3"},uu={class:"form-group d-flex flex-wrap align-items-center gap-5"},mu={class:"w-100 w-md-200px"},hu=["onUpdate:modelValue","placeholder"],gu=["onUpdate:modelValue","placeholder"],fu=["onClick"],pu={class:"form-group mt-5"},bu=["textContent"],wu={key:4,class:"tab-pane fade show active"},_u={class:"card card-flush py-4"},Cu={class:"card-header"},vu={class:"card-title"},yu=["textContent"],ku={class:"card-body pt-0"},xu={class:"row mb-10"},Iu={class:"col-md-8 fv-row"},Tu=["textContent"],Su={class:"w-full"},Au={class:"col-md-4 fv-row"},Ru={class:"d-flex align-items-center fs-6 fw-semibold form-label mb-2"},Eu=["textContent"],Vu={class:"position-relative"},Bu=["disabled"],Lu={class:"position-absolute translate-middle-y top-50 text-muted end-0 me-3"},Pu={key:0},Fu={key:1},Uu={class:"row mb-10"},Hu={class:"col-md-8 fv-row"},Ou=["textContent"],Mu={class:"w-full"},Nu={class:"col-md-4 fv-row"},Du={class:"d-flex align-items-center fs-6 fw-semibold form-label mb-2"},zu=["textContent"],Wu={class:"position-relative"},qu=["disabled"],ju={class:"position-absolute translate-middle-y top-50 text-muted end-0 me-3"},Ku={key:0},Gu={key:1},Ju={key:5,class:"tab-pane fade show active"},Yu={class:"d-flex flex-column gap-7 gap-lg-10"},Zu={class:"card card-flush py-4"},Xu={class:"card-header flex flex-nowrap"},Qu={class:"card-title"},$u=["textContent"],em={class:"flex-end"},tm=["textContent"],nm={class:"w-full relative flex gap-2 py-2"},om=["textContent"],sm={key:6,class:"tab-pane fade show active"},im={class:"d-flex flex-column gap-7 gap-lg-10"},lm={class:"card card-flush h-md-50 mb-5 mb-xl-10 w-full"},am={class:"card-header pt-5"},rm={class:"card-title d-flex flex-column"},cm={class:"d-flex align-items-center"},dm={class:"fs-4 fw-semibold text-gray-500 me-1 align-self-start"},um={class:"fs-2hx fw-bold text-gray-900 me-2 lh-1 ls-n2"},mm={class:"text-gray-500 pt-1 fw-semibold fs-6"},hm={class:"px-4 pt-2 pb-4 d-flex align-items-center"},gm=u("div",{class:"d-flex flex-center me-5 pt-2"},null,-1),fm={class:"d-flex flex-column content-justify-center w-100"},pm={class:"d-flex justify-content-end"},bm=["textContent"],wm=["textContent"];function _m(i,n,e,t,o,s){const l=D("close_icon"),a=D("vue-medialibrary-field"),r=D("form_field"),c=D("vue-feather"),d=D("vue3-tags-input"),h=D("ckeditor"),m=D("static_field"),f=D("color_picker"),w=D("clean_charts"),_=D("side-form-create");return k(),x("div",lr,[u("div",ar,[T(l,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),u("div",rr,[u("div",cr,[u("div",dr,[u("div",ur,[u("div",mr,[u("div",hr,[u("h2",{textContent:C(t.translate("Main picture"))},null,8,gr)])]),u("div",fr,[u("div",pr,[e.conf?(k(),ie(a,{onChanged:n[0]||(n[0]=g=>{t.activeItem.picture=g}),key:t.activeItem,name:"params[picture]",filepath:t.activeItem.picture,api_url:e.conf.url},null,8,["filepath","api_url"])):R("",!0)]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("allowed media types msg"))},null,8,br)])]),u("div",wr,[u("div",_r,[u("div",Cr,[u("h2",{textContent:C(t.translate("Status"))},null,8,vr)]),u("div",yr,[u("div",{class:we([t.activeItem.status=="on"?"bg-success":"bg-danger","rounded-circle w-15px h-15px"])},null,2)])]),u("div",kr,[T(r,{item:t.activeItem,column:{required:!0,key:"status",title:t.translate("status"),column_type:"select",text_key:"title",column_key:"value",data:[{value:null,title:t.translate("Pending")},{value:"on",title:t.translate("Active")}]}},null,8,["item","column"]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Set the item status"))},null,8,xr)])]),u("div",Ir,[u("div",Tr,[u("div",Sr,[u("h2",{textContent:C(t.translate("Product Details"))},null,8,Ar)])]),u("div",Rr,[Er,u("label",{class:"form-label",textContent:C(t.translate("Categories"))},null,8,Vr),T(r,{onCallback:n[1]||(n[1]=g=>{console.log(g),t.activeItem.product_categories=g}),item:t.activeItem,column:{multiple:!0,key:"product_categories",title:t.translate("Main Category"),column_type:"select",text_key:"name",column_key:"category_id",data:t.categories}},null,8,["item","column"]),u("div",{class:"text-muted fs-7 mb-7",textContent:C(t.translate("Add item to multi categories"))},null,8,Br),u("a",{href:"javascript:;",onClick:n[2]||(n[2]=g=>t.showAddCategory=!0),class:"btn btn-light-primary btn-sm mb-10"},[T(c,{class:"w-8",type:"check-square"}),u("span",{textContent:C(t.translate("Create new category"))},null,8,Lr)])])]),u("div",Pr,[u("div",Fr,[u("div",Ur,[u("h2",{textContent:C(t.translate("Tags"))},null,8,Hr)])]),u("div",Or,[Mr,u("label",{class:"form-label d-block",textContent:C(t.translate("Product Tags"))},null,8,Nr),T(d,{onOnTagsChanged:n[3]||(n[3]=g=>t.activeItem.tags=g),tags:t.activeItem.tags,placeholder:"input tags"},null,8,["tags"]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Add tags to a item"))},null,8,Dr)])]),u("div",zr,[u("div",Wr,[u("div",qr,[u("h2",{textContent:C(t.translate("Shipping"))},null,8,jr)])]),t.shipping?(k(),x("div",{class:"card-body pt-0",key:t.shipping},[u("label",{class:"form-label",textContent:C(t.translate("Shipping"))},null,8,Kr),T(r,{onCallback:n[4]||(n[4]=g=>{t.activeItem.shipping=g}),item:t.activeItem,column:{multiple:!0,key:"shipping",title:t.translate("shipping"),column_type:"select",text_key:"name",column_key:"shipping_id",data:t.shipping}},null,8,["item","column"]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Select shipping types for item"))},null,8,Gr)])):R("",!0)]),u("div",Jr,[u("div",Yr,[u("div",Zr,[u("h2",{textContent:C(t.translate("Brand"))},null,8,Xr)])]),t.brands?(k(),x("div",{class:"card-body pt-0",key:t.brands},[u("label",{class:"form-label",textContent:C(t.translate("Product Brand"))},null,8,Qr),(k(),ie(r,{key:t.brands,item:t.activeItem.product_fields,column:{key:"brand_id",title:t.translate("Brand"),column_type:"select",text_key:"name",column_key:"brand_id",data:t.brands}},null,8,["item","column"])),u("div",{class:"text-muted fs-7 mb-7",textContent:C(t.translate("Choose brand of item"))},null,8,$r)])):R("",!0)]),u("div",ec,[u("div",tc,[u("div",nc,[u("h2",{textContent:C(t.translate("Page Template"))},null,8,oc)])]),u("div",sc,[u("label",{textContent:C(t.translate("Select a item template")),class:"form-label"},null,8,ic),T(r,{item:t.activeItem.product_fields,column:{required:!0,key:"template",title:t.translate("Template"),column_type:"select",text_key:"title",column_key:"value",data:t.templates}},null,8,["item","column"]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Assign a template from your current theme to define how a single item is displayed"))},null,8,lc)])])]),u("div",ac,[u("ul",rc,[(k(!0),x(G,null,J(t.tabs,g=>(k(),x("li",cc,[u("a",{class:we(["nav-link text-active-primary pb-4",g==t.activeTab?"active":""]),onClick:b=>t.activeTab=g,href:"javascript:;",textContent:C(g)},null,10,dc)]))),256))]),u("div",uc,[t.activeTab==t.translate("General")?(k(),x("div",mc,[u("div",hc,[u("div",gc,[u("div",fc,[u("div",pc,[u("h2",{textContent:C(t.translate("General"))},null,8,bc)]),u("ul",wc,[(k(!0),x(G,null,J(e.langs,g=>(k(),x("li",{class:"text-lg flex py-5 gap-2 cursor-pointer",onClick:b=>t.seoLang=g.language_code},[u("img",{src:g.icon,class:"rounded-full w-10 h-10 border-1 border border-gray-600 p-1"},null,8,Cc),u("a",{href:"javascript:;",class:we(g.language_code==t.seoLang?"text-danger font-bold":"opacity-75 text-gray-400"),textContent:C(g.name)},null,10,vc)],8,_c))),256))])]),u("div",yc,[(k(!0),x(G,null,J(e.langs,g=>(k(),x("div",{key:t.seoLang},[t.seoLang==g.language_code?(k(),x("div",kc,[u("div",xc,[u("label",Ic,[u("span",{textContent:C(t.translate("Path"))},null,8,Tc),u("strong",{class:"px-4",textContent:C(t.translate(g.language_code))},null,8,Sc)]),u("div",Ac,[u("input",{disabled:!0,value:e.conf.url,class:"bg-gray-200 form-control-solid px-4"},null,8,Rc),z(u("input",{type:"text","onUpdate:modelValue":b=>t.getLang(t.activeItem,g.language_code).prefix=b,class:"form-control form-control-solid"},null,8,Ec),[[W,t.getLang(t.activeItem,g.language_code).prefix]])]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("URL path for the item webpage"))},null,8,Vc)]),u("div",Bc,[u("label",Lc,[u("span",{textContent:C(t.translate("Name"))},null,8,Pc),u("strong",{class:"px-4",textContent:C(g.name)},null,8,Fc)]),z(u("input",{type:"text",class:"form-control mb-2","onUpdate:modelValue":b=>t.activeItem.content_langs[g.language_code].title=b},null,8,Uc),[[W,t.activeItem.content_langs[g.language_code].title]]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Name is required and recommended to be unique"))},null,8,Hc)]),u("div",Oc,[u("label",Mc,[u("span",{textContent:C(t.translate("Description"))},null,8,Nc),u("strong",{class:"px-4",textContent:C(g.name)},null,8,Dc)]),T(h,{modelValue:t.activeItem.content_langs[g.language_code].short,"onUpdate:modelValue":b=>t.activeItem.content_langs[g.language_code].short=b,editor:t.editor,config:t.editorConfig},null,8,["modelValue","onUpdate:modelValue","editor","config"]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Set a description to the item for better visibility"))},null,8,zc)]),u("div",Wc,[u("label",qc,[u("span",{textContent:C(t.translate("Page Content"))},null,8,jc),u("strong",{class:"px-4",textContent:C(g.name)},null,8,Kc)]),T(h,{modelValue:t.activeItem.content_langs[g.language_code].content,"onUpdate:modelValue":b=>t.activeItem.content_langs[g.language_code].content=b,editor:t.editor,config:t.editorConfig},null,8,["modelValue","onUpdate:modelValue","editor","config"]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Set a description to the item for better visibility"))},null,8,Gc)])])):R("",!0)]))),128))])])])])):R("",!0),t.activeTab==t.translate("SEO")?(k(),x("div",Jc,[u("div",Yc,[u("div",Zc,[(k(!0),x(G,null,J(e.langs,g=>(k(),x("div",{key:g},[t.seoLang==g.language_code?(k(),x("div",Xc,[u("div",Qc,[u("div",$c,[u("h2",{textContent:C(t.translate("Meta Options"))},null,8,ed)]),u("ul",td,[(k(!0),x(G,null,J(e.langs,b=>(k(),x("li",{class:"text-lg flex py-5 gap-2 cursor-pointer",onClick:v=>t.seoLang=b.language_code},[u("img",{src:b.icon,class:"rounded-full w-10 h-10 border-1 border border-gray-600 p-1"},null,8,od),u("a",{href:"javascript:;",class:we(b.language_code==t.seoLang?"text-danger font-bold":"opacity-75 text-gray-400"),textContent:C(b.name)},null,10,sd)],8,nd))),256))])]),u("div",id,[u("div",ld,[u("label",{class:"form-label",textContent:C(t.translate("Meta Tag Title")+" ("+g.language_code+")")},null,8,ad),z(u("input",{type:"text",class:"form-control mb-2",name:"meta_title",placeholder:t.translate("Meta tag name"),"onUpdate:modelValue":b=>t.activeItem.content_langs[g.language_code].seo_title=b},null,8,rd),[[W,t.activeItem.content_langs[g.language_code].seo_title]]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Set a meta tag title. Recommended to be simple and precise keywords")+" ("+g.name+")")},null,8,cd)]),u("div",dd,[u("label",{class:"form-label",textContent:C(t.translate("Meta Tag Description"))},null,8,ud),z(u("textarea",{"onUpdate:modelValue":b=>t.activeItem.content_langs[g.language_code].seo_desc=b,class:""},null,8,md),[[W,t.activeItem.content_langs[g.language_code].seo_desc]]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Set a meta tag description to the item for increased SEO ranking"))},null,8,hd)]),u("div",null,[u("label",{class:"form-label",textContent:C(t.translate("Meta Tag Keywords"))},null,8,gd),z(u("input",{id:"kt_ecommerce_add_item_meta_keywords",class:"form-control","onUpdate:modelValue":b=>t.activeItem.content_langs[g.language_code].seo_keywords=b},null,8,fd),[[W,t.activeItem.content_langs[g.language_code].seo_keywords]]),u("div",{class:"text-muted fs-7",textContent:C(t.translate("Set a list of keywords that the item is related to. Separate the keywords by adding a comma <code>,</code> between each keyword"))},null,8,pd)])])])):R("",!0)]))),128))])])])):R("",!0),t.activeTab==t.translate("Advanced")?(k(),x("div",bd,[u("div",wd,[u("div",_d,[u("div",Cd,[u("div",vd,[u("h2",{textContent:C(t.translate("Product information"))},null,8,yd)])]),u("div",kd,[T(m,{column:{title:t.translate("SKU"),key:"sku",column_type:"text"},system_setting:e.system_setting,item:t.activeItem.product_fields,callback:g=>{t.activeItem.value.product_fields.sku=g}},null,8,["column","system_setting","item","callback"]),T(m,{column:{title:t.translate("Barcode"),description:t.translate("Enter the product barcode number"),key:"barcode",column_type:"text"},system_setting:e.system_setting,item:t.activeItem.product_fields,callback:g=>{t.activeItem.value.product_fields.barcode=g}},null,8,["column","system_setting","item","callback"]),T(m,{column:{title:t.translate("Unit"),description:t.translate("Unit of the product to sale"),key:"unit",column_type:"text"},system_setting:e.system_setting,item:t.activeItem.product_fields,callback:g=>{t.activeItem.value.product_fields.unit=g}},null,8,["column","system_setting","item","callback"]),T(m,{column:{title:t.translate("weight"),description:t.translate("Enter the product weight"),key:"weight",column_type:"text"},system_setting:e.system_setting,item:t.activeItem.product_fields,callback:g=>{t.activeItem.value.product_fields.weight=g}},null,8,["column","system_setting","item","callback"]),T(m,{column:{title:t.translate("minimum purchase qty"),description:t.translate("Minimum quantity to make order"),key:"min_purchase_qty",column_type:"number"},system_setting:e.system_setting,item:t.activeItem.product_fields,callback:g=>{t.activeItem.value.product_fields.min_purchase_qty=g}},null,8,["column","system_setting","item","callback"])])])])])):R("",!0),t.activeTab==t.translate("Attributes")?(k(),x("div",xd,[u("div",Id,[u("div",Td,[u("div",Sd,[u("div",Ad,[u("h2",{textContent:C(t.translate("Colors"))},null,8,Rd)])]),u("div",Ed,[u("div",Vd,[u("label",{class:"form-label",textContent:C(t.translate("Choose Product colors"))},null,8,Bd),u("div",Ld,[u("div",Pd,[(k(!0),x(G,null,J(t.activeItem.colors,(g,b)=>(k(),x("div",Fd,[g?(k(),x("div",Ud,[T(f,{index:b,onCallback:t.handleColors,color:g},null,8,["index","onCallback","color"]),u("button",{onClick:v=>t.activeItem.colors[b]=null,type:"button",class:"btn btn-sm btn-icon btn-light-danger"},[T(c,{type:"delete"})],8,Hd)])):R("",!0)]))),256))]),u("div",Od,[u("button",{type:"button",onClick:n[5]||(n[5]=g=>t.activeItem.colors.push({})),class:"btn btn-sm btn-light-primary"},[T(c,{type:"copy"}),u("span",{textContent:C(t.translate("Add"))},null,8,Md)])])])])])]),u("div",Nd,[u("div",Dd,[u("div",zd,[u("h2",{textContent:C(t.translate("Sizes"))},null,8,Wd)])]),u("div",qd,[u("div",jd,[u("label",{class:"form-label",textContent:C(t.translate("Choose Product sizes"))},null,8,Kd),u("div",Gd,[u("div",Jd,[(k(!0),x(G,null,J(t.activeItem.sizes,(g,b)=>(k(),x("div",Yd,[g!=null?(k(),x("div",Zd,[z(u("input",{"onUpdate:modelValue":v=>t.activeItem.sizes[b]=v,type:"text",class:"form-control mw-100 w-200px",placeholder:t.translate("Size")},null,8,Xd),[[W,t.activeItem.sizes[b]]]),u("button",{onClick:v=>t.activeItem.sizes[b]=null,type:"button",class:"btn btn-sm btn-icon btn-light-danger"},[T(c,{type:"delete"})],8,Qd)])):R("",!0)]))),256))]),u("div",$d,[u("button",{type:"button",onClick:n[6]||(n[6]=g=>t.activeItem.sizes.push("")),class:"btn btn-sm btn-light-primary"},[T(c,{type:"copy"}),u("span",{textContent:C(t.translate("Add"))},null,8,eu)])])])])])]),u("div",tu,[u("div",nu,[u("div",ou,[u("h2",{textContent:C(t.translate("Variations"))},null,8,su)])]),u("div",iu,[u("div",lu,[u("label",{class:"form-label",textContent:C(t.translate("Add Product Variations"))},null,8,au),u("div",ru,[(k(!0),x(G,null,J(t.activeItem.variants,(g,b)=>(k(),x("div",cu,[g?(k(),x("div",du,[u("div",uu,[u("div",mu,[z(u("input",{"onUpdate:modelValue":v=>t.activeItem.variants[b].title=v,type:"text",class:"form-control mw-100 w-200px",placeholder:t.translate("title")},null,8,hu),[[W,t.activeItem.variants[b].title]])]),z(u("input",{"onUpdate:modelValue":v=>t.activeItem.variants[b].value=v,type:"text",class:"form-control mw-100 w-200px",placeholder:t.translate("Variation")},null,8,gu),[[W,t.activeItem.variants[b].value]]),u("button",{onClick:v=>t.activeItem.variants[b]=null,type:"button",class:"btn btn-sm btn-icon bg-gray-100 flex gap-4"},[T(c,{type:"delete"})],8,fu)])])):R("",!0)]))),256)),u("div",pu,[u("button",{onClick:n[7]||(n[7]=g=>t.activeItem.variants.push({})),type:"button",class:"btn btn-sm btn-light-primary"},[T(c,{class:"w-25px",type:"plus"}),u("span",{textContent:C(t.translate("Add new"))},null,8,bu)])])])])])])])])):R("",!0),t.activeTab==t.translate("Pricing")?(k(),x("div",wu,[u("div",_u,[u("div",Cu,[u("div",vu,[u("h2",{textContent:C(t.translate("Pricing"))},null,8,yu)])]),u("div",ku,[T(m,{column:{title:t.translate("price"),description:t.translate("Set the product price"),key:"price",column_type:"number"},system_setting:e.system_setting,item:t.activeItem,callback:g=>{t.activeItem.value.price=g}},null,8,["column","system_setting","item","callback"]),T(m,{column:{title:t.translate("Old price"),description:t.translate("Set the product old price"),key:"old_price",column_type:"number"},system_setting:e.system_setting,item:t.activeItem,callback:g=>{t.activeItem.value.old_price=g}},null,8,["column","system_setting","item","callback"]),u("div",xu,[u("div",Iu,[u("label",{class:"required fs-6 fw-semibold form-label mb-2",textContent:C(t.translate("Tax"))},null,8,Tu),u("div",Su,[T(r,{item:t.activeItem.product_fields,column:{required:!0,key:"tax_type",title:t.translate("Tax"),column_type:"select",text_key:"title",column_key:"value",data:t.taxsTypes}},null,8,["item","column"])])]),u("div",Au,[u("label",Ru,[u("span",{class:"required",textContent:C(t.translate("Amount"))},null,8,Eu)]),u("div",Vu,[z(u("input",{disabled:!t.activeItem.product_fields.tax_type,type:"number","onUpdate:modelValue":n[8]||(n[8]=g=>t.activeItem.product_fields.tax_amount=g),class:"form-control form-control-solid"},null,8,Bu),[[W,t.activeItem.product_fields.tax_amount]]),u("div",Lu,[t.activeItem.product_fields.tax_type=="percent"?(k(),x("span",Pu," % ")):R("",!0),t.activeItem.product_fields.tax_type=="fixed"?(k(),x("span",Fu," $ ")):R("",!0)])])])]),u("div",Uu,[u("div",Hu,[u("label",{class:"required fs-6 fw-semibold form-label mb-2",textContent:C(t.translate("Vat"))},null,8,Ou),u("div",Mu,[T(r,{item:t.activeItem.product_fields,column:{required:!0,key:"vat_type",title:t.translate("Vat"),column_type:"select",text_key:"title",column_key:"value",data:t.vatsTypes}},null,8,["item","column"])])]),u("div",Nu,[u("label",Du,[u("span",{class:"required",textContent:C(t.translate("Amount"))},null,8,zu)]),u("div",Wu,[z(u("input",{disabled:!t.activeItem.product_fields.vat_type,type:"number","onUpdate:modelValue":n[9]||(n[9]=g=>t.activeItem.product_fields.vat_amount=g),class:"form-control form-control-solid"},null,8,qu),[[W,t.activeItem.product_fields.vat_amount]]),u("div",ju,[t.activeItem.product_fields.vat_type=="percent"?(k(),x("span",Ku," % ")):R("",!0),t.activeItem.product_fields.vat_type=="fixed"?(k(),x("span",Gu," $ ")):R("",!0)])])])])])])])):R("",!0),t.activeTab==t.translate("Images")?(k(),x("div",Ju,[u("div",Yu,[u("div",Zu,[u("div",Xu,[u("div",Qu,[u("h2",{textContent:C(t.translate("Media"))},null,8,$u)]),u("div",em,[u("a",{href:"javascript:;",onClick:n[10]||(n[10]=g=>t.activeItem.images.push({path:"/uploads/img/placeholder.png"})),class:"btn btn-sm btn-flex btn-secondary fw-bold"},[T(c,{class:"w-8",type:"image"}),u("span",{textContent:C(t.translate("Add image"))},null,8,tm)])])]),(k(),x("div",{class:"card-body pt-0",key:t.activeItem.images},[(k(!0),x(G,null,J(t.activeItem.images,(g,b)=>(k(),x("div",nm,[g?(k(),ie(a,{key:0,class:"w-full",onClear:()=>{t.activeItem.images[b]=null},onChanged:v=>{t.activeItem.images[b]={path:v}},conf:e.conf,filepath:g.path},null,8,["onClear","onChanged","conf","filepath"])):R("",!0),g&&b>0?(k(),ie(c,{key:1,onClick:v=>t.activeItem.images[b]=null,class:"absolute bottom-25 cursor-pointer p-2 px-4 right right-4 vue-feather vue-feather--delete w-4",type:"delete"},null,8,["onClick"])):R("",!0)]))),256)),u("div",{class:"text-muted fs-7 py-2",textContent:C(t.translate("Set the product media gallery"))},null,8,om)]))])])])):R("",!0),t.activeTab==t.translate("Stats")?(k(),x("div",sm,[u("div",im,[u("div",lm,[u("div",am,[u("div",rm,[u("div",cm,[u("span",dm,C(e.currency),1),u("span",um,C(t.orders_sales_amount),1)]),u("span",mm,C(t.translate("Total Orders sales")),1)])]),u("div",hm,[gm,u("div",fm,[(k(),ie(w,{data:t.Cdatasets,key:t.Cdatasets},null,8,["data"]))])])])])])):R("",!0)]),u("div",pm,[u("a",{href:"/admin/products",id:"kt_ecommerce_add_product_cancel",class:"btn btn-light me-5",textContent:C(t.translate("Cancel"))},null,8,bm),u("button",{onClick:n[11]||(n[11]=(...g)=>t.save&&t.save(...g)),id:"kt_ecommerce_add_product_submit",class:"btn btn-primary"},[u("span",{class:"indicator-label",textContent:C(t.translate("Save Changes"))},null,8,wm)])])])])])]),t.showAddCategory?(k(),ie(_,{ref:"activeFormCreate",onCallback:t.closeSide,auth:i.auth,key:t.showAddCategory,conf:e.conf,model:"ProductCategory.create",columns:t.content.fillable_category,class:"col-md-3"},null,8,["onCallback","auth","conf","columns"])):R("",!0)])}const Lm=Yn(ir,[["render",_m]]);export{Lm as default};
