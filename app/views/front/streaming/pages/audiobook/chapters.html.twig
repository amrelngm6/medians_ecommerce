

            <div  class=" text-primary  w-full  rounded-2xl bg-white dark:bg-gray-900  p-8" x-data="{media_id:'{{item.media_id}}', chapters: {{item.files ?? [] }}, title: '{{item.name}}' }">
                <div class=" text-primary"><h4 class="text-xl dark:text-gray-400">{{lang.translate( model_type ~ ' picture')}} </h4></div>
                <hr class="opacity-0 my-4" />
                <form action="/front_api/update" method="post" enctype="multipart/form-data" id="upload-step" class="ajax-form w-full  pb-10">

                    <input type="hidden" name="params[media_id]" x-model="{{item.media_id}}" />
                    <input type="hidden" name="type" value="Audiobook.update_chapters" />
                    
                    <div class="flex gap-4 text-primary mt-6"><h4 class="text-xl dark:text-gray-400" >{{lang.translate('Chapters list')}}</h4> </div>
                    <hr class="opacity-20 my-4" />
                    <template x-for="chapter in chapters">
    
                        <template x-if="chapter">
                            <div class="flex gap-10 pb-6 relative" :id="'upload-media-form'+chapter.media_file_id">
                                <input type="hidden" name="params[chapters][media_file_id][]" x-model="chapter.media_file_id" />
                                <input type="hidden" name="params[chapters][path][]" x-model="chapter.path" />

                                <label  class="cursor-pointer py-4 px-2 dark:bg-gray-800  bg-gray-200 rounded-3xl w-40 border border-1 border-dashed	border-orange-600">
                                    <img id="" src="/src/front_assets/svg/music-tone.svg" class="dark:opacity-30" />
                                    {# <input :id="'imageInput'+chapter.media_file_id" type="file" name="file[]" class="hidden" /> #}
                                </label>  
                                <div class="grid-cols-2 grid gap-10">
                                    <div class="text-primary dark:text-gray-400  w-full block">
                                        <p class="text-lg py-2">{{lang.translate('Chapter name')}} </p>
                                        <input name="params[chapters][title][]" placeholder="{{lang.translate('Chapter Name')}} *" x-model="chapter.title" value="{{chapter.title}}" class=" dark:bg-gray-900 dark:border-gray-700 py-2 px-4 w-full rounded-2xl bg-gray-100 border focus:outline-none focus:border-orange-300  border-gray-200 w-full"  />
                                        <div x-on:click='Swal.fire({ title: "{{lang.translate('Remove chapter')}}", text: "Confirm to remove this chapter", icon: "warning", showCancelButton: true, confirmButtonColor: "#3085d6", cancelButtonColor: "#d33", confirmButtonText: "Confirm" }).then((result) => { if (result.isConfirmed) { chapter = null; } })' class="hover:text-gray-200  cursor-pointer py-4 block flex gap-2 mt-4">
                                            <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M10 12V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M14 12V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M4 7H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                            {{lang.translate('Remove')}}
                                         </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </template>
                    <div class="my-4"></div>
                    <span  class="cursor-pointer dark:text-gray-400 float-left inline-block px-6 py-2 rounded-2xl border transition hover:border-orange-600 border-orange-300" x-on:click="jQuery('#upload-file-popup').removeClass('hidden'), jQuery('#upload-file-media').val('{{item.media_id}}')">{{lang.translate('Add chapter')}}</span>

                    <button class=" dark:text-gray-400 float-right inline-block px-6 py-2 rounded-2xl border transition hover:border-orange-600 border-orange-300">{{lang.translate('Next')}}</button>
                    
                </form>
                {% include 'views/front/'~ template ~'/popups/upload-file.html.twig' %}
            </div>
